; Kid Goku GT by EGC constants and state file.

[Data]
;Amount of life to start with
life = 1000;2500
;attack power (more is stronger)
attack = 100;120
;defensive power (more is stronger)
defence = 100;120
;Percentage to increase defense everytime player is knocked down
fall.defence_up = 50
;Time which player lies down for, before getting up
liedown.time = 50
volumescale = 100
;Number of points for juggling
;M.U.G.E.N allows for certain moves to "juggle", that is, to hit opponents who have been knocked into the air, or are lying down on the ground. The juggling system works this way: each person starts with a set number of juggle "points" on the first hit that makes them fall, typically 15.
;Some quick terminology: when we say a player is "falling", then we mean he does not recover control in the air, and will fall onto the ground.
;If a player is hit while he is in the falling in the air or lying down on the ground, then his juggle points will decrease by an amount depending on the attack. When an attack requires more juggle points than the opponent has left, then the attack will miss. Any move that causes the opponent to fall immediately subtracts its juggle points on the first hit.
;For example, an attack that requires 7 juggle points could theoretically be used to juggle the opponent twice (assuming you started with 15 points), leaving the opponent with 1 point left. Subsequent such attacks will miss.
;The reason for this juggle system is to prevent infinite combos in the air.

airjuggle = 15
;Default hit spark number for HitDefs
sparkno = 7000
;Default guard spark number
guard.sparkno = 7050
;1 to enable echo on KO
KO.echo = 1
;Volume offset (negative for softer)
;volume = 0
;Variables with this index and above will not have their values
;reset to 0 between rounds or matches. There are 60 int variables,
;indexed from 0 to 59, and 40 float variables, indexed from 0 to 39.
;If omitted, then it defaults to 60 and 40 for integer and float
;variables repectively, meaning that none are persistent, i.e. all
;are reset. If you want your variables to persist between matches,
;you need to override state 5900 from common1.cns.
IntPersistIndex = 0
FloatPersistIndex = 0

[Size]
xscale = 1		;Horizontal scaling factor.
yscale = 1		;Vertical scaling factor.
ground.back = 15		;Player width (back, ground)
ground.front = 16		;Player width (front, ground)
air.back = 12		;Player width (back, air)
air.front = 12		;Player width (front, air)
height = 50		;Altura del jugador (for opponent to jump over)
attack.dist = 160		;Default attack distance
proj.attack.dist = 90	;Default attack distance for projectiles
proj.doscale = 0		;Set to 1 to scale projectiles too
head.pos = 1, -45		;Approximate position of head
mid.pos = 1, -25		;Approximate position of midsection
shadowoffset = 0		;Number of pixels to vertically offset the shadow
draw.offset = 0,0		;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 1.4		;Walk forward
walk.back = -1.2		;Walk backward

run.fwd  = 7, 0		;Run forward (x, y)
run.back = -6,0		;Hop backward (x, y)

jump.neu = 0,-10		;Neutral jumping velocity (x, y)
jump.back = -2.55		;Jump back Speed (x, y)
jump.fwd = 2.75		;Jump forward Speed (x, y)

runjump.back = -3,-8.1	;Running jump speeds (opt)
runjump.fwd = 5,-8.1	;.

airjump.neu = 0,-8.1	;.
airjump.back = -2.55	;Air jump speeds (opt)
airjump.fwd = 2.5		;.

[Movement]
airjump.num = 0       ;Number of air jumps allowed (opt)
airjump.height = 35   ;Minimum distance from ground before you can air jump (opt)
yaccel = .44          ;Vertical acceleration
stand.friction = .85  ;Friction coefficient when standing
crouch.friction = .82 ;Friction coefficient when crouching



;---------------------------------------------------------------------------
; Variables usadas:

; var(0)  - Intro
; var(1)  - Transformacion
; var(2)  - Transformacion (adicionales)
; var(3)  - Combos
; var(4)  - Combos
; var(5)  - Fuerza
; var(6)  - Modo vuelo (identificacion)
; var(7)  - Modo vuelo (levitacion)
; var(8)  - Round clasificacion
; var(9)  - Velocidad de carga
; var(10) - Acumulacion de fuerza
; var(11) - Transparencias
; var(12) - Transparencias
; var(13) - Animacion Zanzoken (var helper)
; var(14) - Detector Zanzoken
; var(15) - Tiempo del round
; var(20) - Limitador de Fireball
; var(21) - Limitador de Zanzoken
; var(22) - Rolling Throw (vueltas default)
; var(23) - Rolling Throw (kamehameha)
; var(30) - BG color (tambien helper kame)
; var(31) - BG color
; var(32) - BG color 
; var(58) - A.I (numero al azar)
; var(59) - A.I (nivel)

;---------------------------------------------------------------------------
; Float Variables usadas:

; fvar(0) -  
; fvar(1) -  
; fvar(2) -
; fvar(3) -  
; fvar(4) -
; fvar(5) -
; fvar(6) -
; fvar(7) -
; fvar(8) -
; fvar(9) -

;---------------------------------------------------------------------------
; Canales de sonidos usados:

; 0 - voces
; 1 - efectos 1
; 2 - efectos 2
; 3 - efectos 3
; 4 - efectos 4
; 5 - efectos 5
; 6 - Musica 1
; 7 - Musica 2
; 8 - Musica 3 
; 9 - Voces Helper 

;---------------------------------------------------------------------------
[Quotes]
victory1 = "Si entrenaras mas te harias mas fuerte."
victory2 = "No estubo nada mal!"
victory3 = "Muy buena pelea, la proxima entrena mas duro."
victory4 = "Tus tecnicas no son lo suficientemente efectivas contra mi."
victory5 = "Seguire entrenando para tener otra pelea contigo."
victory6 = "Despues de esta pelea tan dura me dio mucha hambre."

;---------------------------------------------------------------------------
; Lose by Time Over
[Statedef 170]
type = S
ctrl = 0
velset = 0,0

[State 170, normal]
type = ChangeAnim
triggerall = life >= (lifemax*10/100)
trigger1 = anim != 170
value = 170

[State 170, tired]
type = ChangeAnim
triggerall = life < (lifemax*10/100)
trigger1 = anim != 2
value = 2

[State 170, que?]
type = PlaySnd
trigger1 = anim = 170
trigger1 = animelem = 3
value = S170,0
channel = 0

[State 180, pose cansado]
type = VarSet
trigger1 = life < (lifemax*10/100)
v = 0
value = 9

[State 180, pose cansado]
type = VarSet
trigger1 = life >= (lifemax*10/100)
v = 0
value = 0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180, decicion de pose]
type = VarRandom
trigger1 = life >= (lifemax*10/100)
v = 0
range = 1,8

[State 180, pose cansado]
type = VarSet
trigger1 = life < (lifemax*10/100)
v = 0
value = 9

[State 180, perfect]
type = VarSet
trigger1 = winperfect ;life = lifemax
trigger1 = winko
v = 0
value = 10

[State 180, victory]
type = ChangeState
triggerall = var(0) = 1
trigger1 = Time = 0
value = 181

[State 180, ja ja ja...]
type = ChangeState
triggerall = var(0) = 2
trigger1 = Time = 0
value = 182

[State 180, ja ja ja... (2)]
type = ChangeState
triggerall = var(0) = 3
trigger1 = Time = 0
value = 183

[State 180, que bueno jajajaaggg]
type = ChangeState
triggerall = var(0) = 4
trigger1 = Time = 0
value = 184

[State 180, up punch]
type = ChangeState
triggerall = var(0) = 5
trigger1 = Time = 0
value = 185

[State 180, anime]
type = ChangeState
triggerall = var(0) = [6,7]
trigger1 = Time = 0
value = 186

[State 180, teleport]
type = ChangeState
triggerall = var(0) = 8
trigger1 = Time = 0
value = 188

[State 180, tired]
type = ChangeState
triggerall = var(0) = 9
trigger1 = Time = 0
value = 189

[State 180, perfect]
type = ChangeState
triggerall = var(0) = 10
trigger1 = Time = 0
value = 6020

;---------------------------------------------------------------------------
; Win pose 1 - Victory
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 35
palbright = 30,30,30
palcontrast = 120,120,120
paladd = 32,32,32
palmul = .64,.64,.64
length = 5
timegap = 1
framegap = 1
trans = add1

[State 0, win time]
type = AssertSpecial
trigger1 = time < 200
flag = roundnotover

[State 0, gesto al azar]
type = VarRandom
trigger1 = time = 0
v = 0
range = 4,8

[State 0, anim]
type = ChangeAnim
trigger1 = animelemno(0) = var(0)
value = 181
elem = var(0)

[State 0, jmm]
type = PlaySnd
trigger1 = var(0) = [5,6]
trigger1 = animelem = 5
value = S182,0
channel = 0
persistent = 0

[State 0, ja]
type = PlaySnd
trigger1 = animelem = 7
value = S182,1
channel = 0
persistent = 0

[State 0, jaa]
type = PlaySnd
trigger1 = animelem = 8
value = S182,2
channel = 0
persistent = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose 2 - Ja ja ja...
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 215
palbright = 30,30,30
palcontrast = 120,120,120
paladd = 32,32,32
palmul = .64,.64,.64
length = 5
timegap = 1
framegap = 1
trans = add1

[State 0, win time]
type = AssertSpecial
trigger1 = time < 200
flag = roundnotover

[State 0, jaja]
type = PlaySnd
trigger1 = animelem = 14
value = 181,0+random%2
channel = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 182
elem = 13

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose 3 - Ja ja ja... (2)
[Statedef 183]
type = S
ctrl = 0
anim = 183
velset = 0,0

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 30
palbright = 30,30,30
palcontrast = 120,120,120
paladd = 32,32,32
palmul = .64,.64,.64
length = 5
timegap = 1
framegap = 1
trans = add1

[State 0, win time]
type = AssertSpecial
trigger1 = time < 300
flag = roundnotover

[State 0, jajaj]
type = PlaySnd
trigger1 = animelem = 3
value = 183,0
channel = 0

[State 0, fue increible]
type = PlaySnd
trigger1 = animelem = 5
value = 183,1
channel = 0

[State 0, fue increible]
type = PlaySnd
trigger1 = animelem = 12
value = 183,2
channel = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose 4 - Que bueno jajajaaggg
[Statedef 184]
type = S
ctrl = 0
;anim = 184
velset = 0,0

[State 0, win time]
type = AssertSpecial
trigger1 = time < 200
flag = roundnotover

[State 0, anim]
type = ChangeAnim
trigger1 = time = 0
value = 184
elem = ifelse(anim = 1,1,2)

[State 0, que bueno jaja jaaaad]
type = PlaySnd
trigger1 = animelem = 3
value = 186,0
channel = 0

[State 0, paso]
type = PosAdd
trigger1 = animelem = 8
x = 6

[State 0, paso]
type = PosAdd
trigger1 = animelem = 10
x = 4

[State 0, paso]
type = PosAdd
trigger1 = animelem = 11
x = 1

[State 0, paso]
type = PosAdd
trigger1 = animelem = 12
x = 4

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose 5 - Up Punch 
[Statedef 185]
type = S
ctrl = 0
anim = 185
velset = 0,0

[State 0, win time]
type = AssertSpecial
trigger1 = time < 150
flag = roundnotover

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 0
y = -2

[State 990, subir]
type = VarSet
triggerall = animelem >= 2, > 0
trigger1 = var(7) != 2
trigger2 = (var(7) = 2) && vel y >= 1
v = 7
value = 1

[State 990, bajar]
type = VarSet
triggerall = animelem >= 2, > 0
triggerall = var(7) = 1
trigger1 = vel y <= -1
;trigger2 =(Vel Y < 0)
v = 7
value = 2

[State 990, subir]
type = VelAdd
triggerall = animelem >= 2, > 0
trigger1 = var(7) = 1
trigger1 = screenpos y > 60
y = -0.05

[State 990, bajar]
type = VelAdd
triggerall = animelem >= 2, > 0
trigger1 = var(7) = 2
y = 0.05

[State 990, onda]
type = Explod
triggerall = animelem = 2
trigger1 = time = 1
anim = 912
ID = 912
pos = 0,floor(-pos y)
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = -5
ownpal = 1

[State 990, efecto]
type = PlaySnd
trigger1 = animelem = 2
value = S990,0
channel = 3

[State 0, jmm]
type = PlaySnd
trigger1 = animelem = 4
value = S182,0
channel = 0
persistent = 0

;---------------------------------------------------------------------------
; Win pose 6 - Anime
[Statedef 186]
type = S
ctrl = 0
anim = 186
velset = 0,0

[State 0, win time]
type = AssertSpecial
trigger1 = time < 150
flag = roundnotover

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 15
palbright = 30,30,30
palcontrast = 120,120,120
paladd = 32,32,32
palmul = .64,.64,.64
length = 5
timegap = 1
framegap = 1
trans = add1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose 8 - Teleport
[Statedef 188]
type = S
ctrl = 0
anim = 188
velset = 0,0

[State 0, win time]
type = AssertSpecial
trigger1 = time < 150
flag = roundnotover

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 70
palbright = 30,30,30
palcontrast = 120,120,120
paladd = 32,32,32
palmul = .64,.64,.64
length = 5
timegap = 1
framegap = 1
trans = add1

[State 0, effect teleport]
type = PlaySnd
trigger1 = animelem = 9
value = S7,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose 9 - Tired
[Statedef 189]
type = S
ctrl = 0
;anim = 185
velset = 0,0

[State 0, win time]
type = AssertSpecial
trigger1 = time < 250
flag = roundnotover

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 189
trigger1 = anim = 2
trigger1 = animelem = 5, = 14
trigger2 = time > 50
value = 189

[State 0, ayjajaja]
type = PlaySnd
triggerall = anim = 189
trigger1 = animelem = 2
value = S189,0
channel = 0
persistent = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose 10 - Me pase un poquito
[Statedef 6020]
type = S
ctrl = 0
anim = 6020
velset = 0,0

[State 0, win time]
type = AssertSpecial
trigger1 = time < 500
flag = roundnotover

[State 0, ups]
type = PlaySnd
trigger1 = animelem = 3
value = 6020,0
channel = 0

[State 0, creo que me pase un poquito]
type = PlaySnd
trigger1 = animelem = 4
value = 6020,1
channel = 0

[State 0, jijijije]
type = PlaySnd
trigger1 = animelem = 15
value = 6020,2
channel = 0

[State 0, pero no importa]
type = PlaySnd
trigger1 = animelem = 17
value = 6020,3
channel = 0

[State 0, jiji]
type = PlaySnd
trigger1 = animelem = 25
value = 6020,4
channel = 0

[State 0, jaja no importa]
type = PlaySnd
trigger1 = animelem = 26
value = 6020,5
channel = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(190)
value = 190

[State 190, decision de pose]
type = VarRandom
trigger1 = time = 0
v = 0
range = 1,2

[State 190, enlongacion]
type = ChangeState
triggerall = var(0) = 1
trigger1 = Time = 0
value = 191

[State 190, teletransporte]
type = ChangeState
triggerall = var(0) = 2
trigger1 = Time = 0
value = 192

;---------------------------------------------------------------------------
; Introduction - Enlongación
[Statedef 191]
type = S
ctrl = 0
anim = 191
velset = 0,0

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 2
palbright = 30,30,30
palcontrast = 120,120,120
paladd = 32,32,32
palmul = .64,.64,.64
length = 5
timegap = 1
framegap = 1
trans = add1

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2
value = 0
ignorehitpause = 1

[State 0, rafaga]
type = PlaySnd
trigger1  = animelem = 8
trigger2  = animelem = 10
trigger3  = animelem = 12
trigger4  = animelem = 18
trigger5  = animelem = 20
trigger6  = animelem = 22
trigger7  = animelem = 29
trigger8  = animelem = 31
trigger9  = animelem = 33
trigger10 = animelem = 38
trigger11 = animelem = 40
trigger12 = animelem = 43
value = S0,1
channel = 5

[State 191, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = anim

[State 0, adelantar]
type = ChangeAnim
trigger1 = prevstateno = 192
trigger1 = time = 0
value = anim
elem = 2

[State 0, cambiar a brazos]
type = ChangeAnim
trigger1 = animelem = 5
trigger1 = random < 500
trigger1 = time < 180
value = anim
elem = 25

[State 0, cambiar a piernas]
type = ChangeAnim
trigger1 = animelem = 46
trigger1 = random < 500
trigger1 = time < 240
value = anim
elem = 5

[State 0, fin]
type = ChangeAnim
trigger1 = animelem = 25
trigger1 = random < 500
trigger1 = time >= 180
value = anim
elem = 45

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
; Introduction - Teletransportación
[Statedef 192]
type = S
ctrl = 0
anim = ifelse(random < 500,192,6000)
velset = 0,0

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 2
palbright = 30,30,30
palcontrast = 120,120,120
paladd = 32,32,32
palmul = .64,.64,.64
length = 5
timegap = 1
framegap = 1
trans = add1

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2
value = 0
ignorehitpause = 1

[State 0, effect teleport]
type = PlaySnd
triggerall = animelem = 2, = 1
trigger1 = anim = 192
trigger2 = anim = 6000
value = S7,1
channel = 3

[State 191, 2] 
type = AssertSpecial
trigger1 = 1
flag = Intro

;Mala teletransportacion
[State 0, posicion en el aire]
type = PosAdd
trigger1 = roundstate < 2
trigger1 = anim = 6000 && animelem = 2 < 0
trigger1 = screenpos y > 60
;trigger1 = timemod = 15,0
y = -10;-8;-90

[State 0, posicion en el aire fija]
type = PosAdd
trigger1 = roundstate < 2
trigger1 = anim = 6000 && animelem = 2 < 0
trigger1 = screenpos y <= 60
;trigger1 = timemod = 15,0
y = 10

[State 0, adelantar anim]
type = ChangeAnim
trigger1 = time = 1
trigger1 = roundstate >= 2
value = anim
elem = 2

[State 0, tele]
type = PosAdd
trigger1 = roundstate >= 2
trigger1 = time = 1
;trigger1 = timemod = 15,0
x = (p2bodydist x) - 30
y = (p2bodydist y) - ((anim = 6000)-89)

[State 0, anim callendo]
type = ChangeAnim
trigger1 = anim = 6000 
trigger1 = AnimTime = 0
trigger1 = anim != 6001
value = 6001

[State 0, gravedad]
type = Gravity
trigger1 = anim = 6001
trigger1 = pos y < 0

[State 0, ahhhh!]
type = PlaySnd
trigger1 = anim = 6001 && animelem = 2
value = S11,0
channel = 0

[State 0, anim caido]
type = ChangeAnim
trigger1 = pos y >= 0
trigger1 = anim = 6001
trigger1 = anim != 6002
value = 6002

[State 0, pos suelo]
type = PosSet
trigger1 = anim = 6002
y = 0;floor(-pos y);-10

[State 0, lagrimas]
type = Explod
trigger1 = anim = 6002
trigger1 = random < 100
trigger1 = numexplod(6003) < 4
trigger1 = animelem = 10, > 0
trigger1 = animelem = 11, < 0
anim = 6003
ID = 6003
pos = 10,-26
vel = -0.25,0.25
;accel = 0.25,0.25*random%2
random = 1,0
scale = 1,1
sprpriority = 1
;shadow = 0,0,0
ownpal = 1

[State 0, lagrimas]
type = Explod
trigger1 = anim = 6002
trigger1 = random < 100
trigger1 = numexplod(6004) < 4
trigger1 = animelem = 10, > 0
trigger1 = animelem = 11, < 0
anim = 6003
ID = 6004
pos = 18,-26
vel = 0.25,0.25
;accel = 0.25,0.25*random%2
random = 1,0
scale = 1,1
sprpriority = 5
;shadow = 0,0,0
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = pos y >= 0
x = 0
y = 0

[State 0, temblor]
type = EnvShake
trigger1 = anim = 6002 && animelem = 1
time = 40
freq = 30
ampl = -3
phase = 90

[State 0, polvo izq]
type = Explod
trigger1 = anim = 6002 && animelem = 1
anim = 7523 
ID = 7523 
pos = -15,floor(-pos y)
facing = 1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1

[State 0, polvo der]
type = Explod
trigger1 = anim = 6002 && animelem = 1
anim = 7523 
ID = 7523 
pos = 15,floor(-pos y)
facing = -1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1

[State 0, polvo central]
type = Explod
trigger1 = anim = 6002 && animelem = 1
anim = 7521 
ID = 7521 
pos = 0,floor(-pos y)
facing = -1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1

[State 0, onda]
type = Explod
trigger1 = anim = 6002 && animelem = 1
anim = 912 
ID = 912 
pos = 0,floor(-pos y)
facing = -1
scale = 0.5,0.5
sprpriority = -5
ownpal = 1

[State 0, polvo central]
type = Explod
trigger1 = anim = 6002 && animelem = 6
anim = 7521 
ID = 7521 
pos = 0,floor(-pos y)
facing = -1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1

[State 0, polvo central]
type = Explod
trigger1 = anim = 6002 && animelem = 6
anim = 7521 
ID = 7521 
pos = 20,floor(-pos y)
facing = -1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1

[State 0, polvo central]
type = Explod
trigger1 = anim = 6002 && animelem = 6
anim = 7521 
ID = 7521 
pos = 40,floor(-pos y)
facing = -1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1

[State 0, bang]
type = PlaySnd
trigger1 = anim = 6002 && animelem = 1
value = S192,0
channel = 0

[State 0, silbido]
type = PlaySnd
trigger1 = anim = 6002 && animelem = 4
value = S192,1
channel = 3

[State 0, poing]
type = PlaySnd
trigger1 = anim = 6002 && animelem = 7
value = S192,2
channel = 3

[State 0, ayayay]
type = PlaySnd
trigger1 = anim = 6002 && animelem = 10
value = S192,3+random%2
channel = 0

[State 0, fisica para ser golpeado]
type = StateTypeSet
trigger1 = anim = [6000,6001]
trigger2 = anim = 6002
trigger2 = animelem = 6 < 0
statetype = A 

[State 0, fisica para ser golpeado]
type = StateTypeSet
trigger1 = anim = 6002
trigger1 = animelem = 6 >= 0
trigger1 = animelem = 8 < 0
statetype = L    

[State 0, fisica para ser golpeado]
type = StateTypeSet
trigger1 = anim = 6002
trigger1 = animelem = 8 >= 0
statetype = C   

[State 191, taunt]
type = ChangeState
trigger1 = anim = 192
trigger1 = animelem = 11, = 0
trigger1 = random < 333
trigger1 = roundno > 1
value = 6010

[State 191, enlongacion]
type = ChangeState
triggerall = anim = 192
triggerall = animelem = 11, = 0
triggerall = random < 333
trigger1 = roundno = 1
trigger2 = RoundsExisted = 0
trigger2 = TeamMode = Turns
trigger2 = RoundNo > 0
value = 191

[State 191, 3] ;Change to stand state when done
type = ChangeState
triggerall = AnimTime = 0
trigger1 = anim = 192
trigger2 = anim = 6002
value = 0
ctrl = ifelse(roundstate >= 2,1,0)

;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
ctrl = 0
anim = 195+(life < (lifemax*10/100))
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, 1]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 195, voz]
type = PlaySnd
trigger1 = animelem = 3
value = S195,0+(life < (lifemax*10/100))
channel = 0

[State 195, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nowalk

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------
; Introduction - Charge
[Statedef 6005]
type = S
ctrl = 0
anim = 6005
velset = 0,0

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 0, PowerAdd]
type = PowerAdd
trigger1 = animelem = 6
value = 500

[State 0, Aura]
type = Explod
trigger1 = animelem = 6
anim = 7500
ID = 7500
pos = 0,0
bindtime = -1
removetime = 30
scale = 0.4,0.4
sprpriority = 3
ownpal = 0
removeongethit = 1

[State 0, Aura - trasera]
type = Explod
trigger1 = animelem = 6
anim = 7501
ID =  7501
pos = 0,0
bindtime = -1
scale = .4,.5
sprpriority = 0
ownpal = 1
removeongethit = 1
trans = addalpha
alpha = 128,256

[State 0, Aura - Ground]
type = Explod
trigger1 = animelem = 6
anim = 911
ID = 7500
pos = 0,floor(-pos y)
scale = 0.5,0.5
sprpriority = -5
ownpal = 0
removeongethit = 1

[State 0, remolino]
type = Explod
trigger1 = animelem = 6
trigger1 = random < 300
anim = 7524
ID = 7524  
pos = 0,-20
facing = ifelse(random < 500,-1,1)
vel = 0,-0.1
accel = 0,-0.05*(random%4)
random = 0,20
scale = 0.5,0.5
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 0, Dust - Left]
type = Explod
triggerall = pos y > -25
trigger1 = animelem = 6
anim = 913
ID = 913
pos = -20,floor(-pos y)
facing = 1
scale = 0.5,0.5
sprpriority = 2
ownpal = 0
;removeongethit = 1

[State 0, Dust - Right]
type = Explod
triggerall = pos y > -25
trigger1 = animelem = 6
anim = 913
ID = 913
pos = 15,floor(-pos y)
facing = -1
scale = 0.5,0.5
sprpriority = 2
ownpal = 0
;removeongethit = 1

[State 900, flash]
type = EnvColor
trigger1 = animelem = 6
time = 3
under = 1

[State 0, shake]
type = EnvShake
triggerall = pos y > -120
trigger1 = animelem = 6
time = 10
freq = 30
ampl = -1
phase = 60

[State 0, Ki aura - start]
type = PlaySnd
trigger1 = animelem = 6
value = S900,0
channel = 5

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Introduction - Taunt
[Statedef 6010]
type = S
ctrl = 0
anim = 6010
velset = 0,0

[State 191, intro]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 0, anim 2° round]
type = ChangeAnim
trigger1 = time = 0
trigger1 = roundno = 2
trigger1 = random < 500
value = 6011
elem = ifelse(prevstateno=192,1,2)
ignorehitpause = 1

[State 191, derrotarlo no es cosa facil]
type = PlaySnd
triggerall = anim = 6010
triggerall = numenemy = 1
trigger1 = animelem = 2
value = S6010,0
channel = 0

[State 191, estos sujetos son demasiado fuertes]
type = PlaySnd
triggerall = anim = 6010
triggerall = numenemy > 1
trigger1 = animelem = 2
value = S6010,1
channel = 0

[State 191, comenzemos a pelear este sera el 2° round]
type = PlaySnd
triggerall = anim = 6011
trigger1 = animelem = 2
value = S6011,0
channel = 0

[State 191, fin]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
; Stand Light Punch
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 200
poweradd = 20
sprpriority = 2

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 0,0

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%3
channel = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 23, 0                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = -1               ;Time attacker pauses, time opponent shakes
guard.sparkno = -1                         ;Spark anim no (Def: set above)
sparkxy = -10, -34               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S1, 0                  ;Sound to play on hit
guardsound = S2, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 10             ;Time opponent is in hit state
ground.velocity = -1             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 12                 ;Time before opponent regains control in air

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
pos = 30,-35
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Light Punch 2°
[Statedef 201]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 201
poweradd = 20
sprpriority = 2

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 0,0

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%3
channel = 0

[State 0, impulcion]
type = VelSet
trigger1 = AnimElem = 2
x = 2

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 23, 0                   ;Damage that move inflicts, guard damage
animtype = heavy                ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = -1               ;Time attacker pauses, time opponent shakes
guard.sparkno = -1                 ;Spark anim no (Def: set above)
sparkxy = -10, -34               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S1,0                  ;Sound to play on hit
guardsound = s2, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 20             ;Time opponent is in hit state
ground.velocity = -1             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 12                 ;Time before opponent regains control in air

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
pos = 32,-34
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Strong Punch
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 210
sprpriority = -1

[State 210, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 0,1

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%3
channel = 0

[State 0, impulcion]
type = VelSet
trigger1 = AnimElem = 2
x = 3

[State 210, golpe]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage    = 57
guardflag = MA
pausetime = 12,12
sparkno = -1            ;Time attacker pauses, time opponent shakes
guard.sparkno = -1
sparkxy = -10,-36
hitsound   = S1,1
guardsound = s2,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = 2
air.velocity = 2,-4

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
pos = 27,-47
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Stand Strong Punch
[Statedef 211]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 211
poweradd = 20
sprpriority = 2

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 0,0

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%3
channel = 0

[State 0, impulcion]
type = VelSet
trigger1 = AnimElem = 2
x = 2

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 23, 0                   ;Damage that move inflicts, guard damage
animtype = heavy                ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = -1              ;Time attacker pauses, time opponent shakes
guard.sparkno = -1                  ;Spark anim no (Def: set above)
sparkxy = -10, -34               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S1,2                 ;Sound to play on hit
guardsound = s2,0
ground.type = low               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 20             ;Time opponent is in hit state
ground.velocity = -1             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 12                 ;Time before opponent regains control in air

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
pos = 26,-34
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing light kick
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 22
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 230, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 0,2

[State 230, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%3
channel = 0

[State 230, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 20
guardflag = MA
pausetime = 6,6
sparkno = -1               ;Time attacker pauses, time opponent shakes
guard.sparkno = -1
sparkxy = -10,-32
hitsound   = S1,1
guardsound = s2,0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 15
ground.velocity = -1
air.velocity = -1,-2

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
pos = 34,-20
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing light kick
[Statedef 231]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 22
ctrl = 0
velset = 0,0
anim = 231
sprpriority = 2

[State 230, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 0,2

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,3
channel = 0

[State 230, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 26
guardflag = MA
pausetime = 8,8
sparkno = -1               ;Time attacker pauses, time opponent shakes
guard.sparkno = -1
sparkxy = -10,-32
hitsound   = S1,2
guardsound = s2,0
ground.type = Low
ground.slidetime = 19
ground.hittime  = 16
ground.velocity = -1
air.velocity = -2.5,-3.5

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
pos = 50,-32
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing light kick 2°
[Statedef 232]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 22
ctrl = 0
velset = 5,0
anim = 232
sprpriority = 2

[State 230, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 0,2

[State 230, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%3
channel = 0

[State 230, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = heavy
damage    = 20
guardflag = MA
pausetime = 6,6
sparkno = -1               ;Time attacker pauses, time opponent shakes
guard.sparkno = -1
sparkxy = -10,-32
hitsound   = S1,0
guardsound = s2,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -1
air.velocity = -1,-2

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
pos = 32,-26
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing light kick 3°
[Statedef 233]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 22
ctrl = 0
velset = 0,0
anim = 233
sprpriority = 2

[State 230, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 0,3

[State 230, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,4+random%2
channel = 0

[State 230, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = heavy
damage    = 25
guardflag = MA
pausetime = 6,6
sparkno = -1               ;Time attacker pauses, time opponent shakes
guard.sparkno = -1
sparkxy = -10,-32
hitsound   = S1,2
guardsound = s2,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -16,-2
air.velocity = -16,-2
fall = 1
fall.recover = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = p2movetype = H
value = 0

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
pos = 34,-24
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing strong kick
; CNS difficulty: easy
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 65
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2

[State 240, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 0,3

[State 240, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,1+random%3
channel = 0

[State 240, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage    = 63
guardflag = MA
pausetime = 12,12
sparkno = -1             ;Time attacker pauses, time opponent shakes
guard.sparkno = -1
sparkxy = -10,-34
hitsound   = S1,3
guardsound = s2,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -1
air.velocity = -1,-3.2

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7002
stateno = 7002
ownpal = 1
pos = 24,-34
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing strong kick 2°
[Statedef 241]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= -150
ctrl = 0
velset = 0,0
anim = 241
sprpriority = 2

[State 240, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 0,4

[State 240, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,4+random%2
channel = 0

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
bindtime = -1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, efect]
type = Explod
trigger1 = time = 1
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, tele]
type = PlaySnd
trigger1 = time = 0
value = S920,1
;channel = 5

[State 0, trans]
type = VarSet
trigger1 = time = 0
v = 11
value = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 1
x = p2bodydist x + 50
y = p2bodydist y

[State 0, Turn]
type = Turn
trigger1 = time = 1
;trigger1 = p2bodydist x < 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = time < 3
value = 0

[State 240, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = hard
damage    = 63
guardflag = MA
pausetime = 12,12
sparkno = -1              ;Time attacker pauses, time opponent shakes
guard.sparkno = -1
sparkxy = -10,-44
hitsound   = S1,3
guardsound = s2,0
ground.type = high
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,0
air.velocity = -4,-3

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7002
stateno = 7002
ownpal = 1
pos = 24,-44
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing strong kick 3°
[Statedef 242]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 0
ctrl = 0
velset = 5,0
anim = 241
sprpriority = 2

[State 240, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 0,4

[State 240, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,4+random%2
channel = 0

[State 240, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = hard
damage    = 63
guardflag = MA
pausetime = 12,12
sparkno = -1              ;Time attacker pauses, time opponent shakes
guard.sparkno = -1
sparkxy = -10,-44
hitsound   = S1,3
guardsound = s2,0
ground.type = high
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,0
air.velocity = -4,-3

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7002
stateno = 7002
ownpal = 1
pos = 24,-44
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Running Punch
[Statedef 300]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= -250
ctrl = 0
;velset = 5,0
anim = 300
sprpriority = 2

[State 100, polvito]
type = Explod
triggerall = vel x != 0
trigger1 = time%4 = 0
anim = 7528
ID = 7528
pos = -20,floor(-pos y)
facing = ifelse(random<500,1,-1)
vfacing = ifelse(random<500,1,-1)
random = 3,1
vel = -0.050,0
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 0
ownpal = 1

[State 100, dash]
type = Explod
triggerall = vel x != 0
trigger1 = time%2 = 0
anim = 7525
ID = 7525
pos  = -20,-35
random = 0,50
sprpriority = 0+random%4
vel  = 1+random%2,0
scale = 0.5,0.5
ownpal = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = vel x = 0
trigger1 = time = 0
time = 2
palbright = 0,0,0;90,90,90
palcontrast = 192,192,192;220,220,220
;paladd = 32,96,128
;palmul = .64,.64,.64
length = 10
timegap = 1
framegap = 1
trans = add

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 0, VelSet]
type = Veladd
trigger1 = time = 0
x = const(velocity.run.fwd.x)

[State 0, VelAdd]
type = velmul
trigger1 = animelem = 4
x = 0.8

[State 0, VelSet]
type = VelSet
trigger1 = pos y > 0
y = 0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = pos y > 0
y = 0
ignorehitpause = 1

[State 240, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 0,2

[State 240, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = 5,2

[State 240, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = hard
damage    = 55
guardflag = MA
pausetime = 12,12
sparkno = -1              ;Time attacker pauses, time opponent shakes
guard.sparkno = -1
sparkxy = -10,-44
hitsound   = S1,4
guardsound = s2,0
ground.type = high
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -10,0
air.velocity = -10,-3
fall = 1

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7002
stateno = 7002
ownpal = 1
pos = 32,-32
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Running Kick
[Statedef 310]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= -250
ctrl = 0
;velset = 5,0
anim = 310
sprpriority = 2

[State 100, polvito]
type = Explod
triggerall = vel x != 0
trigger1 = time%4 = 0
anim = 7528
ID = 7528
pos = -20,floor(-pos y)
facing = ifelse(random<500,1,-1)
vfacing = ifelse(random<500,1,-1)
random = 3,1
vel = -0.050,0
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 0
ownpal = 1

[State 100, dash]
type = Explod
triggerall = vel x != 0
trigger1 = time%2 = 0
anim = 7525
ID = 7525
pos  = -20,-35
random = 0,50
sprpriority = 0+random%4
vel  = 1+random%2,0
scale = 0.5,0.5
ownpal = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = vel x = 0
trigger1 = time = 0
time = 2
palbright = 0,0,0;90,90,90
palcontrast = 192,192,192;220,220,220
;paladd = 32,96,128
;palmul = .64,.64,.64
length = 10
timegap = 1
framegap = 1
trans = add

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 0, VelSet]
type = Veladd
trigger1 = time = 0
x = const(velocity.run.fwd.x)

[State 0, VelAdd]
type = velmul
trigger1 = animelem = 4
x = 0.8

[State 0, VelSet]
type = VelSet
trigger1 = pos y > 0
y = 0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = pos y > 0
y = 0
ignorehitpause = 1

[State 240, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 0,2

[State 240, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = 5,2

[State 240, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = hard
damage    = 55
guardflag = MA
pausetime = 12,12
sparkno = -1              ;Time attacker pauses, time opponent shakes
guard.sparkno = -1
sparkxy = -10,-44
hitsound   = S1,4
guardsound = s2,0
ground.type = high
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -10,0
air.velocity = -10,-3
fall = 1

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7002
stateno = 7002
ownpal = 1
pos = 34,-20
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light punch
[Statedef 400]
type = C
movetype = A
physics = C
juggle = 5
poweradd = 15
ctrl = 0
anim = 400
sprpriority = 2

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 0,0

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%3
channel = 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 23
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 10,11
sparkno = -1
sparkxy = -10,-28
hitsound   = S1,0
guardsound = s2,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 10
ground.velocity = -1
air.velocity = -1.5,-3

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
ownpal = 1
pos = 28,-26
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light punch 2
[Statedef 401]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 15
ctrl = 0
anim = 401
sprpriority = 2

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = S0,0

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%3
channel = 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 23
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 10,11
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-26
hitsound   = S1,0
guardsound = s2,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 10
ground.velocity = -1
air.velocity = -1.5,-3

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
ownpal = 1
pos = 26,-26
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching strong punch
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 50
ctrl = 0
anim = 410
sprpriority = 2

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = S0,1

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,4+random%2
channel = 0

[State 410, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage    = 37
animtype  = Up
hitflag = MAF
guardflag = M
pausetime = 12,12
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-56
hitsound   = S1,3
guardsound = s2,0
ground.type = high
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -0.5,-10
air.velocity = -0.5,-10
fall = 1

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7002
stateno = 7002
ownpal = 1
pos = 10,-56
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching strong punch 2°
[Statedef 411]
type    = C
movetype= A
physics = N
juggle  = 6
poweradd= -150
ctrl = 0
anim = 411
sprpriority = 2

[State 0, Pause]
type = Pause
trigger1 = time = 0
time = 20
movetime = 20

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
bindtime = -1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = time > 0
x = p2bodydist x
y = p2bodydist y -30

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S920,1
channel = 3

[State 0, Zanzoken]
type = Helper
trigger1 = time = 0
helpertype = player
name = "Zanzoken"
ID = 925
stateno = 925
facing = 1
ownpal = 1
pausemovetime = 11
supermovetime = 11

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 2
value = 611


;---------------------------------------------------------------------------
;Crouching light kick
; CNS difficulty: easy
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 22
ctrl = 0
anim = 430
sprpriority = 2

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%3
channel = 0

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = S0,1

[State 430, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 28
animtype  = Medium
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = -1
guard.sparkno = -1
sparkxy = -10,0
hitsound   = S1,1
guardsound = S2,0
ground.type = high
ground.slidetime = 6
ground.hittime  = 10
ground.velocity = -1
air.velocity = -2,-3
down.velocity = -5,0
down.hittime = 20

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
ownpal = 1
pos = 24,0
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light Kick 2°
[Statedef 431]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 70
ctrl = 0
anim = 431
sprpriority = 2
velset = 0,0

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,3+random%2
channel = 0

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = S0,2

[State 440, 3]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 72
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = -1
guard.sparkno = -1
sparkxy = -5,-14
hitsound   = S1,4
guardsound = S2,0
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -12,0
air.velocity = -12,-2
guard.velocity = -5

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
ownpal = 1
pos = 32,-16
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch Strong Kick
[Statedef 432]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 70
ctrl = 0
anim = 432
sprpriority = 2
velset = 0,0

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
scale = 0.5,0.5
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 0
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, efect]
type = Explod
trigger1 = time = 1
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
scale = 0.5,0.5
bindtime = -1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 0
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, tele]
type = PlaySnd
trigger1 = time = 0
value = S920,1
;channel = 5

[State 0, trans]
type = VarSet
trigger1 = time = 0
v = 11
value = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 1 
x = p2bodydist x + 120
y = 0

[State 0, Turn]
type = Turn
trigger1 = time = 1 
trigger1 = p2bodydist x < 0

[State 440, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2

[State 440, 3]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 72
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = -1
guard.sparkno = -1
sparkxy = -5,-14
hitsound   = 1,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -12,-2
air.velocity = -12,-2
guard.velocity = -5
fall = 1

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7002
stateno = 7002
ownpal = 1
pos = 34,-20
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch Strong Kick
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 70
ctrl = 0
anim = 440
sprpriority = 2

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,2+random%3
channel = 0

[State 440, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2

[State 440, 3]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 72
hitflag = MAF
guardflag = L
pausetime = 12,12
sparkno = -1
guard.sparkno = -1
sparkxy = -5,-10
hitsound   = S1,2
guardsound = S2,0
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -4,-6
air.velocity = -4,-6
guard.velocity = -5
fall = 1

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
ownpal = 1
pos = 30,-36
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch Strong Kick 2
[Statedef 441]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd = -150
velset = 1,-1
ctrl = 0
anim = 441
sprpriority = 2

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
bindtime = -1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, Pause]
type = Pause
trigger1 = time = 0
time = 20
movetime = 20

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 1
x = p2bodydist x + 50
y = p2bodydist y - 5

[State 0, tele]
type = PlaySnd
trigger1 = time = 0
value = S920,1

[State 0, trans]
type = VarSet
trigger1 = time = 0
v = 11
value = 2

[State 0, Turn]
type = Turn
trigger1 = time = 1
trigger1 = p2bodydist x < 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = time < 3
value = 0

[State 440, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2

[State 440, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 72
hitflag = MAFD
guardflag = L
pausetime = 8,8
sparkno = -1
guard.sparkno = -1
sparkxy = -5,-10
hitsound   = S1,3
guardsound = S2,0
ground.type = high
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -4,12
air.velocity = -4,12
guard.velocity = -5
p2facing = 1
fall = 1
fall.recover = 0
down.bounce = 1
fall.xvelocity = -2
fall.yvelocity  =  -7


[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7002
stateno = 7002
ownpal = 1
pos = 44,-20
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 7
physics = A

;---------------------------------------------------------------------------
;Jump Light Punch
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 11
ctrl = 0
anim = 600
sprpriority = 2

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = S0,0

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%3
channel = 0

[State 600, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 20
guardflag = HA
priority = 3
pausetime = 10,8
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-42
hitsound   = S1,1
guardsound = S2,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -2
air.velocity = -1,-2
snap = 20,0

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
ownpal = 1
pos = 26,-40
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 600, 3]
type = CtrlSet
trigger1 = animelem = 3, > 2
value = 1

;fly mode
[State 990, no gravity]
type = StateTypeSet
trigger1 = prevstateno = [990,995]
physics = N
ignorehitpause = 1

[State 0, frenar]
type = VelSet
trigger1 = prevstateno = [990,995]
x = 0
y = 0

[State 990, fly]
type = ChangeState
trigger1 = prevstateno = [990,995]
trigger1 = animtime = 0
value = 990

;---------------------------------------------------------------------------
;Jump Light Punch 2°
[Statedef 601]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 11
ctrl = 0
anim = 601
sprpriority = 2

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = S0,0

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%3
channel = 0

[State 600, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 20
guardflag = HA
priority = 3
pausetime = 14,12
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-42
hitsound   = S1,1
guardsound = S2,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -3
air.velocity = -1,-3
snap = 20,0

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
ownpal = 1
pos = 16,-34
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 600, 3]
type = CtrlSet
trigger1 = animelem = 3, > 2
value = 1

;fly mode
[State 990, no gravity]
type = StateTypeSet
trigger1 = prevstateno = [990,995]
physics = N
ignorehitpause = 1

[State 0, frenar]
type = VelSet
trigger1 = prevstateno = [990,995]
x = 0
y = 0

[State 990, fly]
type = ChangeState
trigger1 = prevstateno = [990,995]
trigger1 = animtime = 0
value = 990

;---------------------------------------------------------------------------
;Jump Light Punch 3°
[Statedef 602]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 11
ctrl = 0
anim = 602
sprpriority = 2

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = S0,2

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,4+random%2
channel = 0

[State 0, VelSet]
type = VelAdd
trigger1 = animelem = 3
x = 1
ignorehitpause = 1

[State 0, VelMul]
type = Veladd
trigger1 = time = 0 
trigger2 = p2bodydist x > -30
trigger2 = vel y > 0
y = -1

[State 600, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 20
guardflag = HA
priority = 3
pausetime = 10,8
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-42
hitsound   = S1,2
guardsound = S2,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -8
air.velocity = -8,-4

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
ownpal = 1
pos = 28,-36
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 600, 3]
type = CtrlSet
trigger1 = animelem = 3, > 2
value = 1

;fly mode
[State 990, no gravity]
type = StateTypeSet
trigger1 = prevstateno = [990,995]
physics = N
ignorehitpause = 1

[State 0, frenar]
type = VelSet
trigger1 = prevstateno = [990,995]
x = 0
y = 0

[State 990, fly]
type = ChangeState
trigger1 = prevstateno = [990,995]
trigger1 = animtime = 0
value = 990

;---------------------------------------------------------------------------
;Jump Strong Punch
; CNS difficulty: easy
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 65
ctrl = 0
anim = 610
sprpriority = 2

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = S0,1

[State 200, ja]
type = PlaySnd
trigger1 = animelem = 2
value = S5,1+random%3
channel = 0

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 72
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-55
hitsound   = S1,2
guardsound = S2,0
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2,4
air.velocity = -2,-4
snap = 20,5

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
ownpal = 1
pos = 22,-20
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

;fly mode
[State 990, no gravity]
type = StateTypeSet
trigger1 = prevstateno = [990,995]
physics = N
ignorehitpause = 1

[State 0, frenar]
type = VelSet
trigger1 = prevstateno = [990,995]
x = 0
y = 0

[State 990, fly]
type = ChangeState
trigger1 = prevstateno = [990,995]
trigger1 = animtime = 0
value = 990


;---------------------------------------------------------------------------
;Jump Strong Punch 2°
[Statedef 611]
type    = A
movetype= A
physics = A
juggle  = 0;2
poweradd= 0
ctrl = 0
anim = 611
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = prevstateno = 411
x = 0
y = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = prevstateno != 411
trigger1 = animelem = 4, > 8 && animelem = 5, < 0
value = anim
elem = 5
;ignorehitpause = 1

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = S0,3

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,4+random%2
channel = 0

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 72
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-20
hitsound   = S1,4
guardsound = S2,0
animtype = Medium
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4,10
air.velocity = -4,10
p2facing = 1
fall = 1
fall.envshake.time = 30
fall.envshake.freq = 60
fall.envshake.ampl = -3
fall.envshake.phase = 90
down.bounce = 1
fall.xvelocity =   -2
fall.yvelocity  =  -7

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7002
stateno = 7002
ownpal = 1
pos = 14,-18
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 610, 2]
type = ChangeState
trigger1 = !var(6)
trigger1 = animtime = 0
value = 50
ctrl = 0

;fly mode
[State 990, no gravity]
type = StateTypeSet
trigger1 = var(6)
physics = N
ignorehitpause = 1

[State 0, frenar]
type = VelSet
trigger1 = var(6)
x = 0
y = 0

[State 990, fly]
type = ChangeState
trigger1 = var(6)
trigger1 = animtime = 0
value = 0

;---------------------------------------------------------------------------
;Teleport Double Fireball
[Statedef 620]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= -500
velset = 0,0
ctrl = 0
;anim = 620
sprpriority = 2

[State 0, Zanzoken]
type = Helper
trigger1 = time = 0
helpertype = Normal
name = "Teleport"
ID = 926
stateno = 926
facing = 1
ownpal = 1
supermovetime = 30
pausemovetime = 30

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925
facing = ifelse(random<499,1,-1)
bindtime = 0
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 0
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, efect]
type = Explod
trigger1 = time = 3
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 0
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 1
value = 620

[State 0, Pause]
type = Pause
trigger1 = time = 1
trigger1 = p2movetype != H
time = 64
movetime = 64
pausebg = 0

[State 0, Pause]
type = Pause
trigger1 = time = 1
trigger1 = p2movetype = H
time = 70
movetime = 70
pausebg = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 2
x = p2bodydist x + 40
y = p2bodydist y - 40

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4, < 0
x = 0.5
y = 0.5

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4, >= 0
x = 0
y = 0

[State 0, tele]
type = PlaySnd
trigger1 = time = 0
value = S920,1
;channel = 5

[State 0, Turn]
type = Turn
trigger1 = time = 2
trigger1 = p2bodydist x < 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 610, 2]
type = PlaySnd
trigger1 = animelem = 4
value = 4, 4

[State 0, esfera]
type = Explod
trigger1 = animelem = 4
anim = 625
ID = 625
pos = 25,-28
bindtime = -1
removetime = -1
supermovetime = 50
pausemovetime = 50
scale = 0.2,0.2
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 0, esfera]
type = Explod
trigger1 = animelem = 4
anim = 625
ID = 625
pos = -6,-30
bindtime = -1
removetime = -1
supermovetime = 50
pausemovetime = 50
scale = 0.2,0.2
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 5
ID = 625
ignorehitpause = 1

[State 0, esfera]
type = Explod
trigger1 = animelem = 4
anim = 7631
ID = 7631
pos = 25,-28
facing = ifelse(random<500,1,-1)
vfacing = ifelse(random<500,1,-1)
bindtime = -1
removetime = -2
supermovetime = 50
pausemovetime = 50
scale = 0.75,0.75
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 0, esfera]
type = Explod
trigger1 = animelem = 4
anim = 7631
ID = 7631
pos = -6,-30
facing = ifelse(random<500,1,-1)
vfacing = ifelse(random<500,1,-1)
bindtime = -1
removetime = -2
supermovetime = 50
pausemovetime = 50
scale = 0.75,0.75
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 610, 3]
type = HitDef
trigger1 = animelem = 5
attr = A, NP
damage = 100,50
getpower = 0,0
Hitflag = MAFD
guardflag = MAF
priority = 4
pausetime = 12,12
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-55
hitsound   = -1,-1
guardsound = -1,-1
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2,15
air.velocity = -2,15
p2facing = 1
fall = 1
fall.recover = 0
down.bounce = 1
fall.xvelocity =   -3
fall.yvelocity  =  -9

[State 610, 2]
type = PlaySnd
trigger1 = animelem = 5
value = 6, 1
ignorehitpause = 1

[State 0, explocion]
type = Explod
trigger1 = animelem = 5, >= 0
trigger1 = animelem = 6, < 0
anim = 7901
ID = 7901
pos = 25,-28
random = 12,12
facing = ifelse (random < 500,-1,1)
vfacing = ifelse (random < 500,-1,1)
supermovetime = 777
pausemovetime = 777
scale = 0.2,0.2
sprpriority = 5
ownpal = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 5
anim = 7000
ID = 7000
pos = 25,-28
supermovetime = 777
pausemovetime = 777
scale = 0.3,0.3
sprpriority = 5
ownpal = 1
ignorehitpause = 1

[State 0, explocion]
type = Explod
trigger1 = animelem = 5, >= 0
trigger1 = animelem = 6, < 0
anim = 7901
ID = 7901
pos = -6,-30
random = 12,12
facing = ifelse (random < 500,-1,1)
vfacing = ifelse (random < 500,-1,1)
supermovetime = 777
pausemovetime = 777
scale = 0.2,0.2
sprpriority = 5
ownpal = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 5
anim = 7000
ID = 7000
pos = -6,-30
supermovetime = 777
pausemovetime = 777
scale = 0.3,0.3
sprpriority = 5
ownpal = 1
ignorehitpause = 1

[State 990, fly]
type = ChangeState
triggerall = anim = 620
trigger1 = animtime = 0
value = 0

;---------------------------------------------------------------------------
;Jump Light Kick
; CNS difficulty: easy
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 20
ctrl = 0
anim = 630
sprpriority = 2

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = S0,0

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%3
channel = 0

[State 630, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 26
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = -1
guard.sparkno = -1
sparkxy = -5,-26
hitsound   = S1,1
guardsound = S2,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -3
air.velocity = -1,-2
snap = 20,0

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
ownpal = 1
pos = 32,-20
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 600, 3]
type = CtrlSet
trigger1 = animelem = 4, > 2
value = 1

;fly mode
[State 990, no gravity]
type = StateTypeSet
trigger1 = prevstateno = [990,995]
physics = N
ignorehitpause = 1

[State 0, frenar]
type = VelSet
trigger1 = prevstateno = [990,995]
x = 0
y = 0

[State 990, fly]
type = ChangeState
trigger1 = prevstateno = [990,995]
trigger1 = animtime = 0
value = 990

;---------------------------------------------------------------------------
;Jump Strong Kick
; CNS difficulty: easy
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 65
ctrl = 0
anim = 640
sprpriority = 2

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = S0,2

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,1+random%4
channel = 0

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 70
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-40
hitsound   = S1,2
guardsound = S2,0
animtype = Med
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -5
air.velocity = -3,-4
snap = 20,5

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
ownpal = 1
pos = 32,-12
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

;fly mode
[State 990, no gravity]
type = StateTypeSet
trigger1 = prevstateno = [990,995]
physics = N
ignorehitpause = 1

[State 0, frenar]
type = VelSet
trigger1 = prevstateno = [990,995]
x = 0
y = 0

[State 990, fly]
type = ChangeState
trigger1 = prevstateno = [990,995]
trigger1 = animtime = 0
value = 990

;---------------------------------------------------------------------------
;Jump Strong Kick 2°
[Statedef 641]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd = -150
velset = 0,0
ctrl = 0
anim = 641
sprpriority = 2

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
bindtime = -1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 920,1

[State 0, Pause]
type = Pause
trigger1 = time = 0
time = 10
movetime = 10

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = p2bodydist x + 60
y = p2bodydist y

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2bodydist x < 0

[State 640, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 3

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 40
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-52
hitsound   = S1,1
guardsound = S2,0
animtype = Med
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -6,-6
air.velocity = -6,-6
fall = 1

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
ownpal = 1
pos = 22,-42
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 990, finalizar]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Jump Combo Dash
[Statedef 660]
type    = A
movetype= I
physics = N
juggle  = 2
poweradd= 0
ctrl = 0
anim = 660

[State 660, Pause]
type = Pause
trigger1 = 1
time = 4
movetime = 3
;ignorehitpause = 1

[State 660, fwd]
type = VelSet
trigger1 = time = 0
x = 10

[State 660, up]
type = VelAdd
trigger1 = vel y > -10
trigger1 = p2bodydist y < 0
y = -2.5

[State 660, down]
type = VelAdd
trigger1 = vel y < 10
trigger1 = p2bodydist y > 0
y =  2.5

[State 660, PlaySnd]
type = PlaySnd
trigger1 = time = 2
value = S100,0


[State 100, dash]
type = Explod
trigger1 = time%2 = 0
anim = 7525
ID = 7525
pos  = -20,-35
random = 0,50
sprpriority = 0+random%4
vel  = 1+random%2,0
scale = 0.5,0.5
ownpal = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 2
palbright = 0,0,0;90,90,90
palcontrast = 192,192,192;220,220,220
;paladd = 32,96,128
;palmul = .64,.64,.64
length = 10
timegap = 1
framegap = 1
trans = add

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time = 1
value = 1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = p2dist x > 5
value = 50
ctrl = 1
ignorehitpause = 1

;-------------------------------------------------------------------------------
;Parry
[Statedef 700]
type = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
anim = 700
poweradd = 0
sprpriority = 3

[State 762, EnvShake]
type = EnvShake
trigger1 = !Time
time = 0
ampl = 0

[State 0, NotHitBy]
type = HitBy
trigger1 = 1
value = SCA,AT
time = 1

[State 0, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1

[State 850, bg effect]
type = EnvColor
trigger1 = Time = 0
time = 1
under = 1

[State 0, Pause]
type = Pause
trigger1 = !time
time = 16
moveTime = 16

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nostandguard
flag2 = nocrouchguard
flag3 = nowalk

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 7012
ID = 7012
pos = 28,-32
postype = p1 ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 999
pausemovetime = 999
scale = 0.45,0.45
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

;[State 0, CtrlSet]
;type = CtrlSet
;trigger1 = time > 3
;value = 1

[State 700, 0]
type = PlaySnd
trigger1 = Time = 0
value = S2, 10

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;Parry Air
[Statedef 701]
type = A
movetype= I
physics = N
velset = 0,0
ctrl = 0
anim = 701
poweradd = 0
sprpriority = 3

[State 762, EnvShake]
type = EnvShake
trigger1 = !Time
time = 0
ampl = 0

[State 0, NotHitBy]
type = HitBy
trigger1 = 1
value = SCA,AT
time = 1

[State 0, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1

[State 850, bg effect]
type = EnvColor
trigger1 = Time = 0
time = 1
under = 1

[State 0, Pause]
type = Pause
trigger1 = !time
time = 16
moveTime = 16

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nostandguard
flag2 = nocrouchguard
flag3 = nowalk

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 7012
ID = 7012
pos = 27,-32
postype = p1 ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 999
pausemovetime = 999
scale = 0.45,0.45
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

;[State 0, CtrlSet]
;type = CtrlSet
;trigger1 = time > 3
;value = 1

[State 700, 0]
type = PlaySnd
trigger1 = Time = 0
value = S2, 10

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1

;----------------------------------------------------------------------
;Throw - Inicio
[Statedef 800]
type = S
movetype= A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = 800

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT
hitflag = M
priority = 1, Miss
sparkno = -1
sprpriority = 1
p2facing = 1
hitsound = S800,0
p1stateno = 810
p2stateno = 820
ID = 820
fall = 1

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
;Throw - Agarrando
[Statedef 810]
type = S
movetype= A
physics = N
anim = 810
poweradd = 60

[State 810, SprPriority]
type = SprPriority
trigger1 = 1
value = 3

[State 810, rafaga]
type = PlaySnd
trigger1 = animelem = 3
value = S800,10

[State 810, uhaa]
type = PlaySnd
trigger1 = animelem = 4
value = S5,4+random%3
channel = 0
ignorehitpause = 1

[State 810, girar]
type = Turn
trigger1 = command = "holdback"
trigger1 = animelem = 2

[State 810, girar objetivo]
type = null;TargetFacing
trigger1 = numtarget(820)
trigger1 = facing = (target, facing)
trigger1 = AnimElem = 3,<0
value = 1
ID = 820

[State 810, agarre 1]
type = TargetBind
trigger1 = animelem = 1
pos = 30, 0
ID = 820

[State 810, agarre 2]
type = TargetBind
trigger1 = animelem = 2
pos = -15, -40
ID = 820

[State 810, agarre 3]
type = TargetBind
trigger1 = animelem = 3
pos = 24, -30
ID = 820

[State 810, herir]
type = TargetLifeAdd
trigger1 = animelem = 4
value = -25
ID = 820

[State 810, tirar]
type = TargetState
trigger1 = numtarget(820)
trigger1 = animelem = 4
value = 821
ID = 820

[State 0, paso]
type = PosAdd
trigger1 = animelem = 5
x = 9
y = 0

[State 810, fin]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
;Throw - P2 state
[Statedef 820]
type = A
movetype = H
physics = N
velset = 0,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = time = 0
value = 820

[State 820, 2]
type = ScreenBound
trigger1 = 1
value = 0

[State 820, 3]
type = Turn
trigger1 = facing != (enemynear, facing)
trigger1 = animelem = 2
;ignorehitpause = 
;persistent = 

;----------------------------------------------------------------------
;Throw - P2 lanzado
[Statedef 821]
type = A
movetype = H
physics = N
velset = 7,-7
poweradd = 40
anim = 5050

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .4

[State 821, 2] ; Recover near ground (use ChangeState)
type = ChangeState
triggerall = vel Y > 0
triggerall = pos Y >= -20
triggerall = alive
triggerall = canrecover
triggerall = command = "recovery"
trigger1 = authorname = "EGC"
trigger1 = var(5) = 0
trigger2 = authorname != "EGC"
value = 5200 ;HITFALL_RECOVER

[State 821, 3] ; Recover in mid air (use SelfState)
type = SelfState
triggerall = vel Y > 0
triggerall = alive
triggerall = canrecover
triggerall = command = "recovery"
trigger1 = authorname = "EGC"
trigger1 = var(5) = 0
trigger2 = authorname != "EGC"
value = 5210 ;HITFALL_AIRRECOVER

[State 821, herirse]
type = LifeAdd
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = -75
persistent = 0

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

;---------------------------------------------------------------------------
;Carga de Ki - Comienzo
[Statedef 900]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 900
ctrl = 0
sprpriority = 1

[State 900, vel a 0]
type = VarSet
trigger1 = time = 0
v = 9
value = 0

[State 900, vel multi]
type = VarAdd
trigger1 = timemod = 50,0
trigger1 = var(9) < 4
v = 9
value = 1

[State 900, poder]
type = PowerAdd
trigger1 = time > 8
value = 3*var(9)

[State 900, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "carga = %d veces mas rapido"
params = var(9)

[State 900, Aura]
type = Explod
trigger1 = animelem = 4
anim = 7500
ID = 7500
pos = -3,0
bindtime = -1
removetime = -1
scale = 0.4,0.4
sprpriority = 3
ownpal = 0
removeongethit = 1

[State 900, Aura al azar - grande]
type = Explod
trigger1 = random >= 500
anim = 909
ID = 909
pos = -3,-25
vel = 0,ifelse(random<499,(-0.2),(-0.3))
random = 35,60
;bindtime = -1
removetime = -2
scale = ifelse(random<499,0.1,(0.150)), ifelse(random<499,0.1,(0.150))
sprpriority = ifelse(random<749,3,-3)
ownpal = 1
removeongethit = 1

[State 900, Aura al azar - pequeña]
type = Explod
trigger1 = random < 500
anim = 909
ID = 909
pos = -3,-25
vel = 0,ifelse(random<499,(-0.2),(-0.3))
random = 35,60
;bindtime = -1
removetime = -2
scale = ifelse(random<499,(0.05),(0.025)), ifelse(random<499,(0.05),(0.025))
sprpriority = ifelse(random<749,3,-3)
ownpal = 1
removeongethit = 1

[State 900, Aura - trasera]
type = Explod
trigger1 = gametime%22 = 0
trigger2 = time = 0
anim = 7501
ID =  7501
pos = 0,0
bindtime = -1
scale = .4,.5
sprpriority = 0
ownpal = 1
removeongethit = 1
trans = addalpha
alpha = 128,256

[State 900, Aura - Ground]
type = Explod
triggerall = pos y > -20
trigger1 = animelem = 4, > 0
trigger1 = timemod = 14,0
anim = 911
ID = 7500
pos = -3,floor(-pos y)
scale = 0.5,0.5
sprpriority = -5
ownpal = 0
removeongethit = 1

[State 900, Aura - Ground 2]
type = Explod
triggerall = pos y > -30
trigger1 = animelem = 4, > 0
trigger1 = timemod = 14,0
anim = 912
ID = 7500
pos = -3,floor(-pos y)
scale = 0.5,0.5
sprpriority = -5
ownpal = 0
removeongethit = 1

[State 900, remolino]
type = Explod
trigger1 = random < 300
trigger1 = timemod = 8,0
anim = 7524
ID = 7524  
pos = 0,-20
facing = ifelse(random < 500,-1,1)
vel = 0,-0.1
accel = 0,-0.05*(random%4)
random = 0,20
scale = 0.5,0.5
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 900, Dust - Left]
type = Explod
triggerall = pos y > -25
trigger1 = animelem >= 4, >= 0
trigger1 = timemod = 15,0
anim = 913
ID = 913
pos = -23,floor(-pos y)
facing = 1
scale = 0.5,0.5
sprpriority = 2
ownpal = 0
;removeongethit = 1

[State 900, Dust - Right]
type = Explod
triggerall = pos y > -25
trigger1 = animelem >= 4, >= 0
trigger1 = timemod = 15,0
anim = 913
ID = 913
pos = 17,floor(-pos y)
facing = -1
scale = 0.5,0.5
sprpriority = 2
ownpal = 0
;removeongethit = 1

[State 900, image]
type = null;Explod
trigger1 = time = [11,21]
anim = 902
ID = 902
pos = 0,0
bindtime = -1
removetime = 1
scale = 1.0+(time-10)/10, 1.0+(time-10)/10
sprpriority = -5
ownpal = 0
removeongethit = 1

[State 900, haaa]
type = PlaySnd
trigger1 = animelem = 4
value = S5,900
channel = 0

[State 900, flash]
type = EnvColor
trigger1 = animelem = 4
time = 3
under = 1

[State 900, shake]
type = EnvShake
triggerall = pos y > -120
trigger1 = timemod = 10,0
time = 10
freq = 30
ampl = -1
phase = 60

[State 900, ki aura - start]
type = PlaySnd
trigger1 = animelem = 4
value = S900,0
channel = 5
loop = 0

[State 900, ki aura - loop]
type = PlaySnd
trigger1 = animelem = 4, > 4
trigger1 = timemod = 20,0
value = S901,0
channel = 6
loop = 0

[State 900, piedra grande]
type = Helper
trigger1 = random < 300
trigger1 = numhelper(915) < 6
helpertype = normal ;player
name = "piedra grande"
ID = 915
stateno = 915
pos = -120+random%240,0
ownpal = 1
size.xscale = ifelse(random < 500,(0.5),(0.25))
size.yscale = ifelse(random < 500,(0.5),(0.25))

[State 900, piedra pequeña]
type = Helper
trigger1 = random < 300
trigger1 = numhelper(916) < 6
helpertype = normal ;player
name = "piedra pequeña"
ID = 916
stateno = 915
pos = -120+random%240,0
ownpal = 1
size.xscale = ifelse(random >= 499,(0.4),(0.2))
size.yscale = ifelse(random >= 499,(0.4),(0.2))

[State 990, subir]
type = VarSet
triggerall = pos y < 0
trigger1 = var(7) != 2
trigger2 = var(7) = 2
trigger2 = vel y >= 1
v = 7
value = 1

[State 990, bajar]
type = VarSet
trigger1 = var(7) = 1
trigger1 = vel y <= -1
v = 7
value = 2

[State 990, subir]
type = VelAdd
triggerall = screenpos y > 60
trigger1 = var(7) = 1
y = -0.05

[State 990, bajar]
type = VelAdd
triggerall = pos y < 0
trigger1 = var(7) = 2
y = 0.05

[State 990, frenar]
type = VelSet
trigger1 = screenpos y <= 60
trigger2 = pos y > 0
y = 0

[State 900, suelo]
type = PosSet
trigger1 = pos y > 0
y = 0

[State 900, suelo]
type = VarSet
trigger1 = pos y >= 0
v = 7
value = 0

[State 900, end]
type = ChangeState
triggerall = var(59) = 0
triggerall = animelem = 4, >= 4
trigger1 = command != "holdb"
trigger2 = command != "holdy"
trigger3 = power >= powermax
value = 901

;-------------------------------------------------------------------------
;Carga de Ki - Finalizacion
[Statedef 901]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 901
ctrl = 0
sprpriority = 2

[State 901, remove ki]
type = RemoveExplod
trigger1 = time = 0
id = 7500

[State 901, StopSnd]
type = StopSnd
trigger1 = time = 0
channel = 0

[State 901, StopSnd]
type = StopSnd
trigger1 = time = 0
channel = 5

[State 901, StopSnd]
type = StopSnd
trigger1 = time = 0
channel = 6

[State 901, Ki aura - start]
type = PlaySnd
trigger1 = time = 1
value = S900,1
channel = 5

[State 901, CtrlSet]
type = null;CtrlSet
trigger1 = time = 1
value = 1

[State 901, end]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Zanzoken - Comienzo
[Statedef 920]
type    = S
movetype= I
physics = S
velset = 0,0
;anim = 920
ctrl = 0
sprpriority = 0
hitdefpersist = 1
movehitpersist = 1
hitcountpersist = 1

[State 920, imagen]
type = Helper
trigger1 = time = 0
helpertype = player
name = "Zanzoken image"
ID = 925
stateno = 925
facing = 1
ownpal = 1

[State 920, agregar limitacion]
type = VarAdd
trigger1 = time = 0
v = 21
value = 45
ignorehitpause = 1

[State 920, tele]
type = PlaySnd
trigger1 = time = 0
value = S920,0

[State 920, trans]
type = VarSet
trigger1 = time = 0
v = 11
value = 2

[State 920, trans]
type = VarSet
trigger1 = time = 0
v = 12
value = 256

[State 920, next]
type = ChangeState
trigger1 = time = 1
value = 921

;---------------------------------------------------------------------------
; Zanzoken - Finalizacion
[Statedef 921]
type    = S
movetype= I
physics = S
velset = 0,0
;anim = -1
ctrl = 0
poweradd = -100
sprpriority = 0
hitdefpersist = 1
movehitpersist = 1
hitcountpersist = 1

[State 921, efecto frame]
type = AfterImage
trigger1 = time = 0
time = 20
palbright = 30,30,30
palcontrast = 120,120,120
paladd = 32,32,32
palmul = .64,.64,.64
length = 5
timegap = 1
framegap = 1
trans = add1

[State 921, presiona]
type = VarSet
trigger1 = time = 0
v = 14
value = 0

[State 921, no presiona]
type = VarSet
trigger1 = time = 1
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
trigger1 = command != "holdup"
trigger1 = command != "holddown"
trigger1 = p2bodydist x > -1
v = 14
value = 1

[State 921, teletransporte  - adelante]
type = VelSet
triggerall = 1
trigger1 = var(59) = 0
trigger1 = (command = "holdfwd") ||  var(14) = 1
trigger2 = var(59) > 0
trigger2 = p2bodydist x > 60
trigger2 = p2movetype != A
trigger3 = var(59) > 0
trigger3 = p2bodydist x <= 60
trigger3 = p2movetype = A
x = 10

[State 921, teletransporte  - atras]
type = VelSet
triggerall = 1
trigger1 = var(59) = 0
trigger1 = command = "holdback"
trigger1 = command != "holdfwd"
trigger2 = var(59) > 0
trigger2 = p2bodydist x > 60
trigger2 = p2movetype = A
x = -10

[State 921, teletransporte - arriba]
type = VelSet
triggerall = screenpos y >= 60
trigger1 = var(59) = 0
trigger1 = command = "holdup"
trigger1 = command != "holddown"
trigger2 = var(59) > 0
trigger2 = p2bodydist y > -30
trigger2 = p2movetype != A
y = -10

[State 921, teletransporte - abajo]
type = VelSet
triggerall = pos y <= 0
trigger1 = var(59) = 0
trigger1 = command = "holddown"
trigger1 = command != "holdup"
trigger2 = var(59) > 0
trigger2 = p2bodydist y < 30
trigger2 = p2movetype != A
y = 10

[State 921, teletransporte - frenar]
type = VelSet
trigger1 = screenpos y < 60
trigger2 = pos y > 0
trigger3 = command = "holda" || command = "holdb" ;|| command = "holdc"
trigger4 = command = "holdx" || command = "holdy" || command = "holdz"
y = 0

[State 921, suelo]
type = PosSet
trigger1 = pos y > 0
y = 0

[State 921, anim - adelante]
type = ChangeAnim
triggerall = anim != 921
trigger1 = vel x > 0;command = "holdfwd"
value = 921

[State 921, anim - atras]
type = ChangeAnim
triggerall = anim != 922
trigger1 = vel x < 0;command = "holdback"
value = 922

[State 921, anim - arriba]
type = ChangeAnim
triggerall = anim != 920
trigger1 = vel y < 0;command = "holdup"
value = 920

[State 921, anim - abajo]
type = ChangeAnim
triggerall = anim != 920
trigger1 = vel y > 0;command = "holddown"
value = 920

[State 921, usar poder]
type = PowerAdd
trigger1 = vel x != 0
trigger2 = vel y != 0
value = -4

[State 921, invunerable]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1

[State 921, traspasable]
type = PlayerPush
trigger1 = 1
value = 0

[State 921, no caminar]
type = AssertSpecial
trigger1 = 1
flag = nowalk

[State 921, no cubrirse]
type = AssertSpecial
trigger1 = 1
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard

[State 921, desenfoque]
type = null;ScreenBound
trigger1 = 1
value = 0

[State 921, voltearse]
type = null;Turn
trigger1 = p2bodydist x < -10

[State 921, control]
type = null;CtrlSet
trigger1 = time > 0
trigger1 = pos y >= 0
value = 1

[State 921, control]
type = null;CtrlSet
trigger1 = time > 0
trigger1 = pos y < 0
value = 0

[State 921, finalizar en el aire]
type = ChangeState
triggerall = time > 0
triggerall = pos y < 0
trigger1 = command = "holda" || command = "holdb"; || command = "holdc"
trigger2 = command = "holdx" || command = "holdy" || command = "holdz"
value = 990

[State 921, finalizar]
type = ChangeState
trigger1 = time = 10
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Super Ball - Carga
[Statedef 960]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 960
ctrl = 0
sprpriority = 1

[State 0, effect]
type = PlaySnd
trigger1 = time = 0
trigger2 = time = 25
value = S4,3
channel = 3

[State 0, ball]
type = Explod
trigger1 = time = 0
anim =  970
ID = 970
pos = 10,-22
bindtime = -1
removetime = 50
scale = 0.2,0.2
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 0, ball effect]
type = Explod
trigger1 = time = 0
anim = 7000
ID =  7000
pos = 10,-22
bindtime = -1
removetime = -2
scale = 0.2,0.2
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 0, ball]
type = Explod
trigger1 = time = 25
anim = 970
ID = 970
pos = -6,-22
bindtime = -1
removetime = 25
scale = 0.2,0.2
sprpriority = 2
ownpal = 1
removeongethit = 1

[State 0, ball effect]
type = Explod
trigger1 = time = 25
anim = 7000
ID =  7000
pos = -6,-22
bindtime = -1
removetime = -2
scale = 0.2,0.2
sprpriority = 2
ownpal = 1
removeongethit = 1

[State 0, projectil]
type = Helper
trigger1 = animelem = 2
helpertype = normal
name = "Super Ball"
ID = 970
stateno = 970
pos = 18,-34
ownpal = -1
size.xscale = 0.75
size.yscale = 0.75
;ignorehitpause =
;persistent =

[State 0, usar poder]
type = PowerAdd
trigger1 = time = 0
trigger2 = time = 25
value = -125

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time > 50
value = -5

[State 0, acumular casnsansio]
type = VarAdd
trigger1 = time > 50
v = 5
value = 2

[State 0, fin]
type = ChangeState
triggerall = time > 50
trigger1 = time > 140 || numhelper(970) = 0
trigger2 = var(59) = 0
trigger2 = command != "holdz"
trigger3 = var(59) > 0
trigger3 = p2movetype = A
trigger3 = p2bodydist y = [-30,30]
value = 961
ctrl = 1

;----------------------------------------------------------------------------------
; Super Ball - Lanzamiento
[Statedef 961]
type    = S
movetype= A
physics = S
velset = 0,0
;anim = 960
ctrl = 0
sprpriority = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, cansado]
type = ChangeState
trigger1 = time = 50
trigger1 = power < 2
value = 5300

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 50
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Fly - Elevacion
[Statedef 989]
type    = A
movetype= I
physics = S
velset = 0,0
anim = 989
ctrl = 0
sprpriority = 1

[State 0, activar modo vuelo]
type = VarSet
trigger1 = time = 0
v = 6
value = 1
ignorehitpause = 1

[State 0, subir]
type = VelSet
trigger1 = time = 1
x = 0
y = -4

[State 990, onda]
type = Explod
trigger1 = time = 1
anim = 912
ID = 912
pos = 0,floor(-pos y)
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = -5
ownpal = 1

[State 990, efecto]
type = PlaySnd
trigger1 = time = 1 
value = S990,0
channel = 3

[State 990, volar]
type = ChangeState
trigger1 = time = 10
trigger2 = pos y < 0 && time = 0
value = 990

;---------------------------------------------------------------------------
;  Fly - Estatico
[Statedef 990]
type    = A
movetype= I
physics = N
velset = 0,0
;anim = 990
ctrl = 0
sprpriority = 1

[State 990, anim girando]
type = ChangeAnim
trigger1 = p2dist x < 0 && anim != 995
value = 995

[State 990, girar]
type = Turn
trigger1 = p2dist x < 0 ;&& anim != 995

[State 990, estatico normal]
type = ChangeAnim
triggerall = life >= (lifemax*10/100)
trigger1 = anim = 995 && animtime = 0
trigger2 = anim != 990 && anim != 995
value = 990

[State 990, estatico cansado]
type = ChangeAnim
triggerall = life < (lifemax*10/100)
trigger1 = anim = 995 && animtime = 0
trigger2 = anim != 999 && anim != 995
value = 999

[State 990, deliro]
type = PlaySnd
triggerall = anim = 999
triggerall = random < 500
trigger1 = timemod = 47,0
value = S5,18+random%2
channel = 0

[State 990, subir]
type = VarSet
trigger1 = var(7) != 2
trigger2 = (var(7) = 2) && vel y >= 1
v = 7
value = 1

[State 990, bajar]
type = VarSet
triggerall = var(7) = 1
trigger1 = vel y <= -1
;trigger2 =(Vel Y < 0)
v = 7
value = 2

[State 990, subir]
type = VelAdd
triggerall = screenpos y > 60
trigger1 = var(7) = 1
y = -0.05

[State 990, bajar]
type = VelAdd
trigger1 = var(7) = 2
y = 0.05

[State 990, adelante]
type = ChangeState
triggerall = pos y < 0
trigger1 = var(59) = 0
trigger1 = command = "holdfwd"
trigger2 = var(59) > 0
trigger2 = p2bodydist x > 60
trigger2 = p2movetype != A
value = 991

[State 990, atras]
type = ChangeState
triggerall = pos y < 0
trigger1 = var(59) = 0
trigger1 = command = "holdback"
trigger2 = var(59) > 0
trigger2 = p2bodydist x < 120
trigger2 = p2movetype = A
value = 992

[State 990, arriba]
type = ChangeState
triggerall = pos y < 0
triggerall = screenpos y > 60
trigger1 = var(59) = 0
trigger1 = command = "holdup"
trigger2 = var(59) > 0
trigger2 = p2bodydist y < -30
trigger2 = p2movetype != A
trigger3 = var(59) > 0
trigger3 = p2bodydist y = [-120,0]
trigger3 = p2movetype = A
value = 993

[State 990, abajo]
type = ChangeState
triggerall = pos y < 0
trigger1 = var(59) = 0
trigger1 = command = "holddown"
trigger2 = var(59) > 0
trigger2 = p2bodydist y > 30
trigger2 = p2movetype != A
trigger3 = var(59) > 0
trigger3 = p2bodydist y = [-1,120]
trigger3 = pos y < -120
trigger3 = p2movetype = A
value = 994

[State 990, suelo]
type = ChangeState
trigger1 = time > 0
trigger1 = pos y >= 0
value = 52

;---------------------------------------------------------------------------
;  Fly - Adelante
[Statedef 991]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 991
ctrl = 0
sprpriority = 1

[State 990, anim girando]
type = ChangeAnim
trigger1 = p2dist x < 0 && anim != 995
value = 995

[State 990, girar]
type = Turn
trigger1 = p2dist x < 0 ;&& anim != 995

[State 990, adelante]
type = ChangeAnim
trigger1 = anim = 995 && animtime = 0
trigger2 = anim != 991 && anim != 995
value = 991

[State 990, impulcion adelante]
type = VelAdd
trigger1 = vel x < 6
x = 1

[State 990, impulcion arriba]
type = VelAdd
triggerall = vel y > -6
triggerall = screenpos y > 60
trigger1 = var(59) = 0
trigger1 = command = "holdup"
trigger2 = var(59) > 0
trigger2 = p2bodydist y < -30
y = -1

[State 990, impulcion abajo]
type = VelAdd
triggerall = vel y < 6
trigger1 = var(59) = 0
trigger1 = command = "holddown"
trigger2 = var(59) > 0
trigger2 = p2bodydist y > 30
y = 1

[State 990, frenar]
type = VelSet
trigger1 = screenpos y <= 60
y = 0

[State 990, suelo]
type = ChangeState
trigger1 = pos y >= 0
value = 52

[State 990, parar]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdfwd"
trigger2 = var(59) > 0
trigger2 = p2bodydist x < 60
trigger3 = var(59) > 0
trigger3 = p2bodydist x < 120
trigger3 = p2movetype = A
value = 990

;---------------------------------------------------------------------------
;  Fly - Atras
[Statedef 992]
type    = A
movetype= I
physics = N
velset = 0,0
;anim = 992
ctrl = 0
sprpriority = 1

[State 990, adelante]
type = ChangeAnim
trigger1 = anim = 995 && animtime = 0
trigger2 = anim != 992 && anim != 995
value = 992

[State 990, impulcion atras]
type = VelAdd
trigger1 = vel x > -6
x = -1

[State 990, impulcion arriba]
type = VelAdd
triggerall = vel y > -6
triggerall = screenpos y > 60
trigger1 = var(59) = 0
trigger1 = command = "holdup"
trigger2 = var(59) > 0
trigger2 = p2bodydist y < -30
y = -1

[State 990, impulcion abajo]
type = VelAdd
triggerall = vel y < 6
trigger1 = var(59) = 0
trigger1 = command = "holddown"
trigger2 = var(59) > 0
trigger2 = p2bodydist y > 30
y = 1

[State 990, frenar]
type = VelSet
trigger1 = screenpos y <= 60
y = 0

[State 990, suelo]
type = ChangeState
trigger1 = pos y >= 0
value = 52

[State 990, parar]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = var(59) > 0
trigger2 = p2bodydist x  > 120
trigger2 = p2movetype != A
value = 990

;---------------------------------------------------------------------------
;  Fly - Arriba
[Statedef 993]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 993
ctrl = 0
sprpriority = 1

[State 990, impulcion arriba]
type = VelAdd
trigger1 = vel y > -6
y = -1

[State 0, adelante]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "holdfwd"
trigger2 = var(59) > 0
trigger2 = p2bodydist x > 60
trigger2 = p2movetype != A
value = 991

[State 0, atras]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "holdback"
trigger2 = var(59) > 0
trigger2 = p2bodydist x < 120
trigger2 = p2movetype = A
value = 992

[State 990, suelo]
type = ChangeState
trigger1 = pos y >= 0
value = 52

[State 990, parar]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdup" ||  screenpos y <= 60
trigger2 = var(59) > 0
trigger2 = p2bodydist y = [-30,0]
trigger2 = p2movetype != A
trigger3 = var(59) > 0
trigger3 = p2bodydist y  < -120
trigger3 = p2movetype = A
value = 990

;---------------------------------------------------------------------------
;  Fly - Abajo
[Statedef 994]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 994
ctrl = 0
sprpriority = 1

[State 990, impulcion arriba]
type = VelAdd
trigger1 = vel y < 6
y = 1

[State 0, adelante]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "holdfwd"
trigger2 = var(59) > 0
trigger2 = p2bodydist x > 60
trigger2 = p2movetype != A
value = 991

[State 0, atras]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "holdback"
trigger2 = var(59) > 0
trigger2 = p2bodydist x < 120
trigger2 = p2movetype = A
value = 992

[State 990, suelo]
type = ChangeState
trigger1 = pos y >= 0
value = 52

[State 990, parar]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holddown"
trigger2 = var(59) > 0
trigger2 = p2bodydist y = [-30,0]
trigger2 = p2movetype != A
trigger3 = var(59) > 0
trigger3 = p2bodydist y  > 120
trigger3 = p2movetype = A
value = 990

;---------------------------------------------------------------------------
; Fast Punchs Combo - Comienzo
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = 0
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 0, combo reset]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 3
y = 0

[State 0, siguiente]
type = ChangeState
trigger1 = animtime = 0 
value = 1001+random%3

;---------------------------------------------------------------------------
; Fast Punchs Combo - 1er Ataque
[Statedef 1001]
type    = S
movetype= A
physics = S
juggle  = 4
anim = 1001
ctrl = 0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 1
y = 0

[State 0, rafaga]
type = PlaySnd
trigger1 = animelem = 2
value = S0,1

[State 100, dust]
type = Explod
trigger1 = animelem = 2
trigger1 = pos y > -120
anim = 7521
ID = 7521
pos = -8,floor(-pos y)
vel = -0.1+random%2,0
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 0
ownpal = 1

[State 0, efecto]
type = Explod
trigger1 = animelem = 2 
anim = 1005
ID = 1005
pos = 28,-34
facing = 1
vfacing = 1
bindtime = 2
random = 10,10
sprpriority = 3
removeongethit = 1

[State 230, 2]
type = HitDef
trigger1 = animelem = 2
attr = A, NA
animtype  = Medium
damage    = 9
guardflag = MA
pausetime = 2,2
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-32
hitsound   = S1,0
guardsound = S2,0
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -1
air.hittime  = 20
air.velocity = -1,-2
ID = 1000
kill = 0
snap = 28+random%10,0-random%4

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
pos = 28+random%10,-32-random%4
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, combo usado]
type = VarAdd
trigger1 = time = 0
v = 3
value = 1

[State 0, reset combo manual]
type = VarSet
trigger1 = time = 0
v = 4
value = 0

[State 0, agregar combo manual]
type = VarSet
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = var(59) > 0
trigger3 = var(58) <= 100/(9-var(59))
trigger3 = movehit = 1
v = 4
value = 1
ignorehitpause = 1

[State 240, combo]
type = ChangeState
triggerall = var(3) < 12
triggerall = animelem = 2, > 0
trigger1 = var(4) = 1 || var(3) < 3 && animelem = 2, > 1
value = ifelse (prevstateno = 1002, 1003,1002)

[State 0, combo]
type = ChangeState
triggerall = numtarget(1000)
trigger1 = animelem = 3
value = 1004
ignorehitpause = 1

[State 0, fin]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Fast Punchs Combo - 2er Ataque
[Statedef 1002]
type    = S
movetype= A
physics = S
juggle  = 4
anim = 1002
ctrl = 0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 1
y = 0

[State 0, rafaga]
type = PlaySnd
trigger1 = animelem = 2
value = S0,1

[State 100, dust]
type = Explod
trigger1 = animelem = 2
trigger1 = pos y > -120
anim = 7521
ID = 7521
pos = -8,floor(-pos y)
vel = -0.1+random%2,0
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 0
ownpal = 1

[State 0, efecto]
type = Explod
trigger1 = animelem = 2 
anim = 1006
ID = 1006
pos = 26,-22
facing = 1
vfacing = 1
bindtime = 2
random = 10,10
sprpriority = 3
removeongethit = 1

[State 230, 2]
type = HitDef
trigger1 = animelem = 2
attr = A, NA
animtype  = Medium
damage    = 9
guardflag = MA
pausetime = 2,2
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-32
hitsound   = S1,0
guardsound = S2,0
ground.type = low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -1
air.hittime  = 20
air.velocity = -1,-2
ID = 1000
kill = 0
snap = 28+random%10,0-random%4

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
pos = 28+random%10,-20-random%4
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, combo usado]
type = VarAdd
trigger1 = time = 0
v = 3
value = 1

[State 0, reset combo manual]
type = VarSet
trigger1 = time = 0
v = 4
value = 0

[State 0, agregar combo manual]
type = VarSet
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = var(59) > 0
trigger3 = var(58) <= 100/(9-var(59))
trigger3 = movehit = 1
v = 4
value = 1
ignorehitpause = 1

[State 240, combo]
type = ChangeState
triggerall = var(3) < 12
triggerall = animelem = 2, > 0
trigger1 = var(4) = 1 || var(3) < 3 && animelem = 2, > 1
trigger2 = var(59) > 0
trigger2 = movehit
value = 1001

[State 0, combo]
type = ChangeState
triggerall = numtarget(1000)
trigger1 = animelem = 3
value = 1004
ignorehitpause = 1

[State 0, fin]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Fast Punchs Combo - 3er Ataque
[Statedef 1003]
type    = S
movetype= A
physics = S
juggle  = 4
anim = 1003
ctrl = 0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 1
y = 0

[State 0, rafaga]
type = PlaySnd
trigger1 = animelem = 2
value = S0,1

[State 100, dust]
type = Explod
trigger1 = animelem = 2
trigger1 = pos y > -120
anim = 7521
ID = 7521
pos = -8,floor(-pos y)
vel = -0.1+random%2,0
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 0
ownpal = 1

[State 0, efecto]
type = Explod
trigger1 = animelem = 2 
anim = 1007
ID = 1007
pos = 26,-38
facing = 1
vfacing = 1
bindtime = 2
random = 10,10
sprpriority = 3
removeongethit = 1

[State 230, 2]
type = HitDef
trigger1 = animelem = 2
attr = A, NA
animtype  = Medium
damage    = 9
guardflag = MA
pausetime = 2,2
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-32
hitsound   = S1,0
guardsound = S2,0
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -1
air.hittime  = 20
air.velocity = -1,-2
ID = 1000
kill = 0
snap = 28+random%10,0-random%4

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
pos = 28+random%10,-39-random%4
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, combo usado]
type = VarAdd
trigger1 = time = 0
v = 3
value = 1

[State 0, reset combo manual]
type = VarSet
trigger1 = time = 0
v = 4
value = 0

[State 0, agregar combo manual]
type = VarSet
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = var(59) > 0
trigger3 = var(58) <= 100/(9-var(59))
trigger3 = movehit = 1
v = 4
value = 1
ignorehitpause = 1

[State 240, combo]
type = ChangeState
triggerall = var(3) < 12
triggerall = animelem = 2, > 0
trigger1 = var(4) = 1 || var(3) < 3 && animelem = 2, > 1
trigger2 = var(59) > 0
trigger2 = movehit
value = 1001

[State 0, combo]
type = ChangeState
triggerall = numtarget(1000)
trigger1 = animelem = 3
value = 1004
ignorehitpause = 1

[State 0, fin]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Fast Punchs Combo - Ataque final
[Statedef 1004]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = 0
velset = 0,0
anim = 1004
ctrl = 0
sprpriority = 2

[State 200, rafaga]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 6
trigger3 = animelem = 11
value = S0,3

[State 200, ja]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 7
value = S5,0+random%4

[State 200, ja]
type = PlaySnd
trigger1 = animelem = 12
value = S5,4+random%2

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 2
palbright = 0,0,0;90,90,90
palcontrast = 192,192,192;220,220,220
;paladd = 32,96,128
;palmul = .64,.64,.64
length = 10
timegap = 1
framegap = 1
trans = add

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = animelem = 13, < 0
time = 2

[State 100, dust]
type = null;Explod
trigger1 = animelem = 3
trigger1 = pos y > -120
anim = 7522
ID = 7522
pos = -8,floor(-pos y)
vel = -0.1,0
supermovetime = 777
pausemovetime = 777
scale = 1,1
sprpriority = 0
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
trigger2 = AnimElem = 6
x = 3
y = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 9
trigger2 = animelem = 10
x = 6
y = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 11
x = 8
y = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 16
x = -8
y = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 17
trigger2 = animelem = 18
x = -6
y = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 15, 0                   ;Damage that move inflicts, guard damage
animtype = heavy                   ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 1, 1                 ;Time attacker pauses, time opponent shakes
sparkno = -1                      ;Spark anim no (Def: set above)
sparkxy = -10, -22               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S1, 3                  ;Sound to play on hit
guardsound = S2,0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 20             ;Time opponent is in hit state
ground.velocity = -1,0            ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-2    ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1,-3          ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 20
EnvShake.time = 40
EnvShake.freq = 60
EnvShake.ampl = -4
EnvShake.phase = 90
kill = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 11, 0                   ;Damage that move inflicts, guard damage
animtype = heavy                   ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 1, 1                 ;Time attacker pauses, time opponent shakes
sparkno = -1                      ;Spark anim no (Def: set above)
sparkxy = -10, -22               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S1,3                  ;Sound to play on hit
guardsound = S2, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 20             ;Time opponent is in hit state
ground.velocity = -1,0            ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-2    ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1,-3          ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 20
;fall = 0
EnvShake.time = 40
EnvShake.freq = 60
EnvShake.ampl = -4
EnvShake.phase = 90
kill = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 12
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 25, 12                 ;Damage that move inflicts, guard damage
animtype = up                   ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 5, 5                 ;Time attacker pauses, time opponent shakes
sparkno = -1                      ;Spark anim no (Def: set above)
sparkxy = -10, -22               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S1,4                  ;Sound to play on hit
guardsound = S2, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 20             ;Time opponent is in hit state
ground.velocity = -0.5,-10
air.velocity = -0.5,-10
;Y-velocity at which opponent is pushed
air.hittime = 20
fall = 1
fall.recover = 0
EnvShake.time = 40
EnvShake.freq = 60
EnvShake.ampl = -4
EnvShake.phase = 90

[State 0, flash]
type = null;EnvColor
trigger1 = movehit = 1
time = 2
under = 1
ignorehitpause = 1

[State 0, Spark]
type = Helper
triggerall = animelem = 3, >= 0
triggerall = animelem = 4, <  0
trigger1 = movecontact = 1
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
pos = 27,-47
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, Spark]
type = Helper
triggerall = animelem = 7, >= 0
triggerall = animelem = 8, <  0
trigger1 = movecontact = 1
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
pos = 30,-35
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, Spark]
type = Helper
triggerall = animelem = 12, >= 0
triggerall = animelem = 13, <  0
trigger1 = movecontact = 1
helpertype = Normal
name = "Spark"
ID = 7002
stateno = 7002
pos = 15,-45
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = p2movetype = H
value = 0
movecamera = 0,0

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------
; Hit by Fast Kung Fu Palm - shaking from the hit
; (a custom gethit state)
; See State 1020 for details
[Statedef 1025]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1025, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = 1
value = 1025

[State 1025, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 1026

;------------------
; Hit by Fast Kung Fu Palm - flying through the air
; (a custom gethit state)
[Statedef 1026]
type    = A
movetype= H
physics = N

[State 1026, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1026, Gravity]
type = VelAdd
trigger1 = 1
y = .45

[State 1026, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 1026, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1027

[State 1026, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
; Hit by Fast Kung Fu Palm - hit wall
; (a custom gethit state)
[Statedef 1027]
type    = A
movetype= H
physics = N

[State 1027, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1027, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1027, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1027, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 1027, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 1027

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 1027, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 1028

;------------------
; Hit by Fast Kung Fu Palm - bounce off wall
; (a custom gethit state)
[Statedef 1028]
type    = A
movetype= H
physics = N

[State 1028, 1]
type = Null;NotHitBy
trigger1 = 1
value = , NA, NP

[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1028, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
; Crazy Kicks - Comienzo
[Statedef 1100]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 1100
ctrl = 0
sprpriority = 2

[State 0, combo reset]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = S0,3

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 5
y = 0

[State 100, dust]
type = Explod
trigger1 = animelem = 2
trigger1 = pos y > -120
anim = 7522
ID = 7522
pos = -8,floor(-pos y)
vel = -0.1,0
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 0
ownpal = 1

[State 0, subir]
type = PosAdd
trigger1 = animelem = 3
y = -10

[State 0, salto]
type = ChangeState
trigger1 = animtime = 0
trigger2 = time = 1
trigger2 = pos y < -10
value = 1101

;---------------------------------------------------------------------------
; Crazy Kicks - Patada media
[Statedef 1101]
type    = A
movetype= A
physics = S
juggle  = 4
anim = 1101
ctrl = 0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 1
y = 0

[State 0, rafaga]
type = PlaySnd
trigger1 = animelem = 2
value = S0,1

[State 100, dust]
type = Explod
trigger1 = animelem = 2
trigger1 = pos y > -120
anim = 7521
ID = 7521
pos = -8,floor(-pos y)
vel = -0.1+random%2,0
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 0
ownpal = 1

[State 0, efecto]
type = Explod
trigger1 = animelem = 2 
anim = 1110
ID = 1110
pos = 36,-33
facing = 1
vfacing = 1
bindtime = 2
random = 10,10
sprpriority = 3
removeongethit = 1

[State 230, 2]
type = HitDef
trigger1 = animelem = 2
attr = A, NA
animtype  = Medium
damage    = 6
guardflag = MA
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-32
hitsound   = S1,0
guardsound = S2,0
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -1
air.hittime  = 20
air.velocity = -1,-2

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
pos = 26+random%11,-16-random%11
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, combo usado]
type = VarAdd
trigger1 = time = 0
v = 3
value = 1

[State 0, reset combo manual]
type = VarSet
trigger1 = time = 0
v = 4
value = 0

[State 0, agregar combo manual]
type = VarSet
trigger1 = command = "a"
trigger2 = var(59) > 0
trigger2 = var(58) <= 100/(9-var(59))
trigger2 = movehit = 1
v = 4
value = 1

[State 0, combo]
type = ChangeState
triggerall = var(3) < 20
triggerall = animelem = 2, > 0
trigger1 = var(4) = 1 || var(3) < 4 && animelem = 2, > 0
value = ifelse (prevstateno = 1102, 1103,1102)

[State 0, combo]
type = ChangeState
trigger1 = animelem = 3
trigger1 = power >= 250
trigger1 = command = "holdfwd"
value = 310;1104
ignorehitpause = 1

[State 0, fin]
type = ChangeState
trigger1 = animtime = 0
value = 1104
ctrl = 1

;---------------------------------------------------------------------------
; Crazy Kicks - Patada baja
[Statedef 1102]
type    = A
movetype= A
physics = S
juggle  = 4
anim = 1102
ctrl = 0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 1
y = 0

[State 0, rafaga]
type = PlaySnd
trigger1 = animelem = 2
value = S0,1

[State 100, dust]
type = Explod
trigger1 = animelem = 2
trigger1 = pos y > -120
anim = 7521
ID = 7521
pos = -8,floor(-pos y)
vel = -0.1+random%2,0
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 0
ownpal = 1

[State 0, efecto]
type = Explod
trigger1 = animelem = 2 
anim = 1111
ID = 1111
pos = 36,-30
facing = 1
vfacing = 1
bindtime = 2
random = 10,10
sprpriority = 3
removeongethit = 1

[State 230, 2]
type = HitDef
trigger1 = animelem = 2
attr = A, NA
animtype  = Medium
damage    = 6
guardflag = MA
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-32
hitsound   = 5,1
guardsound = 6,0
ground.type = low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -1
air.hittime  = 20
air.velocity = -1,-2

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
pos = 22+random%11,-random%11
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, combo usado]
type = VarAdd
trigger1 = time = 0
v = 3
value = 1

[State 0, reset combo manual]
type = VarSet
trigger1 = time = 0
v = 4
value = 0

[State 0, agregar combo manual]
type = VarSet
trigger1 = command = "a"
trigger2 = var(59) > 0
trigger2 = var(58) <= 100/(9-var(59))
trigger2 = movehit = 1
v = 4
value = 1

[State 0, combo]
type = ChangeState
triggerall = var(3) < 20
triggerall = animelem = 2, > 0
trigger1 = var(4) = 1 || var(3) < 4 && animelem = 2, > 0
value = 1101

[State 0, combo]
type = ChangeState
trigger1 = animelem = 3
trigger1 = power >= 250
trigger1 = command = "holdfwd"
value = 310;1104
ignorehitpause = 1

[State 0, fin]
type = ChangeState
trigger1 = animtime = 0
value = 1104
ctrl = 1

;---------------------------------------------------------------------------
; Crazy Kicks - Patada alta
[Statedef 1103]
type    = A
movetype= A
physics = S
juggle  = 4
anim = 1103
ctrl = 0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 1
y = 0

[State 0, rafaga]
type = PlaySnd
trigger1 = animelem = 2
value = S0,1

[State 100, dust]
type = Explod
trigger1 = animelem = 2
trigger1 = pos y > -120
anim = 7521
ID = 7521
pos = -8,floor(-pos y)
vel = -0.1+random%2,0
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 0
ownpal = 1

[State 0, efecto]
type = Explod
trigger1 = animelem = 2 
anim = 1112
ID = 1112
pos = 36,-39
facing = 1
vfacing = 1
bindtime = 2
random = 10,10
sprpriority = 3
removeongethit = 1

[State 230, 2]
type = HitDef
trigger1 = animelem = 2
attr = A, NA
animtype  = Medium
damage    = 6
guardflag = MA
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-32
hitsound   = 5,1
guardsound = 6,0
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -1
air.hittime  = 20
air.velocity = -1,-2

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
pos = 27+random%11,-37-random%11
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, combo usado]
type = VarAdd
trigger1 = time = 0
v = 3
value = 1

[State 0, reset combo manual]
type = VarSet
trigger1 = time = 0
v = 4
value = 0

[State 0, agregar combo manual]
type = VarSet
trigger1 = command = "a"
trigger2 = var(59) > 0
trigger2 = var(58) <= 100/(9-var(59))
trigger2 = movehit = 1
v = 4
value = 1

[State 0, combo]
type = ChangeState
triggerall = var(3) < 20
triggerall = animelem = 2, > 0
trigger1 = var(4) = 1 || var(3) < 4 && animelem = 2, > 0
value = 1101

[State 0, combo]
type = ChangeState
trigger1 = animelem = 3
trigger1 = power >= 250
trigger1 = command = "holdfwd"
value = 310;1104
ignorehitpause = 1

[State 0, fin]
type = ChangeState
trigger1 = animtime = 0
value = 1104
ctrl = 1

;---------------------------------------------------------------------------
; Crazy Kicks - Golpe Final
[Statedef 1104]
type    = A
movetype= I
physics = N
juggle  = 4
anim = 1104
ctrl = 0
sprpriority = 2

[State 0, volar]
type = ChangeState
trigger1 = animelem = 3
trigger1 = var(6) = 1
value = 989

[State 0, gravedad]
type = StateTypeSet
trigger1 = animelem = 3
physics = A         ;A,C,S,N
ignorehitpause = 1


;---------------------------------------------------------------------------
; Dash Elbow 1 - 1° Ataque
[Statedef 1200]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = 0
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

[State 1200, rafaga]
type = PlaySnd
trigger1 = AnimElem = 2
value = 100, 1

[State 230, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%3
channel = 0

[State 0, impulcion frente]
type = VelSet
trigger1 = AnimElem = 2
x = 15
y = 0

[State 100, polvo]
type = Explod
trigger1 = animelem = 2
trigger1 = pos y > -60
anim = 7522
ID = 7522
pos = -20,floor(-pos y)
vel = -0.1,0
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 0
ownpal = 1

[State 0, polvito]
type = Explod
triggerall = pos y > -60
trigger1 = vel x != 0
anim = 7528
ID = 7528
pos = 0,floor(-pos y)
vel = ifelse(vel x < 0,0.1,-0.1),0
random = 2,2
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 2
ownpal = 1

[State 100, dash]
type = Explod
triggerall = vel x != 0
trigger1 = time%2 = 0
anim = 7525
ID = 7525
pos  = -20,-35
random = 0,50
sprpriority = 0+random%4
vel  = 1+random%2,0
scale = 0.5,0.5
ownpal = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 2
palbright = 0,0,0;90,90,90
palcontrast = 192,192,192;220,220,220
;paladd = 32,96,128
;palmul = .64,.64,.64
length = 10
timegap = 1
framegap = 1
trans = add

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2
ignorehitpause = 1

[State 1200, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = medium
damage    = 21,0
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,-35
hitsound   = S1,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -5,0
guard.velocity = -7
air.hittime = 25
air.velocity = -5,-3
airguard.velocity = -7,0
forcenofall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.velocity = 0,-4
down.bounce = 2

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
ownpal = 1
pos = 30,-30;26,-36
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, reset combo]
type = VarSet
trigger1 = time = 0
v = 3
value = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = movehit
x = 5
y = 0

[State 1200, sig]
type = ChangeState
triggerall = animelem = 2, > 0
triggerall = movecontact
triggerall = vel x >= 1
trigger1 = movehit;command = "Dash Elbow"
;trigger2 = var(59) > 0
value = 1201

[State 1200, 3]
type = ChangeState
triggerall = animelem = 2, > 0
trigger1 = !movehit
trigger1 = vel x < 5
trigger2 = movehit
trigger2 = vel x < 7
trigger3 = time > 30
value = 1215

;---------------------------------------------------------------------------
; Dash Elbow 1 - 2° Ataque
[Statedef 1201]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd = 0
velset = 0,0
anim = 1201
ctrl = 0
sprpriority = 2

[State 1200, rafaga]
type = PlaySnd
trigger1 = AnimElem = 5
value = 100, 1

[State 230, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,1+random%3
channel = 0

[State 0, impulcion atras]
type = VelSet
trigger1 = AnimElem = 2
x = -10
y = 0

[State 0, impulcion frente]
type = VelSet
trigger1 = AnimElem = 5
x = 20
y = 0

[State 105, polvo]
type = Explod
trigger1 = animelem = 2
trigger1 = pos y > -60
anim = 7522
ID = 7522
facing = 1
pos = -25,floor(-pos y)
vel = -0.1,0
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 0
ownpal = 1

[State 0, polvito]
type = Explod
triggerall = pos y > -60
trigger1 = vel x != 0
anim = 7528
ID = 7528
pos = 0,floor(-pos y)
vel = ifelse(vel x < 0,0.1,-0.1),0
random = 2,2
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 2
ownpal = 1

[State 100, dash]
type = Explod
triggerall = vel x != 0
trigger1 = time%2 = 0
anim = 7525
ID = 7525
pos  = -20,-35
random = 0,50
sprpriority = 0+random%4
vel  = 1+random%2,0
scale = 0.5,0.5
ownpal = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 2
palbright = 0,0,0;90,90,90
palcontrast = 192,192,192;220,220,220
;paladd = 32,96,128
;palmul = .64,.64,.64
length = 10
timegap = 1
framegap = 1
trans = add

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2
ignorehitpause = 1

[State 1200, golpe]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = medium
getpower = 0,0
damage    = 17+var(3),0
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 2,1
sparkno = -1
guard.sparkno = -1
hitsound   = S1,2
guardsound = S2,0
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = 0,0
air.hittime = 25
guard.velocity = -7
air.velocity = 0,0
airguard.velocity = -7,0
forcenofall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
ID = 1201

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
ownpal = 1
pos = 24,-38;26,-36
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = movehit
x = 0
y = 0

[State 0, reset boton presionado]
type = VarSet
trigger1 = time = 0
v = 4
value = 0
ignorehitpause = 1

[State 0, boton presionado]
type = VarSet
triggerall = animelem = 6, < 1
trigger1 = command = "Dash Elbow"
trigger2 = var(59) > 0
trigger2 = var(58) <= 100/(9-var(59))
trigger2 = movehit = 1
v = 4
value = 1
ignorehitpause = 1

[State 0, agregar combo]
type = VarAdd
trigger1 = time = 0
v = 3 
value = 1
ignorehitpause = 1

[State 0, sig]
type = ChangeState
triggerall = var(3) < 5
triggerall = animelem = 6, > 0
triggerall = numtarget(1201)
trigger1 = var(4) = 1
value = 1201
ignorehitpause = 1

[State 0, sig]
type = ChangeState
triggerall = var(3) >= 4
triggerall = animelem = 6, > 0
triggerall = numtarget(1201)
trigger1 = var(4) = 1
value = 1202
ignorehitpause = 1

[State 1200, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dash Elbow - Ataque final
[Statedef 1202]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = 0
velset = 0,0
anim = 1202
ctrl = 0
sprpriority = 2

[State 1200, rafaga]
type = PlaySnd
trigger1 = AnimElem = 7
value = S100,1

[State 230, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,4+random%2
channel = 0

[State 0, impulcion atras]
type = VelSet
trigger1 = AnimElem = 2
x = -15
y = 0

[State 0, impulcion frente]
type = VelSet
trigger1 = AnimElem = 7
x = 25
y = 0

[State 100, polvo]
type = Explod
triggerall = animelem = 7
trigger1 = pos y > -120
anim = 7522
ID = 7522
pos = -20,floor(-pos y)
vel = -0.1,0
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 0
ownpal = 1

[State 0, polvito]
type = Explod
triggerall = pos y > -60
trigger1 = vel x != 0
anim = 7528
ID = 7528
pos = 0,floor(-pos y)
vel = ifelse(vel x < 0,0.1,-0.1),0
random = 2,2
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 2
ownpal = 1

[State 100, dash]
type = Explod
triggerall = vel x != 0
trigger1 = time%2 = 0
anim = 7525
ID = 7525
pos  = -20,-35
random = 0,50
sprpriority = 0+random%4
vel  = 1+random%2,0
scale = 0.5,0.5
ownpal = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 2
palbright = 0,0,0;90,90,90
palcontrast = 192,192,192;220,220,220
;paladd = 32,96,128
;palmul = .64,.64,.64
length = 10
timegap = 1
framegap = 1
trans = add

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2
ignorehitpause = 1

[State 1200, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
getpower = 0,0
damage    = 50, 10
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 2,2
sparkno = -1
guard.sparkno = -1
sparkxy = 0,-35
hitsound   = S1,4
guardsound = S2,0
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -14,-4
guard.velocity = -7
air.velocity = 0,0
airguard.velocity = -7,-4
fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.velocity = 0,-4
down.bounce = 2

[State 0, desenfoque]
type = ScreenBound
trigger1 = movehit
value = 0
ignorehitpause = 1

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
ownpal = 1
pos = 17,-24;26,-36
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 1200, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dash Elbow 2 - 1° Ataque
[Statedef 1210]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd = 0
velset = 0,0
anim = 1210
ctrl = 0
sprpriority = 2

[State 0, saltearse]
type = ChangeState
trigger1 = prevstateno = 1201
value = 1212
;ignorehitpause = 1

[State 1200, rafaga]
type = PlaySnd
trigger1 = AnimElem = 2
value = S100,1

[State 230, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%3
channel = 0

[State 0, impulcion frente]
type = VelSet
trigger1 = AnimElem = 2
x = 25
y = 0

[State 100, polvo]
type = Explod
trigger1 = animelem = 2
trigger1 = pos y > -60
anim = 7522
ID = 7522
pos = -20,floor(-pos y)
vel = -0.1,0
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 0
ownpal = 1

[State 0, polvito]
type = Explod
triggerall = pos y > -60
trigger1 = vel x != 0
anim = 7528
ID = 7528
pos = 0,floor(-pos y)
vel = ifelse(vel x < 0,0.1,-0.1),0
random = 2,2
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 2
ownpal = 1

[State 100, dash]
type = Explod
triggerall = vel x != 0
trigger1 = time%2 = 0
anim = 7525
ID = 7525
pos  = -20,-35
random = 0,50
sprpriority = 0+random%4
vel  = 1+random%2,0
scale = 0.5,0.5
ownpal = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 2
palbright = 0,0,0;90,90,90
palcontrast = 192,192,192;220,220,220
;paladd = 32,96,128
;palmul = .64,.64,.64
length = 10
timegap = 1
framegap = 1
trans = add

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 0, traspasable]
type = PlayerPush
trigger1 = movehit
value = 0
ignorehitpause = 1

[State 1200, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
getpower = 0,0
damage    = 33,0
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,-35
hitsound   = S1,2
guardsound = S2,0
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = 0
guard.velocity = -7
air.velocity = 0,0
airguard.velocity = -7,-1
forcenofall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.velocity = 0,-4
down.bounce = 2

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
ownpal = 1
pos = 24,-38;26,-36
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = movehit
trigger1 = p2bodydist x > -2
x = 5
y = 0

[State 1200, sig]
type = ChangeState
triggerall = animelem = 2, > 0
triggerall = p2bodydist x < -2
trigger1 = movehit
;trigger1 = command = "y"
;trigger2 = var(59) > 0
value = 1211

[State 1200, 3]
type = ChangeState
triggerall = animelem = 2, > 0
trigger1 = !movehit
trigger1 = vel x < 5
trigger2 = movehit
trigger2 = vel x < 1
trigger3 = time > 30
value = 1215

;---------------------------------------------------------------------------
; Dash Elbow 2 - 2° Ataque
[Statedef 1211]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd = 0
velset = 0,0
anim = 1211
ctrl = 0
sprpriority = 2

[State 1200, rafaga]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2

[State 230, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%3
channel = 0

[State 0, impulcion frente]
type = VelSet
trigger1 = AnimElem = 2
x = 5
y = 0

[State 0, desenfoque]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger2 = animtime = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = p2bodydist x - 40
y = 0

[State 1200, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 29, 11
priority  = 5              ;Flags on how move is to be guarded against
hitflag = MAF
guardflag = MA
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,-34
hitsound   = S1,3
guardsound = s2,0
ground.type = Low
ground.slidetime = 100
ground.hittime  = 100
ground.velocity = -20,-8
guard.velocity = -7
air.velocity = -20,-8
airguard.velocity = -7,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
fall.recover = 0
p2facing = 1

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
ownpal = 1
pos = 20,-36
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, combo reset]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State 1200, sig]
type = ChangeState
triggerall = animelem = 3, > 10
triggerall = power >= 300
;triggerall = p2bodydist x < -2
triggerall = movehit
trigger1 = command = "y"
trigger2 = var(59) > 0
trigger2 = var(58) <= 100/(9-var(59))
value = 1212

[State 1200, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dash Elbow 2 - 3° Ataques
[Statedef 1212]
type    = A
movetype= A
physics = S
juggle  = 0
poweradd = -250
velset = 0,0
anim = 1212+random%2
ctrl = 0
sprpriority = 2

[State 230, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,1+random%3
channel = 0

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
bindtime = -1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 1200, tele]
type = PlaySnd
trigger1 = AnimElem = 1
value = 920, 1

[State 0, Pause]
type = Pause
trigger1 = time = 0
time = 6
movetime = 6

[State 1200, rafaga]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2

[State 0, impulcion frente]
type = VelSet
trigger1 = AnimElem = 2
x = 5
y = 0

[State 0, desenfoque]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = time = 1
trigger1 =  p2bodydist x < 0

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = p2bodydist x + 60
y = p2bodydist y

[State 1200, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
getpower = 0,0
animtype  = Hard
damage    = 25-var(3), 10-var(3)
priority  = 5              ;Flags on how move is to be guarded against
hitflag = MAF
guardflag = MA
priority = 7,hit
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,-34
hitsound   = S1,3
guardsound = 6,0
ground.type = trip
ground.slidetime = 100
ground.hittime  = 100
ground.velocity = -20,-8
guard.velocity = -7
air.velocity = -20,-8
airguard.velocity = -7,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;fall = 1
fall.recover = 0
p2facing = 1

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
ownpal = 1
pos = 20,-36
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, combo]
type = VarAdd
trigger1 = time = 0
v = 3
value = 1

[State 1200, sig]
type = ChangeState
triggerall = animelem = 2, > 10
triggerall = power >= 250
triggerall = var(3) < 2
triggerall = movehit
trigger1 = command = "y"
trigger2 = var(59) > 0
trigger2 = var(58) <= 100/(9-var(59))
trigger2 = movehit = 1
value = 1212

[State 1200, sig]
type = ChangeState
triggerall = animelem = 2, > 10
triggerall = power >= 250
triggerall = var(3) >= 2
triggerall = movehit
trigger1 = command = "y"
trigger2 = var(59) > 0
trigger2 = var(58) <= 100/(9-var(59))
trigger2 = movehit = 1
value = 1214

[State 1200, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dash Elbow 2 - Ataque final
[Statedef 1214]
type    = A
movetype= A
physics = S
poweradd = -250
anim = 1214
ctrl = 0
sprpriority = 2

[State 230, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,4+random%2
channel = 0

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
bindtime = -1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 1200, tele]
type = PlaySnd
trigger1 = AnimElem = 1
value = 920, 1

[State 0, Pause]
type = Pause
trigger1 = time = 0
time = 11
movetime = 11

[State 1200, rafaga]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2

[State 0, impulcion frente]
type = VelSet
trigger1 = AnimElem = 2
x = 0
y = 0

[State 0, desenfoque]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = time = 1
trigger1 =  p2bodydist x < 0

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = p2bodydist x + 60
y = p2bodydist y - 10

[State 1200, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 53, 10
priority  = 5              ;Flags on how move is to be guarded against
hitflag = MAF
guardflag = MA
priority = 7,hit
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,-34
hitsound   = S1,6
guardsound = 6,0
ground.type = low
ground.slidetime = 100
ground.hittime  = 1
ground.velocity = 0,20
guard.velocity = -7
air.velocity = 0,20
airguard.velocity = -7,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;fall = 1
fall.recover = 0
p2facing = 1
fall.damage = 20

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7002
stateno = 7002
ownpal = 1
pos = 18,-22
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, finalizacion]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Dash Elbow - Finalizacion
[Statedef 1215]
type    = S
movetype= I
physics = S
poweradd = 0
anim = 1215
ctrl = 0
sprpriority = 2

[State 1200, finalizacion]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Moon Kick - Ataque
[Statedef 1300]
type        = A
movetype    = A
physics     = N
anim        = 1300
ctrl        = 0
sprpriority = 2

[State 230, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = time = 0
value = S5,0+random%4
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S0,4
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S40,1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2, > 0
trigger1 = animelem = 8, < 0
x = 4
y = -5

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 2
palbright = 0,0,0;90,90,90
palcontrast = 192,192,192;220,220,220
;paladd = 32,96,128
;palmul = .64,.64,.64
length = 10
timegap = 1
framegap = 1
trans = add

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = vel x > 0 && vel y < 0
time = 2
ignorehitpause = 1

[State 0, polvo]
type = Explod
trigger1 = animelem = 1
anim = 7522
id = 7522
pos  = -10,floor(-pos y)
removetime = -2
scale = 0.5,0.5
ownpal = 1

[State 0, dash]
type = Explod
trigger1 = vel x > 0 && vel y < 0
trigger1 = time%2 = 0
anim = 7527
id = 7527
pos  = 0,-35
random = 30,30
sprpriority = -5+random%10
removetime = -2
scale = 0.5,0.5
ownpal = 1

[State 0, extrellas]
type = Explod
trigger1 = vel x > 0 && vel y < 0
trigger1 = time%2 = 0
anim = 975
ID = 975
pos = 0,-10
random = 10,10
facing = ifelse(random<500,1,-1)
vfacing = ifelse(random<500,1,-1)
vel = -4+(random%9),-4+(random%9)
scale = 0.25,0.25
supermovetime = 777
pausemovetime = 777
sprpriority = -5+random%10
ownpal = 0
removeongethit = 1

[State 0, aura]
type = Explod
trigger1 = animelem = 2
anim = 7400
ID = 7400
vfacing = -1
scale = 0.5,0.5
pos = 0,-10
bindtime = -1
supermovetime = 777
pausemovetime = 777
sprpriority = 5
ownpal = 0
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 6812
ID = 6812
pos = 0,-30
bindtime = -1
removetime = 45
scale = 0.3,0.3
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(6812)
ID = 6812
scale = 0.7-(0.02*time),0.7-(0.02*time)
trans = addalpha
alpha = 128-(4*time),256

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = animelem = 2, > 0
trigger1 = vel x < 0 && vel y > 0
trigger2 = animelem = 8, > 0
id = 6812

[State 0, golpe]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 38,8
hitflag =  MAFD ;MFL
guardflag = HA
animtype = Med
priority = 4
pausetime = 12,12
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-40
hitsound   = S1,3
guardsound = S2,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 30
ground.velocity = -1,-10
air.velocity = -1,-10
fall = 1

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
ownpal = 1
pos = 25,-30
supermovetime = 30
pausemovetime = 30
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, combo usado]
type = null;VarAdd
trigger1 = time = 0
v = 3
value = 1

[State 0, PowerAdd]
type = null;PowerAdd
trigger1 = time = 0
trigger1 = var(3) > 1
value = -250

[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelem = 8, > 0
trigger1 = movecontact
trigger1 = !numexplod(6812)
value = 1
ignorehitpause = 1

[State 0, caer]
type = StateTypeSet
trigger1 = animelem = 8, > 0
physics = A     
ignorehitpause = 1

;-------------------------------------------------------------------------------
; Moon Kick 2 - Ataque
[Statedef 1310]
type        = A
movetype    = A
physics     = N
anim        = 1300
ctrl        = 0
sprpriority = 2

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = pos y < 0
value = anim
elem = 2
ignorehitpause = 1

[State 230, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%4
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S0,4
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S40,1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2, > 0
trigger1 = animelem = 8, < 0
x = 3
y = -6

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 2
palbright = 0,0,0;90,90,90
palcontrast = 192,192,192;220,220,220
;paladd = 32,96,128
;palmul = .64,.64,.64
length = 10
timegap = 1
framegap = 1
trans = add

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = vel x > 0 && vel y < 0
time = 2
ignorehitpause = 1

[State 0, polvo]
type = Explod
trigger1 = animelem = 1
anim = 7522
id = 7522
pos  = -10,floor(-pos y)
removetime = -2
scale = 0.5,0.5
ownpal = 1

[State 0, dash]
type = Explod
trigger1 = vel x > 0 && vel y < 0
trigger1 = time%2 = 0
anim = 7527
id = 7527
pos  = 0,-35
random = 30,30
sprpriority = -5+random%10
removetime = -2
scale = 0.5,0.5
ownpal = 1

[State 0, extrellas]
type = Explod
trigger1 = vel x > 0 && vel y < 0
trigger1 = time%2 = 0
anim = 975
ID = 975
pos = 0,-10
random = 10,10
facing = ifelse(random<500,1,-1)
vfacing = ifelse(random<500,1,-1)
vel = -4+(random%9),-4+(random%9)
scale = 0.25,0.25
supermovetime = 777
pausemovetime = 777
sprpriority = -5+random%10
ownpal = 0
removeongethit = 1

[State 0, aura]
type = Explod
trigger1 = animelem = 2
anim = 7400
ID = 7400
vfacing = -1
scale = 0.5,0.5
pos = 0,-10
bindtime = -1
supermovetime = 777
pausemovetime = 777
sprpriority = 5
ownpal = 0
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 6812
ID = 6812
pos = 0,-30
bindtime = -1
removetime = 45
scale = 0.3,0.3
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(6812)
ID = 6812
scale = 0.7-(0.02*time),0.7-(0.02*time)
trans = addalpha
alpha = 128-(4*time),256

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = animelem = 2, > 0
trigger1 = vel x < 0 && vel y > 0
trigger2 = animelem = 8, > 0
id = 6812

[State 0, golpe]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 102,8
hitflag =  MAFD ;MFL
guardflag = HA
animtype = Med
priority = 4
pausetime = 12,12
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-40
hitsound   = S1,3
guardsound = S2,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 30
ground.velocity = 1,-10
air.velocity = 1,-10
fall = 1

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
ownpal = 1
pos = 25,-30
supermovetime = 30
pausemovetime = 30
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, combo usado]
type = null;VarAdd
trigger1 = time = 0
v = 3
value = 1

[State 0, PowerAdd]
type = null;PowerAdd
trigger1 = time = 0
trigger1 = var(3) > 1
value = -250

[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelem = 8, > 0
trigger1 = movecontact
trigger1 = !numexplod(6812)
value = 1
ignorehitpause = 1

[State 0, caer]
type = StateTypeSet
trigger1 = animelem = 8, > 0
physics = A     
ignorehitpause = 1

;-------------------------------------------------------------------------------
; Bird Kick - Salto
[Statedef 1350]
type        = A
movetype    = I
physics     = S
velset      = 0,0
anim        = 1350
ctrl        = 0
sprpriority = 2

[State 0, salto]
type = PlaySnd
trigger1 = animelem = 2
value = 40,2

[State 0, salto]
type = VelSet
trigger1 = animelem = 2
x = -13
y = -16

[State 0, onda]
type = Explod
trigger1 = animelem = 1, = 1
anim = 912
ID = 912
pos = 0,floor(-pos y)
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = -5
ownpal = 1

[State 0, polvo izq]
type = Explod
trigger1 = animelem = 1, = 1
anim = 7523
ID = 7523
pos = 30,floor(-pos y)
facing = -1
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 2
ownpal = 1

[State 0, polvo der]
type = Explod
trigger1 = animelem = 1, = 1
anim = 7523
ID = 7523
pos = -30,floor(-pos y)
facing = 1
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 2
ownpal = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add1
;alpha = add1

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 2
palbright = 0,0,0;90,90,90
palcontrast = 192,192,192;220,220,220
;paladd = 32,96,128
;palmul = .64,.64,.64
length = 10
timegap = 1
framegap = 1
trans = add

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2
ignorehitpause = 1

[State 0, combo reset]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State 0, siguiente]
type = ChangeState
trigger1 = time = 7
trigger2 = time = 0 && pos y < 0
value = 1351

;-------------------------------------------------------------------------------
; Bird Kick - Ataque
[Statedef 1351]
type        = A
movetype    = A
physics     = N
anim        = 1351
ctrl        = 0
sprpriority = 2

[State 230, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = time = 0
value = S5,0+random%4
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S0,3

[State 0, VelMul]
type = VelMul
trigger1 =  time = 0
x = 0.050
y = 0.045

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 7
x = 14
y = 14

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 2
palbright = 0,0,0;90,90,90
palcontrast = 192,192,192;220,220,220
;paladd = 32,96,128
;palmul = .64,.64,.64
length = 10
timegap = 1
framegap = 1
trans = add

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2
ignorehitpause = 1

[State 0, dash]
type = Explod
trigger1 = vel x != 0 || vel y != 0
trigger1 = time%2 = 0
anim = 7527
id = 7527
pos  = 0,-35
facing  = -1
vfacing	= 1
random = 10,10
bindtime = 1
sprpriority = -5+random%10
;vel = -10-random%2,10+random%2
removetime = -2
scale = 0.5,0.5
ontop = 0
ownpal = 1

[State 0, aura]
type = Explod
trigger1 = animelem = 7, > 0
trigger1 = timemod = 3,0
anim = 7632
ID = 7632
scale = 0.5,0.5
pos = 25,-9
bindtime = -1
supermovetime = 777
pausemovetime = 777
sprpriority = 5
ownpal = 0
removeongethit = 1

[State 0, golpe]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 38,8
hitflag =  MAFD ;MFL
guardflag = HA
animtype = Med
priority = 4
pausetime = 12,12
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-40
hitsound   = S1,3
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 30
ground.velocity = -2
air.velocity = -1,-4
envshake.time = 15
envshake.freq = 60
envshake.ampl = -2
envshake.phase = 90

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
ownpal = 1
pos = 25,-9
supermovetime = 30
pausemovetime = 30
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, combo usado]
type = VarAdd
trigger1 = time = 0
v = 3
value = 1

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 0
trigger1 = var(3) > 1
value = -250

[State 0, finalizar]
type = ChangeState
trigger1 = movecontact
value = 1353

[State 0, finalizar]
type = ChangeState
trigger1 = pos y >= 0
value = 1354
ctrl = 1

;-------------------------------------------------------------------------------
; Bird Kick - Rebote
[Statedef 1353]
type        = A
movetype    = I
physics     = A
velset      = -2,-6
anim        = 1353
ctrl        = 0
sprpriority = 1

[State 0, rafaga]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
value = S0,2

;-------------------------------------------------------------------------------
; Bird Kick - Aterrizaje
[Statedef 1354]
type        = A
movetype    = I
physics     = S
velset      = 10,0
anim        = 1354
ctrl        = 0
sprpriority = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 0

[State 0, PalFX]
type = PalFX
trigger1 = time = 0
time = 1

[State 0, polvo]
type = Explod
trigger1 = timemod = 2,0
anim = 7521
ID = 7521
pos = -5,0
facing = ifelse(random<499,-1,1)
bindtime = 1
vel = -0.1,0
random = 10,0
removetime = -2
supermovetime = 777
pausemovetime = 777
scale = 0.3,0.3
sprpriority = 2
ownpal = 1

[State 0, PosSet]
type = PosSet
trigger1 = pos y > 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Bird Kick 2 - Salto
[Statedef 1360]
type        = A
movetype    = I
physics     = S
velset      = 0,0
anim        = 1360
ctrl        = 0
sprpriority = 2

[State 0, salto]
type = PlaySnd
trigger1 = animelem = 2
value = 40,2

[State 0, salto]
type = VelSet
trigger1 = animelem = 2
x = 13
y = -16

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 2
statetype = A       
physics = A      

[State 0, onda]
type = Explod
trigger1 = animelem = 1, = 1
anim = 912
ID = 912
pos = 0,floor(-pos y)
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = -5
ownpal = 1

[State 0, polvo izq]
type = Explod
trigger1 = animelem = 1, = 1
anim = 7523
ID = 7523
pos = 30,floor(-pos y)
facing = -1
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 2
ownpal = 1

[State 0, polvo der]
type = Explod
trigger1 = animelem = 1, = 1
anim = 7523
ID = 7523
pos = -30,floor(-pos y)
facing = 1
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 2
ownpal = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add1
;alpha = add1

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 2
palbright = 0,0,0;90,90,90
palcontrast = 192,192,192;220,220,220
;paladd = 32,96,128
;palmul = .64,.64,.64
length = 10
timegap = 1
framegap = 1
trans = add

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2
ignorehitpause = 1

[State 0, combo reset]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State 0, siguiente]
type = ChangeState
trigger1 = time = 7
trigger2 = time = 0 && pos y < 0
value = 1351

;---------------------------------------------------------------------------
; Swirl Kick - 1° ataque
[Statedef 1400]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 20
ctrl = 0
velset = 0,0
anim = 1400
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 5
y = 0

[State 240, rafaga]
type = PlaySnd
trigger1 = time = 1
value = S0,3

[State 230, ja]
type = PlaySnd
trigger1 = animelem = 2
value = S5,0
channel = 0

[State 240, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = hard
damage    = 22
guardflag = MA
pausetime = 10,10
sparkno = -1              ;Time attacker pauses, time opponent shakes
guard.sparkno = -1
sparkxy = -10,-44
hitsound   = S1,3
guardsound = 6,0
ground.type = high
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -20,0
air.velocity = -20,-2
air.fall = 1
;p1stateno = 1401

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
ownpal = 1
pos = 26,-30;26,-36
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, combo reset]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State 0, combo usado]
type = VarSet
triggerall = time = [1,22]
trigger1 = command = "Swirl Kick"
trigger2 = var(59) > 0
trigger2 = var(58) <= 100/(9-var(59))
trigger2 = movehit = 1
v = 3
value = 1

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Swirl Kick - 2° ataque
[Statedef 1401]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 20
ctrl = 0
velset = 0,0
;anim = 1401
sprpriority = 2

[State 0, Zanzoken]
type = Helper
trigger1 = time = 0
helpertype = player
name = "Zanzoken"
ID = 925
stateno = 925
facing = 1
ownpal = 1
supermovetime = 100
pausemovetime = 100

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
bindtime = -1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, efect]
type = Explod
trigger1 = time = 3
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 1
value = 1401

[State 0, Pause]
type = Pause
trigger1 = time = 1
time = 10
movetime = 10

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 2
x = p2bodydist x + 60
y = p2bodydist y 

[State 0, tele]
type = PlaySnd
trigger1 = time = 0
value = S920,1
;channel = 5

[State 0, trans]
type = VarSet
trigger1 = time = 0
v = 11
value = 2

[State 0, trans]
type = VarSet
trigger1 = time = 0
v = 12
value = 128

[State 0, Turn]
type = Turn
trigger1 = time = 2
trigger1 = p2bodydist x < 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = animelem = 6, < 0
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 3
x = 5
y = 0

[State 240, rafaga]
type = PlaySnd
trigger1 = time = 1
value = S0,3

[State 230, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,1
channel = 0

[State 240, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = hard
damage    = 22
guardflag = MA
pausetime = 10,10
sparkno = -1              ;Time attacker pauses, time opponent shakes
guard.sparkno = -1
sparkxy = -10,-44
hitsound   = S1,3
guardsound = 6,0
ground.type = high
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -20,0
air.velocity = -20,-2
air.fall = 1
;p1stateno = 1402

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
ownpal = 1
pos = 32,-34;26,-36
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, combo reset]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State 0, combo usado]
type = VarSet
triggerall = time = [1,22]
trigger1 = command = "Swirl Kick"
trigger2 = var(59) > 0
trigger2 = var(58) <= 100/(9-var(59))
trigger2 = movehit = 1
v = 3
value = 1

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Swirl Kick - 3° ataque
[Statedef 1402]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 20
ctrl = 0
velset = 0,0
anim = 1402
sprpriority = 2

[State 0, Zanzoken]
type = Helper
trigger1 = time = 0
helpertype = player
name = "Zanzoken"
ID = 925
stateno = 925
facing = 1
ownpal = 1
supermovetime = 100
pausemovetime = 100

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
bindtime = -1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, efect]
type = Explod
trigger1 = time = 3
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 1
value = 1402

[State 0, Pause]
type = Pause
trigger1 = time = 1
time = 10
movetime = 10

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 2
x = p2bodydist x + 60
y = p2bodydist y 

[State 0, tele]
type = PlaySnd
trigger1 = time = 0
value = S920,1
;channel = 5

[State 0, trans]
type = VarSet
trigger1 = time = 0
v = 11
value = 2

[State 0, trans]
type = VarSet
trigger1 = time = 0
v = 12
value = 128

[State 0, Turn]
type = Turn
trigger1 = time = 2
trigger1 = p2bodydist x < 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = animelem = 6, < 0
value = 0

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 25
palbright = 30,30,30
palcontrast = 120,120,120
paladd = 32,32,32
palmul = .64,.64,.64
length = 5
timegap = 1
framegap = 1
trans = add

[State 0, VelSet]
type = VelSet
trigger1 = time = 4
x = 10
y = 0

[State 240, rafaga]
type = PlaySnd
trigger1 = time = 1
value = S0,3

[State 230, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,2
channel = 0

[State 240, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = hard
damage    = 22
guardflag = MA
pausetime = 10,10
sparkno = -1              ;Time attacker pauses, time opponent shakes
guard.sparkno = -1
sparkxy = -10,-44
hitsound   = S1,4
guardsound = 6,0
ground.type = high
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -16,-7
air.velocity = -16,-7
p2stateno = 1025
fall = 1

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7002
stateno = 7002
ownpal = 1
pos = 24,-34;26,-36
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Swirl Kick Up - 1° ataque
[Statedef 1410]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 20
ctrl = 0
velset = 0,0
anim = 1410
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = time < 24
x = 1
y = -0.5

[State 240, rafaga]
type = PlaySnd
trigger1 = time = 1
value = S0,3

[State 230, ja]
type = PlaySnd
trigger1 = animelem = 2
value = S5,0
channel = 0

[State 240, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = hard
damage    = 22
guardflag = MA
pausetime = 10,10
sparkno = -1              ;Time attacker pauses, time opponent shakes
guard.sparkno = -1
sparkxy = -10,-44
hitsound   = S1,3
guardsound = 6,0
ground.type = high
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -12,-12
air.velocity = -12,-12
fall = 1

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
ownpal = 1
pos = 28,-38;26,-36
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, combo reset]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State 0, combo usado]
type = VarSet
triggerall = time = [1,22]
trigger1 = command = "Swirl Kick Up"
trigger2 = var(59) > 0
trigger2 = var(58) <= 100/(9-var(59))
trigger2 = movehit = 1
v = 3
value = 1

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Swirl Kick Up - 2° ataque
[Statedef 1411]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 20
ctrl = 0
velset = 0,0
;anim = 1411
sprpriority = 2

[State 0, Zanzoken]
type = Helper
trigger1 = time = 0
helpertype = player
name = "Zanzoken"
ID = 925
stateno = 925
facing = 1
ownpal = 1
supermovetime = 100
pausemovetime = 100

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
bindtime = -1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, efect]
type = Explod
trigger1 = time = 3
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 1
value = 1411

[State 0, Pause]
type = Pause
trigger1 = time = 1
time = 10
movetime = 10

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 2
x = p2bodydist x + 60
y = p2bodydist y 

[State 0, tele]
type = PlaySnd
trigger1 = time = 0
value = S920,1
;channel = 5

[State 0, trans]
type = VarSet
trigger1 = time = 0
v = 11
value = 2

[State 0, trans]
type = VarSet
trigger1 = time = 0
v = 12
value = 128

[State 0, Turn]
type = Turn
trigger1 = time = 2
trigger1 = p2bodydist x < 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = animelem = 6, < 0
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = time < 12
x = 2
y = -2

[State 0, VelSet]
type = VelSet
trigger1 = time = [12,23]
x = 3
y = -0.5

[State 240, rafaga]
type = PlaySnd
trigger1 = time = 1
value = S0,3

[State 230, ja]
type = PlaySnd
trigger1 = animelem = 2
value = S5,1
channel = 0

[State 240, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = hard
damage    = 22
guardflag = MA
pausetime = 10,10
sparkno = -1              ;Time attacker pauses, time opponent shakes
guard.sparkno = -1
sparkxy = -10,-44
hitsound   = S1,3
guardsound = 6,0
ground.type = high
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -12,-2
air.velocity = -12,-2
fall = 1

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
ownpal = 1
pos = 28,-16;26,-36
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, combo reset]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State 0, combo usado]
type = VarSet
triggerall = time = [1,22]
trigger1 = command = "Swirl Kick Up"
trigger2 = var(59) > 0
trigger2 = var(58) <= 100/(9-var(59))
trigger2 = movehit = 1
v = 3
value = 1

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Swirl Kick Up - 3° ataque
[Statedef 1412]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 20
ctrl = 0
velset = 0,0
;anim = 1412
sprpriority = 2

[State 0, Zanzoken]
type = Helper
trigger1 = time = 0
helpertype = player
name = "Zanzoken"
ID = 925
stateno = 925
facing = 1
ownpal = 1
supermovetime = 100
pausemovetime = 100

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
bindtime = -1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, efect]
type = Explod
trigger1 = time = 3
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 1
value = 1412

[State 0, Pause]
type = Pause
trigger1 = time = 1
time = 10
movetime = 10

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 2
x = p2bodydist x + 60
y = p2bodydist y - 10

[State 0, tele]
type = PlaySnd
trigger1 = time = 0
value = S920,1
;channel = 5

[State 0, trans]
type = VarSet
trigger1 = time = 0
v = 11
value = 2

[State 0, trans]
type = VarSet
trigger1 = time = 0
v = 12
value = 128

[State 0, Turn]
type = Turn
trigger1 = time = 2
trigger1 = p2bodydist x < 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = animelem = 6, < 0
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = time < 24
x = 3
y = 0.5

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 25
palbright = 30,30,30
palcontrast = 120,120,120
paladd = 32,32,32
palmul = .64,.64,.64
length = 5
timegap = 1
framegap = 1
trans = add

[State 240, rafaga]
type = PlaySnd
trigger1 = time = 1
value = S0,3

[State 230, ja]
type = PlaySnd
trigger1 = animelem = 2
value = S5,0
channel = 0

[State 240, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = hard
damage    = 22
guardflag = MA
pausetime = 10,10
sparkno = -1              ;Time attacker pauses, time opponent shakes
guard.sparkno = -1
sparkxy = -10,-44
hitsound   = S1,3
guardsound = 6,0
ground.type = high
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -8,14
air.velocity = -8,14
fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall = 1
air.fall = 1
fall.recover = 0
down.bounce = 1
;down.hit = 1
fall.xvelocity =   -1
fall.yvelocity  =  -7

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7002
stateno = 7002
ownpal = 1
pos = 22,-4;26,-36
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Fireball - Ataque 1
[Statedef 2000]
type    = S
movetype= A
physics = S
;velset = 0,0
anim = 2000+ifelse(pos y < 0,2,0)
ctrl = 0
sprpriority = 1
poweradd = -50

[State 2000, usar poder]
type = PowerAdd
trigger1 = animelem = 2
value = -100

[State 2000, acumular cansansio]
type = VarAdd
trigger1 = animelem = 2
v = 5
value = (50-power)

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%3
channel = 0

[State 2000, projectil]
type = Helper
trigger1 = animelem = 2
trigger1 = (power >= 100 && var(20) <= 8) || var(20) <= 5
helpertype = normal
name = "Fireball"
ID = 2010
stateno = 2010
pos = 50-(ifelse(anim=2002,2,0)),-36-(ifelse(anim=2002,6,0))
ownpal = -1
size.xscale = 0.2
size.yscale = 0.2
;ignorehitpause =
;persistent =

[State 2000, efecto fx]
type = Explod
trigger1 = animelem = 2
anim = 7111
ID = 7111
pos = 30-(ifelse(anim=2002,2,0)),-36-(ifelse(anim=2002,6,0))
scale = 0.5,0.5
sprpriority = 2
bindtime = -1
ownpal = 0
removeongethit = 1

[State 2000, agregar limitador]
type = VarAdd
trigger1 = time = 0
v = 20
value = 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 0
trigger1 = pos y < 0
trigger1 = !var(6)
statetype = A  
physics = N        

[State 0, VelMul]
type = VelMul
trigger1 = time = 0
trigger1 = pos y < 0
;trigger1 = var(6)
x = ifelse(vel x > 0,0.090,ifelse(vel x < 0,0.090,0))
y = 0.090

[State 0, PosSet]
type = PosSet
trigger1 = pos y > 0
y = 0

[State 2000, fin]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Fireball - Ataque 2
[Statedef 2001]
type    = S
movetype= A
physics = S
;velset = 0,0
anim = 2001+ifelse(pos y < 0,2,0)
ctrl = 0
sprpriority = 1
poweradd = -50

[State 2000, usar poder]
type = PowerAdd
trigger1 = animelem = 2
value = -100

[State 2000, acumular cansansio]
type = VarAdd
trigger1 = animelem = 2
v = 5
value = (50-power)

[State 2000, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%3
channel = 0

[State 2000, projectil]
type = Helper
trigger1 = animelem = 2
trigger1 = (power >= 100 && var(20) <= 8) || var(20) <= 5
helpertype = normal
name = "Fireball"
ID = 2010
stateno = 2010
pos = 54-(ifelse(anim=2003,7,0)),-36-(ifelse(anim=2003,5,0))
ownpal = -1
size.xscale = 0.2
size.yscale = 0.2
;ignorehitpause =
;persistent =

[State 2000, efecto fx]
type = Explod
trigger1 = animelem = 2
anim = 7111
ID = 7111
pos = 34-(ifelse(anim=2003,7,0)),-36-(ifelse(anim=2003,5,0))
scale = 0.5,0.5
sprpriority = 2
bindtime = -1
ownpal = 0
removeongethit = 1

[State 2000, agregar limitador]
type = VarAdd
trigger1 = time = 0
v = 20
value = 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 0
trigger1 = pos y < 0
trigger1 = !var(6)
statetype = A  
physics = N        

[State 0, VelMul]
type = VelMul
trigger1 = time = 0
trigger1 = pos y < 0
;trigger1 = var(6)
x = ifelse(vel x > 0,0.090,ifelse(vel x < 0,0.090,0))
y = 0.090

[State 0, PosSet]
type = PosSet
trigger1 = pos y > 0
y = 0

[State 2000, fin]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Firelazer - Lanzamiento
[Statedef 2100]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 2100
ctrl = 0
sprpriority = 1
poweradd = -250

[State 2100, acumular casnsansio]
type = VarAdd
;trigger1 = power < 250
trigger1 = animelem = 3
v = 5
value = (250-power)

[State 2100, projectil]
type = Helper
trigger1 = power >= 125
trigger1 = animelem = 3
helpertype = normal
name = "Firelazer Projectil"
ID = 2110
stateno = 2110
pos = 28,-34
ownpal = -1
size.xscale = 0.5
size.yscale = 0.5
;ignorehitpause =
;persistent =

[State 2100, usar poder]
type = PowerAdd
trigger1 = animelem = 3
value = -250
ignorehitpause = 1

[State 0, effect fx]
type = Explod
trigger1 = animelem = 3, >= 0 && timemod = 7,0
trigger2 = animelem = 3 
anim = 7112
ID = 7112
pos = 26,-34
bindtime = -1
vfacing = ifelse(random<500,1,-1)
random = 1,1
scale = 0.3,0.3
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 0, sig]
type = ChangeState
triggerall = animelem = 3, > 0
trigger1 = numhelper(2110) = 0
value = 2101

;---------------------------------------------------------------------------
; Firelazer - Finalizacion
[Statedef 2101]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 2101
ctrl = 0
sprpriority = 1

[State 0, fin]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Kamehame-Ha - Carga
[Statedef 2200]
type = S
movetype = A
physics = S
juggle = 4
poweradd = -500
velset = 0,0
anim = 2200
ctrl = 0
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S4,1
channel = 3

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
name = "Kame Esfera"
ID = 2210
stateno = 2210
pos = -5,-20
keyctrl = 0
ownpal = 1
;supermovetime 
;pausemovetime 
size.xscale = 0.5
size.yscale = 0.5

[State 0, lanzar]
type = ChangeState
triggerall = animelem = 2, >= 15
trigger1 = command != "holdz"
trigger2 = animtime = 0
value = 2201

;---------------------------------------------------------------------------
; Kamehame-Ha - Lanzamiento
[Statedef 2201]
type = S
movetype = A
physics = S
juggle = 4
;poweradd = -500
velset = 0,0
anim = 2201
ctrl = 0
sprpriority = 1

[State 0, lanzamieto fx]
type = Explod
trigger1 = animelem = 2
anim = 7121
ID = 7121
pos = 20,-30
facing = -1
bindtime = -1
removetime = -2
supermovetime = -1
pausemovetime = -1
scale = 0.3,0.3
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
name = "Kame Esfera"
ID = 2211
stateno = 2211
pos = 24,-30
keyctrl = 0
ownpal = 1
;supermovetime 
;pausemovetime 
size.xscale = 0.5
size.yscale = 0.5

[State 0, finalizacion]
type = ChangeState
triggerall = animtime = 0
trigger1 = time >= 50
value = 2202

;---------------------------------------------------------------------------
; Kamehame-Ha - Finalizacion
[Statedef 2202]
type = S
movetype = A
physics = S
juggle = 4
;poweradd = -500
velset = 0,0
anim = 2202
ctrl = 0
sprpriority = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Taioken - Ataque
[Statedef 2300]
type = S
movetype = A
physics  = N
poweradd = -500
velset = 0,0
anim = 2300
ctrl = 0
sprpriority = 2

[State 0, taioken]
type = Helper
trigger1 = animelem = 3
name = "Taioken Luz"
ID = 2310
stateno = 2310
pos = 4,-44
ownpal = 1
;size.xscale (float)
;size.yscale (float)

[State 0, brillo]
type = Explod
trigger1 = animelem = 2
anim = 7630
ID = 7630
pos = 4,-44
facing = ifelse(random<500,1,-1)
vfacing = ifelse(random<500,1,-1)
bindtime = -1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 0, taiokeeen!]
type = PlaySnd
trigger1 = animelem = 2
value = S5,20
channel = 0

[State 0, finalizar]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------
; Taioken - Projectil
[Statedef 2310]
type        = A
movetype    = A
physics     = N
poweradd    = 0
velset      = 0,0
anim        = 2310
ctrl        = 0
sprpriority = 2

[State 0, taioken]
type = null;Helper
trigger1 = time = 0
name = "Taioken Luz"
ID = 1511
stateno = 1511
pos = 0,0
ownpal = 1
;size.xscale (float)
;size.yscale (float)

[State 0, aumentar tamaño]
type = VarAdd
triggerall = var(1) < 12
trigger1 = time = 0
trigger2 = timemod = 4,0
v = 1
value = 1

[State 0, luz]
type = Explod
trigger1 = var(1) < 12
anim = 7700
ID = 7700
bindtime = -1
removetime = 1
scale = 0.125*var(1), 0.125*var(1)
sprpriority = 5
ontop = 1
ownpal = 1
removeongethit = 1
;ignorehitpause = 1
trans = addalpha
alpha = 128+((time)*4),256;(time-32)*4

[State 0, luz]
type = Explod
trigger1 = var(1) >= 12
anim = 7700
ID = 7700
bindtime = -1
removetime = 1
scale = 0.125*var(1), 0.125*var(1)
sprpriority = 5
ontop = 1
ownpal = 1
removeongethit = 1
trans = addalpha
alpha = 256-((time-32)*4),256;(time-32)*4
ignorehitpause = 1

[State 0, HitDef]
type = HitDef
;trigger1 = enemy, ID != 2320
trigger1 = !numtarget(2320)
attr = A,NA
hitflag = MAFD
guardflag = MA
getpower = 0
givepower = -5
animtype = light
air.animtype = light
priority = 4,Hit
damage = 0,0
pausetime = 0,0
;guard.pause,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = 0,0
guardsound = 0,0
ground.type = High      ;Low,Trip,None
;air.type = High
;guard.slide = 0
ground.hittime = 200
;guard.hit = 0
air.hittime = 200
ground.velocity = 0,0
;guard.velocity = 0
air.velocity = 0,0
;airguard.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 0
kill = 0
numhits = 0
ID = 2320
palfx.time = 10
palfx.mul = 256,256,256
palfx.add = 128,128,128

[State 0, HitDef]
type = HitDef
trigger1 = numtarget(2320)
trigger1 = target(2320), movetype = H
attr = A,NA
hitflag = MAFD
guardflag = MA
getpower = 0
givepower = -5
animtype = light
air.animtype = light
priority = 4,Hit
damage = 0,0
pausetime = 0,0
;guard.pause,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = 0,0
guardsound = 0,0
ground.type = High      ;Low,Trip,None
;air.type = High
;guard.slide = 0
ground.hittime = 200
;guard.hit = 0
air.hittime = 200
ground.velocity = 0,0
;guard.velocity = 0
air.velocity = 0,0
;airguard.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;sprpriority = 5
fall = 0
kill = 0
numhits = 0
p2stateno = 2320
ID = 2321
chainID = 1520
palfx.time = 10
palfx.mul = 256,256,256
palfx.add = 128,128,128

[State 0, rayo de luz 1]
type = Helper
trigger1 =  time = 0
trigger1 = numhelper(2311) < 1
name = "rayo"
ID = 2311
stateno = 2311
pos = 0,0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5

[State 0, rayo de luz 2]
type = Helper
trigger1 =  time = 0
trigger1 = numhelper(2312) < 1
name = "rayo"
ID = 2312
stateno = 2311
pos = 0,0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5

[State 0, rayo de luz 3]
type = Helper
trigger1 =  time = 0
trigger1 = numhelper(2313) < 1
name = "rayo"
ID = 2313
stateno = 2311
pos = 0,0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5

[State 0, rayo de luz 4]
type = Helper
trigger1 =  time = 0
trigger1 = numhelper(2314) < 1
name = "rayo"
ID = 2314
stateno = 2311
pos = 0,0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5

[State 0, rayo de luz 5]
type = Helper
trigger1 =  time = 0
trigger1 = numhelper(2315) < 1
name = "rayo"
ID = 2315
stateno = 2311
pos = 0,0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = root, stateno != 2300

;-------------------------------------------------------------------------------
;Taioken - Rayo de luz
[Statedef 2311]
type = S
anim = 3411
;sprpriority = -5+random%10

[State 0, sin sombra]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-time*4,256

[State 0, Agulo al azar 1]
type = VarRandom
trigger1 = time = 0
trigger1 = ishelper(2311)
v = 1
range = 1,360

[State 0, Agulo al azar 2]
type = VarSet
trigger1 = time = 0
trigger1 = ishelper(2312)
v = 1
value = (helper(2311), var(1)+67+random%11)

[State 0, Agulo al azar 3]
type = VarSet
trigger1 = time = 0
trigger1 = ishelper(2313)
v = 1
value = (helper(2312), var(1)+67+random%11)

[State 0, Agulo al azar 4]
type = VarSet
trigger1 = time = 0
trigger1 = ishelper(2314)
v = 1
value = (helper(2313), var(1)+67+random%11)

[State 0, Agulo al azar 5]
type = VarSet
trigger1 = time = 0
trigger1 = ishelper(2315)
v = 1
value = (helper(2314), var(1)+67+random%11)

[State 0, tamaño al azar maximo]
type = VarRandom
trigger1 = time = 0
v = 2
range = 0,3

[State 0, tamaño creciente velocidad]
type = VarSet
trigger1 = time = 0
v = 3
value = 23

[State 0, tamaño creciente]
type = VarAdd
trigger1 = var(3) > 1
v = 3
value = -1

[State 0, Agulo y tamaño]
type = AngleDraw
trigger1 = 1
value = var(1)
scale = (Const(size.xscale)+(0.1*var(2)))/var(3), (Const(size.yscale)+2+var(2))/var(3)

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time >= 32
trigger2 = numhelper(2310) = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; Taioken - P2 state
[Statedef 2320]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0
statetype = A    
;persistent = 

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = anim
elem = animelemno(0)

[State 0, PosAdd]
type = PosAdd
trigger1 = pos y > 0
y = 0

[State 0, SelfState]
type = SelfState
trigger1 = !alive
trigger1 = pos y >= 0
value = 5150

[State 0, SelfState]
type = SelfState
trigger1 = hitover
trigger1 = alive
trigger1 = pos y >= 0
value = 0
ctrl = 1

[State 0, SelfState]
type = SelfState
trigger1 = hitover
trigger1 = pos y < 0
value = 5030

;---------------------------------------------------------------------------
; Run Punchs - Comienzo
[Statedef 3000]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = -1000
velset = 0,0
anim = 3000
ctrl = 0
sprpriority = 2

[State 3000, super pause]
type = SuperPause
trigger1 = Animelem = 1
time = 40
movetime = 0
anim = -1
sound = -1,-1
darken = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 1
helpertype = normal ;player
name = "Super-Charge"
ID = 6800
stateno = 6800
pos =  -14,-36
size.yscale = 1
size.xscale = 1
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 5

[State 0, combo reset]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State 0, RT reset]
type = VarSet
trigger1 = time = 0
v = 23
value = 0

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 100,0

[State 0, siguiente]
type = ChangeState
trigger1 = animtime = 0 
value = 3001+random%2

;---------------------------------------------------------------------------
; Super Run Punchs - 1er Ataque
[Statedef 3001]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = 0
;velset = 0,0
anim = 3001
ctrl = 0
sprpriority = 2

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 0,3

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%2
channel = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 4
y = 0

[State 0, AfterImage]
type = AfterImage
trigger1 = var(3) = 0
trigger1 = time = 0
time = 2
palbright = 0,0,0;90,90,90
palcontrast = 192,192,192;220,220,220
;paladd = 32,96,128
;palmul = .64,.64,.64
length = 10
timegap = 1
framegap = 1
trans = add

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 100, dust]
type = Explod
trigger1 = animelem = 2
trigger1 = pos y > -120
anim = 7522
ID = 7522
pos = -8,floor(-pos y)
vel = -0.1,0
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 0
ownpal = 1

[State 0, effect wind]
type = Explod
trigger1 = animelem = 2
anim = 7539
ID = 7539 
pos = 31,-24
vfacing = ifelse(random<500,1,-1)
bindtime = 9
removetime = -2
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA          
damage = 20, 8      
getpower = 0,0
animtype = heavy             
guardflag = MA                
hitflag = MAF              
priority = 3, Hit     
pausetime = 1, 1        
sparkno = -1
guard.sparkno = -1           
sparkxy = -10, -22          
hitsound = S1, 2              
guardsound = S2,0            
ground.type = low        
ground.slidetime = 5          
ground.hittime  = 20     
ground.velocity = -1           
airguard.velocity = -1.9,-.8    
air.type = High                  
air.velocity = -1.4,-3           
air.hittime = 20
snap = 30,0
EnvShake.time = 20
EnvShake.freq = 60
EnvShake.ampl = -2
EnvShake.phase = 90
ID = 3000

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
pos = 28,-24
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0


[State 0, combo usado]
type = VarAdd
trigger1 = time = 0
v = 3
value = 1

[State 0, reset combo manual]
type = VarSet
trigger1 = time = 0
v = 4
value = 0

[State 0, agregar combo manual]
type = VarSet
triggerall = (var(3) < 7) || (var(3) >= 7 && power >= 125)
trigger1 = command = "x" || command = "y"
trigger2 = var(59) > 0 && movehit
v = 4
value = 1

[State 240, combo]
type = ChangeState
triggerall = var(3) < 15
triggerall = animelem = 2, > 4
trigger1 = var(3) < 7 || var(4) = 1
value = 3002
ignorehitpause = 1

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 0
trigger1 = var(3) >= 8
value = -125

[State 0, combo]
type = ChangeState
triggerall = animelem = 3
trigger1 = var(23) = 0
trigger2 = numtarget(3000)
trigger2 = target(3000), alive = 0
value = 3003
ignorehitpause = 1

[State 0, combo]
type = ChangeState
triggerall = animelem = 3
trigger1 = var(23) = 1
trigger1 = numtarget(3000)
trigger1 = target(3000), alive
value = 3010
ignorehitpause = 1

[State 0, fin]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Super Run Punchs - 2do Ataque
[Statedef 3002]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
;velset = 0,0
anim = 3002
ctrl = 0
sprpriority = 2

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 0,3

[State 200, ja]
type = PlaySnd
trigger1 = random < 500
trigger1 = animelem = 2
value = S5,0+random%2
channel = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 4
y = 0

[State 0, AfterImage]
type = AfterImage
trigger1 = var(3) = 0
trigger1 = time = 0
time = 2
palbright = 0,0,0;90,90,90
palcontrast = 192,192,192;220,220,220
;paladd = 32,96,128
;palmul = .64,.64,.64
length = 10
timegap = 1
framegap = 1
trans = add

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 100, polvo]
type = Explod
trigger1 = animelem = 2
trigger1 = pos y > -120
anim = 7522
ID = 7522
pos = -8,floor(-pos y)
vel = -0.1,0
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 0
ownpal = 1

[State 0, effect wind]
type = Explod
trigger1 = animelem = 2
anim = 7539
ID = 7539 
pos = 35,-30
vfacing = ifelse(random<500,1,-1)
bindtime = 9
removetime = -2
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA          
damage = 20, 8      
getpower = 0,0
animtype = heavy             
guardflag = MA                
hitflag = MAF              
priority = 3, Hit     
pausetime = 1, 1        
sparkno = -1
guard.sparkno = -1           
sparkxy = -10, -22          
hitsound = S1, 2              
guardsound = S2,0            
ground.type = low        
ground.slidetime = 5          
ground.hittime  = 20     
ground.velocity = -1           
airguard.velocity = -1.9,-.8    
air.type = High                  
air.velocity = -1.4,-3           
air.hittime = 20
snap = 30,0
EnvShake.time = 20
EnvShake.freq = 60
EnvShake.ampl = -2
EnvShake.phase = 90
ID = 3000

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
pos = 32,-30
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, combo usado]
type = VarAdd
trigger1 = time = 0
v = 3
value = 1

[State 0, reset combo manual]
type = VarSet
trigger1 = time = 0
v = 4
value = 0

[State 0, agregar combo manual]
type = VarSet
triggerall = (var(3) < 7) || (var(3) >= 7 && power >= 125)
trigger1 = command = "x" || command = "y"
trigger2 = var(59) > 0
trigger2 = var(58) <= 100/(9-var(59))
trigger2 = movehit = 1
v = 4
value = 1

[State 240, combo]
type = ChangeState
triggerall = var(3) < 15
triggerall = animelem = 2, > 4
trigger1 = var(3) < 7 || var(4) = 1
value = 3001
ignorehitpause = 1

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 0
trigger1 = var(3) >= 8
value = -125

[State 0, combo]
type = ChangeState
triggerall = animelem = 3
trigger1 = var(23) = 0
trigger2 = numtarget(3000)
trigger2 = target(3000), alive = 0
value = 3003
ignorehitpause = 1

[State 0, combo]
type = ChangeState
triggerall = animelem = 3
trigger1 = var(23) = 1
trigger1 = numtarget(3000)
trigger1 = target(3000), alive
value = 3010
ignorehitpause = 1

[State 0, fin]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Super Run Punchs - Ataque final
[Statedef 3003]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3003
ctrl = 0
sprpriority = 2

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 0,4

[State 200, ja]
type = PlaySnd
trigger1 = animelem = 2
value = S5,4+random%2
channel = 0

[State 0, AfterImage]
type = AfterImage
trigger1 = var(3) = 0
trigger1 = time = 0
time = 2
palbright = 0,0,0;90,90,90
palcontrast = 192,192,192;220,220,220
;paladd = 32,96,128
;palmul = .64,.64,.64
length = 10
timegap = 1
framegap = 1
trans = add

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 100, dust]
type = Explod
trigger1 = animelem = 3
trigger1 = pos y > -120
anim = 7522
ID = 7522
pos = -8,floor(-pos y)
vel = -0.1,0
supermovetime = 777
pausemovetime = 777
scale = 1,1
sprpriority = 0
ownpal = 1

[State 0, viento]
type = Explod
trigger1 = animelem = 3
anim = 7538
ID = 7538
pos = 60,10
bindtime = 1
removetime = -2
scale = 0.2,0.2
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 15
y = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA       
getpower = 0,0              
damage = 45, 23                   ;Damage that move inflicts, guard damage
animtype = heavy                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 2, 2                 ;Time attacker pauses, time opponent shakes
sparkno = -1                      ;Spark anim no (Def: set above)
sparkxy = -10, -22               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S1, 3                  ;Sound to play on hit
guardsound = 6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 20             ;Time opponent is in hit state
ground.velocity = -18,-2             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -18,-2           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 20
fall = 1
EnvShake.time = 40
EnvShake.freq = 60
EnvShake.ampl = -4
EnvShake.phase = 90

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,NP,SP,NT,ST
time = 2
ignorehitpause = 1

[State 0, flash]
type = EnvColor
trigger1 = movehit
time = 2
under = 1
ignorehitpause = 1
persistent = 0

[State 0, Spark]
type = Helper
trigger1 = movehit
helpertype = Normal
name = "Spark"
ID = 7002
stateno = 7002
pos = 26,-26
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = p2movetype = H
value = 0
movecamera = 0,0

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RP RT - Ataque final
[Statedef 3010]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3003
ctrl = 0
sprpriority = 2

[State 200, rafaga]
type = PlaySnd
trigger1 = time = 1
value = 0,4

[State 200, ja]
type = PlaySnd
trigger1 = animelem = 2
value = S5,4+random%2
channel = 0

[State 0, AfterImage]
type = AfterImage
trigger1 = var(3) = 0
trigger1 = time = 0
time = 2
palbright = 0,0,0;90,90,90
palcontrast = 192,192,192;220,220,220
;paladd = 32,96,128
;palmul = .64,.64,.64
length = 10
timegap = 1
framegap = 1
trans = add

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 100, dust]
type = Explod
trigger1 = animelem = 3
trigger1 = pos y > -120
anim = 7522
ID = 7522
pos = -8,floor(-pos y)
vel = -0.1,0
supermovetime = 777
pausemovetime = 777
scale = 1,1
sprpriority = 0
ownpal = 1

[State 0, viento]
type = Explod
trigger1 = animelem = 3
anim = 7538
ID = 7538
pos = 60,10
bindtime = 1
removetime = -2
scale = 0.2,0.2
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 15
y = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA       
getpower = 0,0              
damage = 45, 23                   ;Damage that move inflicts, guard damage
animtype = heavy                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 2, 2                 ;Time attacker pauses, time opponent shakes
sparkno = -1                      ;Spark anim no (Def: set above)
sparkxy = -10, -22               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S1, 3                  ;Sound to play on hit
guardsound = 6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 20             ;Time opponent is in hit state
ground.velocity = -18,-2             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -18,-2           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 20
fall = 1
p1stateno = 3011
p2stateno = 3020
EnvShake.time = 40
EnvShake.freq = 60
EnvShake.ampl = -4
EnvShake.phase = 90
p2facing = 1
ID = 3120;	para el RT
kill = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,NP,SP,NT,ST
time = 2
ignorehitpause = 1

[State 0, flash]
type = EnvColor
trigger1 = movehit
time = 2
under = 1
ignorehitpause = 1
persistent = 0

[State 0, Spark]
type = Helper
trigger1 = movehit
helpertype = Normal
name = "Spark"
ID = 7002
stateno = 7002
pos = 26,-26
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RP RT - Golpeando
[Statedef 3011]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3011
ctrl = 0
sprpriority = 2

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, silvido]
type = PlaySnd
trigger1 = animelem = 3
value = S3,10

[State 3600, Effect Wild]
type = Helper
triggerall = numhelper(8600) < 1
trigger1 = time < 5
name = "Effect Wild"
ID = 8600
stateno = 8600
facing = -1
keyctrl = 0
ownpal = 1
postype = left
pos = 160,-125
supermovetime = 65535
pausemovetime = 65535

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3, < 0
x = -10
y = 0

[State 0, AssertSpecial]
type = AssertSpecial
triggerall = animelem = 3, < 0
trigger1 = backedgebodydist < -100
flag = invisible
persistent = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = backedgebodydist < -100
y = p2dist y

[State 0, VelSet]
type = VelSet
triggerall = animelem = 3, < 0
trigger1 = backedgebodydist < -100
x = 0
y = 0

[State 100, polvito]
type = Explod
triggerall = numtarget(3120)
trigger1 = time%4 = 0
postype = p2
anim = 7528
ID = 7528
pos = -5,floor(-pos y)
facing = ifelse(random<500,1,-1)
vfacing = ifelse(random<500,1,-1)
random = 3,1
vel = 10,0
supermovetime = 777
pausemovetime = 777
scale = 0.5,0.5
sprpriority = 0
ownpal = 1

[State 100, dash]
type = Explod
triggerall = numtarget(3120)
trigger1 = time%2 = 0
postype = p2
anim = 7525
ID = 7525
pos  = -5,(target(3120), const(size.head.pos.y)/2)
random = 0,-(target(3120), const(size.head.pos.y))
sprpriority = 0+random%4
vel  = 10+random%4,0
scale = 0.5,0.5
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem >= 4
trigger1 = p2bodydist x > 2
x = 2
y = 0

[State 0, VelMul]
type = null;VelMul
trigger1 = animelem = 3, >= 0
trigger1 = vel x >= 0.05
trigger1 = p2bodydist x > 2
x = -0.005
;y = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animelem = 3, >= 0
trigger1 = p2bodydist x <= 2
value = 3012

;---------------------------------------------------------------------------
; RP RT - Secuencia
[Statedef 3012]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3012
ctrl = 0
sprpriority = 2

[State 0, TargetState]
type = TargetState
trigger1 = animtime = 0
value = 3120
ID = 3120

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 3105

;----------------------------------------------------------------------
;RP RT - P2 state (tripped)
[Statedef 3020]
type = A
movetype = H
physics = N
velset = 0,0

[State 3620, 1]
type = ChangeAnim2
trigger1 = !time
value = 3020

[State 0, PosAdd]
type = PosAdd
trigger1 = frontedgedist > GameWidth / 2
x = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = pos y < 0
y = 5

[State 0, PosSet]
type = PosSet
trigger1 = pos y != 0
trigger1 = time >= 100
trigger2 = pos y >= 0
y = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = timemod = 30,0
time = 30
freq = 60
ampl = -2
phase = 90

[State 0, afterimage]
type = Null;Explod
trigger1 = time%4 = 0
anim = 3021
ID = 3021
pos = 0,0
bindtime = 1
vel = 10,0
removetime = -2
supermovetime
pausemovetime
sprpriority = -5
ownpal = 1
removeongethit = 0

;---------------------------------------------------------------------------
; Rolling Throw - Comienzo
[Statedef 3100]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = -1000
velset = 0,0
anim = 3100
ctrl = 0
sprpriority = 2

[State 3000, super pause]
type = SuperPause
trigger1 = Animelem = 1
time = 40
movetime = 0
anim = -1
sound = -1,-1
darken = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 1
helpertype = normal ;player
name = "Super-Charge"
ID = 6800
stateno = 6800
pos =  -4,-22
size.yscale = 1
size.xscale = 1
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999

[State 0, Ki aura - start]
type = PlaySnd
trigger1 = animelem = 2
value = S900,0
channel = 5
loop = 0

[State 0, Aura]
type = Explod
trigger1 = animelem = 2
anim = 7500
ID = 7500
pos = -3,0
bindtime = -1
removetime = -1
scale = 0.4,0.4
sprpriority = 3
ownpal = 0
removeongethit = 1

[State 0, Aura al azar - grande]
type = Explod
trigger1 = animelem = 2, > 0
trigger1 = random >= 500
anim = 909
ID = 909
pos = -3,-25
vel = 0,ifelse(random<499,-0.2,-0.3)
random = 35,60
;bindtime = -1
removetime = -2
scale = ifelse(random<499,0.1,0.150), ifelse(random<499,0.1,0.150)
sprpriority = ifelse(random<749,3,-3)
ownpal = 1
removeongethit = 1

[State 0, Aura al azar - pequeña]
type = Explod
trigger1 = animelem = 2, > 0
trigger1 = random < 500
anim = 909
ID = 909
pos = -3,-25
vel = 0,ifelse(random<499,-0.2,-0.3)
random = 35,60
;bindtime = -1
removetime = -2
scale = ifelse(random<499,0.05,0.025), ifelse(random<499,0.05,0.025)
sprpriority = ifelse(random<749,3,-3)
ownpal = 1
removeongethit = 1

[State 0, Aura - Ground]
type = Explod
triggerall = pos y > -20
trigger1 = animelem = 2, > 0
trigger1 = timemod = 14,0
anim = 911
ID = 7500
pos = -3,floor(-pos y)
scale = 0.5,0.5
sprpriority = -5
ownpal = 0
removeongethit = 1

[State 0, Aura - Ground 2]
type = Explod
triggerall = pos y > -30
trigger1 = animelem = 2, > 0
trigger1 = timemod = 14,0
anim = 912
ID = 7500
pos = -3,floor(-pos y)
scale = 0.5,0.5
sprpriority = -5
ownpal = 0
removeongethit = 1

[State 0, Dust - Left]
type = Explod
triggerall = pos y > -25
trigger1 = animelem = 2, > 0
trigger1 = timemod = 15,0
anim = 913
ID = 913
pos = -23,floor(-pos y)
facing = 1
scale = 0.5,0.5
sprpriority = 2
ownpal = 0
;removeongethit = 1

[State 0, Dust - Right]
type = Explod
triggerall = pos y > -25
trigger1 = animelem = 2, > 0
trigger1 = timemod = 15,0
anim = 913
ID = 913
pos = 17,floor(-pos y)
facing = -1
scale = 0.5,0.5
sprpriority = 2
ownpal = 0
;removeongethit = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 6
id = 7500

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 5
y = 0 

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, HT
hitflag = MF
priority = 7, Miss
sparkno = -1
sprpriority = 1
p2facing = 1
p1stateno = 3105
p2stateno = 3120
ID = 3120
fall = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Rolling Throw - Agarrando
[Statedef 3105]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = 0
velset = 0,0
anim = 3105
ctrl = 0
sprpriority = 2

[State 3105, acumular casnsansio]
type = VarAdd
triggerall = prevstateno != 3100
trigger1 = time = 0
v = 5
value = (1000-power)

[State 3105, usar poder]
type = PowerAdd
triggerall = prevstateno != 3100
trigger1 = time = 0
value = -1000 

[State 0, Ki aura - start]
type = PlaySnd
triggerall = prevstateno != 3100
trigger1 = animelem = 1
value = S900,0
channel = 5

[State 0, Aura]
type = Explod
triggerall = prevstateno != 3100
trigger1 = animelem = 1
anim = 7500
ID = 7500
pos = -3,0
bindtime = -1
removetime = -1
scale = 0.4,0.4
sprpriority = 3
ownpal = 0
removeongethit = 1

[State 0, flash]
type = EnvColor
triggerall = prevstateno != 3100
trigger1 = animelem = 1
time = 1
under = 0

[State 0, Ki aura - loop]
type = PlaySnd
trigger1 = timemod = 20,0
value = S901,0
channel = 6
loop = 0

[State 0, Aura al azar - grande]
type = Explod
trigger1 = random >= 500
anim = 909
ID = 909
pos = -3,-25
vel = 0,ifelse(random<499,-0.2,-0.3)
random = 35,60
;bindtime = -1
removetime = -2
scale = ifelse(random<499,0.1,0.150), ifelse(random<499,0.1,0.150)
sprpriority = ifelse(random<749,3,-3)
ownpal = 1
removeongethit = 1

[State 0, Aura al azar - pequeña]
type = Explod
trigger1 = random < 500
anim = 909
ID = 909
pos = -3,-25
vel = 0,ifelse(random<499,-0.2,-0.3)
random = 35,60
;bindtime = -1
removetime = -2
scale = ifelse(random<499,0.05,0.025), ifelse(random<499,0.05,0.025)
sprpriority = ifelse(random<749,3,-3)
ownpal = 1
removeongethit = 1

[State 0, Aura - Ground]
type = Explod
triggerall = pos y > -20
trigger1 = timemod = 14,0
anim = 911
ID = 7500
pos = -3,floor(-pos y)
scale = 0.5,0.5
sprpriority = -5
ownpal = 0
removeongethit = 1

[State 0, Aura - Ground 2]
type = Explod
triggerall = pos y > -30
trigger1 = timemod = 14,0
anim = 912
ID = 7500
pos = -3,floor(-pos y)
scale = 0.5,0.5
sprpriority = -5
ownpal = 0
removeongethit = 1

[State 0, Dust - Left]
type = Explod
triggerall = pos y > -25
trigger1 = timemod = 15,0
anim = 913
ID = 913
pos = -23,floor(-pos y)
facing = 1
scale = 0.5,0.5
sprpriority = 2
ownpal = 0
;removeongethit = 1

[State 0, Dust - Right]
type = Explod
triggerall = pos y > -25
trigger1 = timemod = 15,0
anim = 913
ID = 913
pos = 17,floor(-pos y)
facing = -1
scale = 0.5,0.5
sprpriority = 2
ownpal = 0
;removeongethit = 1

[State 0, remolino]
type = Explod
trigger1 = anim = 3105
trigger1 = animelem = 3
anim = 7524
ID = 7524  
pos = 0,-20
facing = ifelse(random < 500,-1,1)
vel = 0,-0.1
accel = 0,-0.05*(random%4)
random = 0,20
scale = 0.5,0.5
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 810, SprPriority]
type = SprPriority
trigger1 = anim = 3105
trigger1 = animelem = 1
trigger2 = animelem = 3
trigger3 = animelem = 7
trigger4 = animelem = 8
trigger5 = animelem = 9
value = 1

[State 810, SprPriority]
type = SprPriority
trigger1 = anim = 3105
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 5
trigger4 = animelem = 6
value = -1

[State 810, Bind 1]
type = TargetBind
trigger1 = anim = 3105
trigger1 = animelem = 1
pos = 8, -36
ID = 3120

[State 810, Bind 2]
type = TargetBind
triggerall = anim = 3105
trigger1 = animelem = 2
trigger2 = animelem = 2
pos = -14, -50
ID = 3120

[State 810, Bind 2]
type = TargetBind
trigger1 = anim = 3105
trigger1 = animelem = 3
pos = -14, -46
ID = 3120

[State 810, Bind 2]
type = TargetBind
trigger1 = anim = 3105
trigger1 = animelem = 4
pos = -8, -44
ID = 3120

[State 810, Bind 2]
type = TargetBind
trigger1 = anim = 3105
trigger1 = animelem = 5
pos = 0, -40
ID = 3120

[State 810, Bind 2]
type = TargetBind
trigger1 = anim = 3105
trigger1 = animelem = 6
pos = 8, -44
ID = 3120

[State 810, Bind 2]
type = TargetBind
trigger1 = anim = 3105
trigger1 = animelem = 7
pos = 14, -46
ID = 3120

[State 810, Bind 2]
type = TargetBind
trigger1 = anim = 3105
trigger1 = animelem = 8
pos = 16, -50
ID = 3120

[State 810, Bind 2]
type = TargetBind
trigger1 = anim = 3105
trigger1 = animelem = 9
pos = 0, -40
ID = 3120

;___________________________
;var(22) = vuelta inicial
;var(4) = botom precionado
;var(3) = vultas adicionales
[State 0, vueltas iniciales]
type = VarSet
trigger1 = time = 0
v = 22    
value = 4

[State 0, usar vueltas iniciales]
type = VarAdd
trigger1 = var(22) > 0
trigger1 = animelem = 5
v = 22
value = -1

[State 0, vuelta adicional reset]
type = VarSet
trigger1 = time = 0 
v = 3
value = 0

;En Commands
[State 0, agregar carga de vuelta (boton presionado)]
type = Null;VarAdd
triggerall = var(4) < 8
trigger1 = command = "x"
trigger2 = command = "y"
v = 4
value = 1

[State 0, agregar vuelta adicional]
type = VarAdd
triggerall = var(22) <= 1;solo cuando las vueltas iniciales estan acabadas o la vuelta final
trigger1 = power >= 250
trigger1 = var(4) >= 8
v = 3
value = 1

[State 0, reset carga de vuelta (boton presionado)]
type = VarSet
triggerall = var(22) <= 1;solo cuando las vueltas iniciales estan acabadas o la vuelta final
trigger1 = time = 0 
trigger2 = var(4) >= 8
v = 4
value = 0

[State 0, usar poder]
type = PowerAdd
triggerall = var(22) <= 0;solo cuando las vueltas iniciales estan acabadas
triggerall = var(3) > 0
trigger1 = animelem = 5
trigger1 = anim = 3105
value = -250;por acada vuelta adicional

[State 0, usar vuelta adicional]
type = VarAdd
triggerall = var(22) <= 0;solo cuando las vueltas iniciales estan acabadas
triggerall = var(3) > 0
trigger1 = animelem = 5
trigger1 = anim = 3105
v = 3
value = -1

;------------------------------
[State 810, dañar]
type = TargetLifeAdd
trigger1 = anim = 3105
trigger1 = animelem = 5
value = -27
ID = 3120
kill = 0

[State 0, HitAdd]
type = HitAdd
trigger1 = anim = 3105
trigger1 = animelem = 5
value = 1

[State 810, dañar al lanzar]
type = TargetLifeAdd
trigger1 = anim = 3110
trigger1 = animelem = 3
value = -33-ifelse(var(23)=1,53,0)
ID = 3120
kill = ifelse(var(23)=1,0,1)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 3105
trigger1 = animelem = 5
value = S0,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 3110
trigger1 = animelem = 3
value = S0,3

[State 0, TargetFacing]
type = TargetFacing
trigger1 = FrontEdgeBodyDist < 5
value = 1
ID = 3120

[State 0, Turn]
type = Turn
trigger1 = FrontEdgeBodyDist < 5

[State 0, VelSet]
type = VelSet
trigger1 = anim = 3105
x = 0.5
y = 0

[State 810, State End]
type = ChangeAnim
triggerall = var(22) <= 0
trigger1 = anim = 3105
trigger1 = animelem = 6
trigger1 = var(3) <= 0
value = 3110
elem = 1

[State 810, lanzar]
type = TargetState
trigger1 = anim = 3110
trigger1 = animelem = 3, = 7
value = ifelse(var(23)=1,3122,3121)
ID = 3120

[State 0, TargetDrop]
type = TargetDrop
trigger1 = !var(23)
trigger1 = anim = 3110
trigger1 = animelem = 3, >= 7
excludeID = -1
keepone = 1

[State 810, Bind 3]
type = TargetBind
trigger1 = anim = 3110
trigger1 = animelem = 1
pos = 0, -40
ID = 3120

[State 810, Bind 3]
type = TargetBind
trigger1 = anim = 3110
trigger1 = animelem = 2
pos = 24, -30
ID = 3120

[State 810, Bind 3]
type = TargetBind
trigger1 = anim = 3110
trigger1 = animelem = 3, < 7
pos = 18, -48
ID = 3120

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = anim = 3110
trigger1 = animelem = 4
id = 7500

[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 3110
trigger1 = animelem = 3
value = S5,4+random%3
channel = 0

[State 0, dash enenmy]
type = Explod
trigger1 = enemynear, stateno=[3121,3122]
trigger1 = enemynear, vel x < 0 
trigger1 = enemynear, vel y < 0
anim = 7527
id = 7527
pos  = 0,-35
facing = -1
postype	= p2
random = 10,10
bindtime = 1
sprpriority = -5+random%10
scale = .5,.5
removetime = -2
ontop = 0
ownpal = 1

[State 0, kame reset]
type = VarSet
trigger1 = !time
v = 23
value = 0

[State 3600, Effect Wild]
type = Helper
triggerall = numhelper(8600) < 1
trigger1 = var(23) = 1
trigger1 = anim = 3110
trigger1 = animelem = 3
name = "Effect Wild"
ID = 8600
stateno = 8600
facing = 1
keyctrl = 0
ownpal = 1
postype = left
pos = 160,-125
supermovetime = 65535
pausemovetime = 65535

[State 3105, mostrar]
type = DisplayToClipboard
trigger1 = 1
text = "vuelta adicionales = %d presion = %d"
params = var(3),(var(4)*100/8)

[State 3105, State End]
type = ChangeState
trigger1 = anim = 3110
trigger1 = animtime = 0
value = ifelse(var(23)=1,3150,0)
ctrl = 1

;----------------------------------------------------------------------
;Rolling Throw - P2 state
[Statedef 3120]
type = A
movetype = H
physics = N
velset = 0,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = time = 0
value = 3120

[State 820, 2]
type = ScreenBound
trigger1 = 1
value = 0

;----------------------------------------------------------------------
;Rolling Throw - P2 lanzado
[Statedef 3121]
type = A
movetype = H
physics = N
velset = -11,-11
poweradd = 40
anim = 5050

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .4

[State 821, 2] ; Recover near ground (use ChangeState)
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 821, 3] ; Recover in mid air (use SelfState)
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER


[State 1026, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 0, LifeAdd]
type = LifeAdd
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = -34
persistent = 0

[State 1026, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1027

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

;----------------------------------------------------------------------
;Rolling Throw - P2 state (tripped for kame)
[Statedef 3122]
type = A
movetype = H
physics = N
;velset = 0,0

[State 3620, 1]
type = ChangeAnim
trigger1 = !time
value = 5050

[State 0, ko voice]
type = PlaySnd
trigger1 = !winko 
trigger1 = !time
value = S11,0
channel = 0

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -12
y = -12

[State 0, desenfoque]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = screenpos y < -60; se paso 60 del techo
x = 0
y = 0 

[State 0, invisible]
type = AssertSpecial
trigger1 = screenpos y < -60; se paso 60 del techo
flag = invisible
persistent = 1

;---------------------------------------------------------------------------
; RT KMHMH - Ataque
[Statedef 3150]
type    = S
movetype= A
physics = S
juggle  = 4
;poweradd = -1000
velset = 0,0
anim = 3150
ctrl = 0
sprpriority = 2

[State 2100, acumular casnsansio]
type = VarAdd
;trigger1 = power < 250
trigger1 = animelem = 3
v = 5
value = (1000-power)

[State 0, PowerAdd]
type = PowerAdd
trigger1 = animelem = 3
value = -1000 

[State 3000, super pause]
type = SuperPause
trigger1 = Animelem = 3
time = 40
movetime = 40
anim = -1
sound = -1,-1
darken = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal ;player
name = "Super-Charge"
ID = 6800
stateno = 6800
pos =  -4,-22
size.yscale = 1
size.xscale = 1
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999

[State 3400, effect]
type = PlaySnd
trigger1 = animelem = 3
value = 4,0
channel = 3

[State 3400, esfera efecto]
type = Explod
trigger1 = animelem = 3
anim = 7000
ID = 7000
pos = -4,-22
bindtime = -1
removetime = -1
scale = 0.4,0.4
sprpriority = 3
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 3400, esfera]
type = Explod
trigger1 = animelem = 3
anim = 3410
ID = 3410
pos = -4,-22
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, rayo de luz 1]
type = Helper
trigger1 =  animelem = 3
trigger1 = numhelper(3410) < 1
name = "rayo"
ID = 3410
stateno = 3410
pos = 0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
size.xscale = 0.5
size.yscale = 0.5

[State 0, rayo de luz 2]
type = Helper
trigger1 =  animelem = 3
trigger1 = numhelper(3411) < 1
name = "rayo"
ID = 3411
stateno = 3410
pos = 0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
size.xscale = 0.5
size.yscale = 0.5

[State 0, rayo de luz 3]
type = Helper
trigger1 =  animelem = 3
trigger1 = numhelper(3412) < 1
name = "rayo"
ID = 3412
stateno = 3410
pos = 0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
size.xscale = 0.5
size.yscale = 0.5

[State 0, rayo de luz 4]
type = Helper
trigger1 =  animelem = 3
trigger1 = numhelper(3413) < 1
name = "rayo"
ID = 3413
stateno = 3410
pos = 0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
size.xscale = 0.5
size.yscale = 0.5

[State 0, rayo de luz 5]
type = Helper
trigger1 =  animelem = 3
trigger1 = numhelper(3414) < 1
name = "rayo"
ID = 3414
stateno = 3410
pos = 0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
size.xscale = 0.5
size.yscale = 0.5

[State 3400, StopSnd]
type = StopSnd
trigger1 = animelem = 4
channel = 3

[State 0, quitar esfera]
type = RemoveExplod
trigger1 = animelem = 4
id = 7000

[State 0, quitar esfera]
type = RemoveExplod
trigger1 = animelem = 4
id = 3410

[State 0, desefoque]
type = ScreenBound
trigger1 = animelem = 4, >= 50
value = 0

[State 3400, traspasable]
type = PlayerPush
trigger1 = animelem = 4
value = 0

[State 3400, haaa!]
type = PlaySnd
trigger1 =  animelem = 4
value = 2000,4
channel = 0

[State 0, flash]
type = EnvColor
trigger1 = animelem = 4
time = 2
under = 1
persistent = 0

[State 0, projectil]
type = Helper
trigger1 = animelem = 4
name = "Kamehameha Up"
ID = 3160
stateno = 3160
pos = 32,-42
facing = 1
keyctrl = 0
ownpal = 1
;supermovetime = 
;pausemovetime = 
;ignorehitpause = 
;persistent = 

[State 0, ScreenBound]
type = ScreenBound
trigger1 = animelem = 5, >= 0
value = 0

[State 0, dash enenmy]
type = Explod
trigger1 = enemynear, stateno = 3170
;trigger1 = enemynear, vel x<0 
;trigger1 = enemynear, vel y<0
anim = 7527
id = 7527
pos  = 0,-5
facing = -1
postype	= p2
random = -(enemynear, const(size.head.pos.y)),10
bindtime = 1
vel = 9,9
accel = 0.1*(random%3),0.1*(random%3)
sprpriority = -5+random%10
scale = .5,.5
removetime = -2
ontop = 0
ownpal = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = animelem = 5, >= 0
flag = invisible

[State 0, TargetState]
type = TargetState
trigger1 = animelem = 5
value = 3170
;ID = 3120
;ignorehitpause = 
;persistent = 

[State 0, silvido]
type = PlaySnd
trigger1 = animelem = 5
value = S3,10

[State 0, ChangeState]
type = ChangeState
triggerall = animelem = 6, > 0
trigger1 = !numhelper(3161)
value = 3151

;---------------------------------------------------------------------------
; RT KMHMH - Finalizacion
[Statedef 3151]
type    = S
movetype= A
physics = S
juggle  = 4
;poweradd = -1000
velset = 0,0
anim = 3151
ctrl = 0
sprpriority = 2

[State 0, ScreenBound]
type = ScreenBound
trigger1 = time < 1
value = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = -240
y = 0

[State 0, TargetState]
type = TargetState
trigger1 = !time
value = 3624
ID = 3400
;ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------
;RT KMHMH - Projectil
[Statedef 3160]
type = A
movetype = A
anim = 7614
sprpriority = 3
ctrl = 0

[State 0, sin sombra]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 0, sin sombra]
type = AssertSpecial
trigger1 = root, animelem = 5, >= 0
flag = invisible
ignorehitpause = 1
persistent = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add
persistent = 1
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 45
scale = 0.5,0.5
ignorehitpause = 1
persistent = 1

[State 0, BindToParent]
type = BindToRoot
trigger1 = 1
time = 1
pos = 22,-46

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S3,5

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 6999
triggerall = numhelper(3421)
triggerall = helper(3421),stateno = 3422
trigger1 = time >= 15
value = 6999
ignorehitpause = 1

[State 0, kame lazer]
type = Helper
trigger1 = time = 2
;helpertype = normal ;player
name = "kame lazer"
ID = 3161
stateno = 3161
pos = 10,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 1
ownpal = 0
size.xscale = 0.5
size.yscale = 0.5

[State 0, DestroySelf]
type = DestroySelf
triggerall = time > 2
trigger1 = numhelper(3161)
trigger1 = helper(3161), stateno = 3162
trigger2 = root, stateno != [3150,3151]

;------------------------------------------------------------
;RT KMHMH - Projectil (punta cabeza)
[Statedef 3161]
type = A
movetype = A
anim = 3417
sprpriority = 3
ctrl = 0

[State 0, sin sombra]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add
persistent = 1
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 45
;scale = 1 
ignorehitpause = 1
persistent = 1

[State 0, lazer]
type = Explod
triggerall = timemod = 2,0
trigger1 = root, animelem = 5, < 0
trigger2 = root, animelem = 6, >= 0
anim = 3416
ID = 3416
pos = 0,0
removetime = 300;-1
scale = 1,1
sprpriority = 3

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = root, animelem = 5
id = 3416

[State 0, efecto]
type = PlaySnd
trigger1 = time = 0
trigger2 = timemod = 75,0
value = S7,10
channel = 3

[State 0, polvo]
type = Explod
trigger1 = time = 0
anim = 7523
ID = 7523
pos = 0,floor(-pos y)
random = 20,5
vel = -0.4,0
scale = 1, 1
sprpriority = 5

[State 0, impulcion frente]
type = VelSet
trigger1 = root, animelem = 5, < 0
trigger2 = root, animelem = 6
x = 5
y = -5

[State 0, VelSet]
type = VelSet
trigger1 = root, animelem = 5
x = 0
y = 0

[State 0, HitDef]
type = HitDef
trigger1 = root, animelem = 6
attr = A,SP
hitflag = MAF
guardflag = MA
givepower = 0
animtype = medium
air.animtype = medium
priority = 4,Hit
damage = ifelse(root,var(10) > 25,2,0), ifelse(root,var(10) > 25,1,0)
;guard.pause,0
sparkno = -1
guard.sparkno = -1
hitsound = -1,-1
guardsound = -1,-1
ground.type = Low
air.type = High
ground.slidetime = 20
guard.slidetime = 0
ground.hittime = 30
air.hittime = 20
ground.velocity = 0,0
;guard.velocity = 0
air.velocity = 0,0
;airguard.velocity = 0,0
;sprpriority = 3
p1getp2facing = 0
p2facing = 1
;p2stateno = 0
fall = 0
palfx.time = 30
palfx.add = 0,50,240
palfx.mul = 120,224,150
palfx.sinadd = 85,55,110,10
palfx.invertall = 0
palfx.color = 0
envshake.time = 20
envshake.freq = 30
envshake.ampl = -2
envshake.phase = 60
p1stateno = 3162
ID = 3400

[State 0, PosAdd]
type = PosAdd
trigger1 = root, animelem = 5
x = p2bodydist x - 660
y = p2bodydist y + 550

[State 0, enfocar]
type = null;ScreenBound
trigger1 = 1
value = 1
movecamera = 30,0

[State 0, explotar]
type = null;ChangeState
trigger1 = FrontEdgeBodyDist <= 0
trigger2 = root, stateno != [3400,3401]
trigger3 = pos y >= 0
trigger4 = root, var(10) <= 0;time > 300
trigger4 = command != "holdz"
;trigger5 = moveguarded
value = 3422

;-------------------------------------------------------
;RT KMHMH - Projectil (explocion)
[Statedef 3162]
type = A
movetype = A
anim = 3422
sprpriority = 5
velset = 0,0
hitdefpersist = 1
movehitpersist = 1

[State 0, StopSnd]
type = StopSnd
trigger1 = time = 0
channel = 3

[State 0, sin sombra]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible
ignorehitpause = 1

[State 0, VarAdd]
type = ParentVarAdd
trigger1 = parent, var(30) > 0
v = 30
value = -2
ignorehitpause = 1

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = parent, var(30) < 0
v = 30
value = 0
ignorehitpause = 1

[State 0, azul]
type = null;BGPalFX
trigger1 = time >= 0
time = 2
add = 0,0,0
mul = 256-(parent,var(30)),256-(parent,var(30))/2,256
invertall = 0
color = 256-(parent,var(30))
ignorehitpause = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 4
id = 3416

[State 0, explocion]
type = PlaySnd
trigger1 = time = 0
value = S6,4

[State 0, circulo]
type = Explod
trigger1 = time = 0
anim = 6803
ID = 6803
removetime = 632
supermovetime = 777
pausemovetime = 777
scale = 1,1
sprpriority = 5

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(6803)
ID = 6803
scale = 0.015625*time*4,0.015625*time*4
removeongethit = 1
trans = addalpha
alpha = 256-(time*8),256

[State 0, explocion]
type = Explod
trigger1 = time < 4
anim = 7902;3430
ID = 7902;3430
pos = 0,0
random = 60,30
facing = ifelse(random<500,1,-1)
vfacing = ifelse(random<500,1,-1)
supermovetime = 777
pausemovetime = 777
scale = .5,.5
sprpriority = 4
ownpal = 1

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = A,HP
hitflag = MAF
;guardflag = MA
givepower = 0
getpower = 0
;affectteam = B         
animtype = medium
air.animtype = medium
priority = 4,Hit
damage = 240-((prevstateno=3661)*240),60-((prevstateno=3661)*60)
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
hitsound = -1,-1;0,0
guardsound = -1,-1
ground.type = High
air.type = High
ground.slidetime = 20
guard.slidetime = 20
ground.hittime = 20
air.hittime = 20
ground.velocity = -10,-4
guard.velocity = -7
air.velocity = -10,-4+((prevstateno=3661)*8)
airguard.velocity = -7,-2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;sprpriority = 1
;p1getp2facing = 1
;p2facing = 1
p2stateno = 3171
fall = 1
fall.recover = 0
palfx.time = 30
palfx.add = 0,50,240
palfx.mul = 120,224,150
palfx.sinadd = 85,55,110,10
palfx.invertall = 0
palfx.color = 0
ID = 3400

[State 0, TargetBind]
type = TargetBind
trigger1 = time = 0
time = 10
id = 3400
pos = 0,0

[State 0, flash]
type = EnvColor
trigger1 = time = 0
time = 3
under = 1

[State 0, templor]
type = EnvShake
trigger1 = time = 0
time = 50
freq = 60
ampl = -4
phase = 90

[State 0, explocion en p2]
type = Explod
trigger1 = numtarget(3400)
trigger1 = target(3400), movetype = H
trigger1 = timemod = 2,1
;trigger1 = helper, target(3400), movetype = H
anim = 7901
ID = 3491;7901
pos = 0,ifelse((target(3400),statetype=L),0,-30)
postype = p2
facing =  ifelse(random<500,1,-1)
vfacing = ifelse(random<500,1,-1)
scale = 0.1*(random%5),0.1*(random%5)
bindtime = 1
random = 30,ifelse((target(3400),statetype=L),3,30)
removetime = -2
scale = 1,1
sprpriority = 4
ownpal = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = numtarget(3400) = 0
;trigger2 = target(3400), statetype = L
id = 3491

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 128

;----------------------------------------------------------------------
;RT KMHMH - P2 state (air static)
[Statedef 3170]
type = A
movetype = H
physics = N
;velset = 0,0

[State 3620, 2]
type = ChangeAnim
trigger1 = !time
value = 5050

[State 0, pos]
type = Posadd
trigger1 = time = 0
x = gamewidth/2
y = gameheight/2

[State 0, EnvShake]
type = EnvShake
trigger1 = timemod = 30,0
time = 30
freq = 60
ampl = -2
phase = 90

;----------------------------------------------------------------------
;RT KMHMH - P2 state (air down)
[Statedef 3171]
type = A
movetype = H
physics = N
;velset = 0,0

[State 3620, 2]
type = ChangeAnim
trigger1 = !time
value = 5050

[State 0, HitVelSet]
type = HitVelSet
trigger1 = !time
x = 1
y = 1

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .4

;-------------------------------------------------------------------------------
; Fire Bomb Kick - Patada inicial
[Statedef 3200]
type        = A
movetype    = A
physics     = N
velset      = 0,0
anim        = 3200
ctrl        = 0
sprpriority = 2
poweradd = -1000

[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 40
movetime = 15
anim = -1
sound = -1,-1
darken = 0

[State 0, Helper]
type = Helper
trigger1 = !time
helpertype = normal ;player
name = "Super-Charge"
ID = 6810
stateno = 6810
pos =  26,-8;var(11),var(12)
size.yscale = 1
size.xscale = 1
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 7, > 1
x = 14
y = 14

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 2
length = 20
palcolor = 0
palbright = 30,30,30
palcontrast = 120,120,220
palpostbright = 32,32,32
paladd = 25,15,5
palmul = .75,.55,.35
timegap = 1
framegap = 1
trans = add

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2
ignorehitpause = 1

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
trigger2 = timemod = 50,0
time = 50
add = 128,16,8
mul = 256,256,256
sinadd = 64,32,16,10
invertall = 0
color = 256

[State 0, aura]
type = null;Explod
trigger1 = animelem = 7, > 0
trigger1 = timemod = 3,0
anim = 908
ID = 908
trigger1 = 1
pos = 26,-8
bindtime = -1
random = 5,5
supermovetime = 777
pausemovetime = 777
scale = 0.4,0.3
sprpriority = 5
ownpal = 0
removeongethit = 1

[State 640, 3]
type = HitDef
trigger1 = 1
attr = A, NA
damage    = 23,83
getpower = 0,0
;givepower = 
hitflag =  MAFD ;MFL
guardflag = HA
animtype = hard
priority = 4
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-40
hitsound   = S6,0
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 30
palfx.mul = 250,224,120
ground.velocity = -3
air.velocity = -3,-6
kill = 0
palfx.time = 50
palfx.add = 240,50,0
palfx.sinadd = 110,55,85,10
palfx.color = 0
envshake.time = 15
envshake.freq = 60
envshake.ampl = -4
envshake.phase = 90
p2stateno = 3220
p2facing = 1
ID = 3200

[State 0, flaa]
type = PlaySnd
trigger1 = animelem = 7, > 1
trigger1 = timemod = 5,0 
value = S4,10
channel = 3

[State 0, agarrar]
type = TargetBind
trigger1 = numtarget(3200)
trigger1 = target(3200), stateno = 3220
time = 1
id = 3200
pos = 26,-8

[State 0, explocion]
type = Explod
trigger1 = timemod = 1,0
anim = 3430
ID = 3430
pos = 26,-8
facing = ifelse (random < 500,-1,1)
vfacing = ifelse (random < 500,-1,1)
supermovetime = 777
pausemovetime = 777
bindtime = 2
scale = 0.1,0.1
vel  = -1+random%3,-1+random%3
sprpriority = 5
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 0, Spark]
type = Helper
trigger1 = moveguarded;contact
helpertype = Normal
name = "Spark"
ID = 7000
stateno = 7000
ownpal = 1
pos = 26,-8
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, rebote explocion]
type = ChangeState
trigger1 = numtarget(3200)
trigger1 = target(3200), stateno = [3220,3221]
trigger1 = pos y >= 0
value = 3201

[State 0, rebote]
type = ChangeState
;trigger1 = !numtarget(3200)
;trigger1 = target(3200), stateno != [3220,3221]
trigger1 = moveguarded
value = 1353

[State 0, fin]
type = ChangeState
;trigger1 = !numtarget(3200)
trigger1 = pos y >= 0
value = 3202

;------------------------------------------------------------------------
; Fire Bomb Kick - Revote
[Statedef 3201]
type        = A
movetype    = I
physics     = A
velset      = -6,-8
anim        = 3201
ctrl        = 0
sprpriority = 2

[State 0, lanzar]
type = TargetState
trigger1 = time = 0
value = 3221
ID = 3200
ignorehitpause = 1

[State 0, herir]
type = TargetLifeAdd
trigger1 = numtarget(3200)
trigger1 = time = 0
value = -160
ID = 3200
kill = 1
ignorehitpause = 1

[State 0, explocion]
type = Helper
trigger1 = time = 0
name = "explocion"
ID = 3210
stateno = 3210
pos = 26,-8
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 1
pausemovetime = 7777
;size.xscale =
;size.yscale =

;------------------------------------------------------------------------
; Fire Bomb Kick - Falla
[Statedef 3202]
type        = A
movetype    = I
physics     = S
velset      = 0,0
anim        = 3202
ctrl        = 0
sprpriority = 2

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0
;ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------
;Fire Bomb Kick - Explocion
[Statedef 3210]
type        = A
movetype    = A
physics     = N
velset      = 0,0
anim        = 6999
ctrl        = 0
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
ignorehitpause = 1
persistent = 1

[State 0, polvo]
type = Explod
trigger1 = time = 0
anim = 7523
ID = 7523
pos = -15,floor(-pos y)
bindtime = 1
removetime = -2
scale = 1,1
sprpriority = 3
ontop = 0
ownpal = 1
ignorehitpause = 1

[State 0, polvo]
type = Explod
trigger1 = time = 0
anim = 7523
ID = 7524
pos = 15,floor(-pos y)
facing = -1
bindtime = 1
removetime = -2
scale = 1,1
sprpriority = 3
ontop = 0
ownpal = 1
ignorehitpause = 1

[State 0, ground]
type = Explod
trigger1 = time = 0
anim = 912
ID = 912
pos = 0,floor(-pos y)
bindtime = 1
removetime = -2
scale = 1,1
sprpriority = -4
ontop = 0
ownpal = 1
ignorehitpause = 1

[State 0, explocion]
type = Explod
trigger1 = numexplod(6812)
trigger1 = timemod = 3,0
anim = 3430
ID = 3430
;postype = p2
pos = 0,floor(pos y)-20
facing = ifelse(random<500,1,-1)
vfacing = ifelse(random<500,1,-1)
random = 40,40
bindtime = 1
removetime = -2
scale = 0.5,0.5
sprpriority = 4
ontop = 0
ownpal = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6812
ID = 6812
pos = 0,0
;postype = p2
removetime = 45
scale = 1,1
sprpriority = 0
ontop = 0
ownpal = 1
ignorehitpause = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(6812)
ID = 6812
scale = 0.02+(0.05*time),0.02+(0.05*time)
trans = addalpha
alpha = 256-(4*time),256

[State 0, camara lenta]
type = Pause
trigger1 = numexplod(6812)
time = 3
movetime = 1
ignorehitpause = 1

[State 0, explocion]
type = Explod
trigger1 = timemod = 1,0
anim = 3430
ID = 3430
postype = p2
pos = 0,-10
facing = ifelse (random < 500,-1,1)
vfacing = ifelse (random < 500,-1,1)
supermovetime = 777
pausemovetime = 777
bindtime = 2
scale = 0.1,0.1
random = 60,10
sprpriority = 5
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 45
freq = 60
ampl = -4
phase = 90

[State 0, EnvColor]
type = EnvColor
trigger1 = time = 0
time = 3
under = 1
ignorehitpause = 1

[State 0, explocion]
type = PlaySnd
trigger1 = time = 0
value = S6,3
;ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time > 50
;trigger1 = !numexplod(6812)

;----------------------------------------------------------------------
;Fire Bomb Kick - P2 state (air gethit)
[Statedef 3220]
type = A
movetype = H
physics = N
;velset = 0,0

[State 3620, 2]
type = ChangeAnim2
trigger1 = !time
value = 3220

[State 0, Agulo]
type = null;AngleDraw
trigger1 = 1
value = -33
;scale = 1,1

[State 0, SelfState]
type = SelfState
trigger1 = p2movetype = H
value = 5030
ignorehitpause = 1

;----------------------------------------------------------------------
;Fire Bomb Kick - P2 state (bounce)
[Statedef 3221]
type = A
movetype = H
physics = N
velset = 0,0

[State 3620, anim]
type = ChangeAnim
trigger1 = time = 0
value = 5100

[State 0, suelo]
type = PosSet
trigger1 = time = 0
y = 0

[State 0, subir]
type = VelSet
trigger1 = time = 0
x = -1
y = -9

[State 0, Gravity]
type = Gravity
trigger1 = time > 0

[State 0, z] 
type = SelfState
trigger1 = time > 1
;trigger1 = vel Y > 0
trigger1 = pos Y > 0
value = 5110;5100 

;---------------------------------------------------------------------------
; Super Kamehame-Ha - Carga
[Statedef 3400]
type = S
movetype = A
physics = S
juggle = 4
poweradd = -500
velset = 0,0
anim = 3400
ctrl = 0
sprpriority = 1

[State 0, usar poder]
type = PowerAdd
trigger1 = Animelem = 5
value = -500
ignorehitpause = 1

[State 3000, super pause]
type = SuperPause
trigger1 = Animelem = 5
time = 40
movetime = 40
anim = -1
sound = -1,-1
darken = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 5
helpertype = normal ;player
name = "Super-Charge"
ID = 6800
stateno = 6800
pos =  -4,-22
size.yscale = 1
size.xscale = 1
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999

[State 0, Helper]
type = null;Helper
trigger1 = random < 300
trigger1 = numhelper(915) < 10
helpertype = normal ;player
name = "piedra"
ID = 915
stateno = 915
pos = -120+random%240,0
ownpal = 1
size.xscale = ifelse(random < 500,0.5,0.25)
size.yscale = ifelse(random < 500,0.5,0.25)

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 30
value = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(30) < 255
trigger1 = animelem = 6, >= 0
v = 30
value = 1
ignorehitpause = 1

[State 0, azul]
type = BGPalFX
trigger1 = animelem = 6, >= 0
time = 2
add = 0,0,0
mul = 256-(var(30)),256-(var(30)/2),256
invertall = 0
color = 256-(var(30))

[State 3400, ka]
type = PlaySnd
trigger1 = animelem = 6, = 1
value = 2000,0
channel = 0

[State 3400, me]
type = PlaySnd
trigger1 = animelem = 8
value = 2000,1
channel = 0

[State 3400, ha]
type = PlaySnd
trigger1 = animelem = 10
value = 2000,2
channel = 0

[State 3400, me]
type = PlaySnd
trigger1 = animelem = 12
value = 2000,3
channel = 0

[State 3400, effect]
type = PlaySnd
trigger1 = animelem = 5
value = 4,0
channel = 3

[State 3400, esfera efecto]
type = Explod
trigger1 = animelem = 5
anim = 7000
ID = 7000
pos = -4,-22
bindtime = -1
removetime = -1
scale = 0.4,0.4
sprpriority = 3
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 3400, esfera]
type = Explod
trigger1 = animelem = 5
anim = 3410
ID = 3410
pos = -4,-22
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 3
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, rayo de luz 1]
type = Helper
trigger1 =  animelem = 5, > 0
trigger1 =  animelem = 12, < 1
trigger1 = numhelper(3410) < 1
name = "rayo"
ID = 3410
stateno = 3410
pos = 0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
size.xscale = 0.5
size.yscale = 0.5

[State 0, rayo de luz 2]
type = Helper
trigger1 =  animelem = 5, > 0
trigger1 =  animelem = 12, < 1
trigger1 = numhelper(3411) < 1
name = "rayo"
ID = 3411
stateno = 3410
pos = 0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
size.xscale = 0.5
size.yscale = 0.5

[State 0, rayo de luz 3]
type = Helper
trigger1 =  animelem = 5, > 0
trigger1 =  animelem = 12, < 1
trigger1 = numhelper(3412) < 1
name = "rayo"
ID = 3412
stateno = 3410
pos = 0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
size.xscale = 0.5
size.yscale = 0.5

[State 0, rayo de luz 4]
type = Helper
trigger1 =  animelem = 5, > 0
trigger1 =  animelem = 12, < 1
trigger1 = numhelper(3413) < 1
name = "rayo"
ID = 3413
stateno = 3410
pos = 0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
size.xscale = 0.5
size.yscale = 0.5

[State 0, rayo de luz 5]
type = Helper
trigger1 =  animelem = 5, > 0
trigger1 =  animelem = 12, < 1
trigger1 = numhelper(3414) < 1
name = "rayo"
ID = 3414
stateno = 3410
pos = 0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
size.xscale = 0.5
size.yscale = 0.5

[State 3400, acumular cansansio]
type = VarAdd
trigger1 = animelem = 6, >= 0
trigger1 = power <= 0
v = 5
value = (625/100)

[State 0, PowerAdd]
type = PowerAdd
trigger1 = animelem = 6, > 0
value = -(625/100);(6.25)

[State 3400, hits reset]
type = VarSet
trigger1 = time = 0
v = 10   
value = 25;minimo 25 tics

[State 3400, acumular hits]
type = VarAdd
trigger1 = animelem = 6, > 0
v = 10
value = 1

[State 0, texto]
type = DisplayToClipboard
trigger1 = 1
text = "acumulacion = %d cansansio %d porciento"
params = var(10), var(5)/10

[State 0, ChangeState]
type = ChangeState
triggerall = animelem = 6, >= 0
trigger1 = animtime = 0
trigger2 = command != "holdz"
value = 3401

;---------------------------------------------------------------------------
; Super Kamehame-Ha - Lanzamiento
[Statedef 3401]
type = S
movetype = A
physics = S
juggle = 4
poweradd = 0
velset = 0,0
anim = 3401
ctrl = 0
sprpriority = 2

[State 0, texto]
type = DisplayToClipboard
trigger1 = 1
text = "acumulacion = %d cansansio %d porciento"
params = var(10), var(5)/10

[State 0, VarAdd]
type = VarAdd
triggerall = var(30) < 256
trigger1 = time >= 0
v = 30
value = 1
ignorehitpause = 1

[State 0, azul]
type = BGPalFX
trigger1 = time >= 0
time = 2
add = 0,0,0
mul = 256-(var(30)),256-(var(30)/2),256
invertall = 0
color = 256-(var(30))

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2bodydist x < -15
;ignorehitpause = 
;persistent = 

[State 3400, StopSnd]
type = StopSnd
trigger1 = animelem = 2
channel = 3

[State 0, mover esfera]
type = ModifyExplod
trigger1 = animelem = 1
ID = 7000
pos = 0,-21
postype = p1  

[State 0, quitar esfera]
type = RemoveExplod
trigger1 = animelem = 2
id = 7000

[State 0, mover esfera]
type = ModifyExplod
trigger1 = animelem = 1
ID = 3410
pos = 0,-21
postype = p1  

[State 0, quitar esfera]
type = RemoveExplod
trigger1 = animelem = 2
id = 3410

[State 0, desefoque]
type = ScreenBound
;trigger1 =  projhit = 1
trigger1 = backedgebodydist < 0
trigger2 = numhelper(3420)
trigger2 = helper(3420), numtarget(3400) > 0
value = 0

[State 3400, traspasable]
type = PlayerPush
trigger1 = animelem = 2
value = 0

[State 3400, haaa!]
type = PlaySnd
trigger1 =  animelem = 2
value = 2000,4
channel = 0

[State 0, flash]
type = EnvColor
trigger1 = animelem = 2
time = 2
under = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
name = "kamehameha"
ID = 3420
stateno = 3420
pos = 46,-34
ownpal = 1
keyctrl = 1
size.xscale = 0.4
size.yscale = 0.4

[State 0, fx salida]
type = Explod
triggerall = animelem = 2 || timemod = 10,0
trigger1 = numhelper(3421)
trigger1 = helper(3421), stateno != 3422
trigger1 = helper(3421), numexplod(3416)
trigger2 = time < 10
anim = 7614
ID = 7614
pos = 32,-34
bindtime = -1
random = 1,1
scale = 0.4,0.4
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 0, usar poder]
type = PowerAdd
triggerall = var(10) <= 0
trigger1 = numhelper(3420)
trigger1 = helper(3421), stateno = 3421
trigger1 = animelem = 2, > 0
value = -5

[State 0, acumular cansansio]
type = VarAdd
triggerall = var(10) <= 0
triggerall = power <= 0
trigger1 = numhelper(3420)
trigger1 = helper(3421), stateno = 3421
trigger1 = animelem = 2, > 0
v = 5
value = 5

[State 0, cansado]
type = null;ChangeState
triggerall = animelem = 2, > 0
;trigger1 = numhelper(3420)  = 0
trigger1 = numhelper(3421)
trigger1 = helper(3421), stateno = 3422
trigger1 = helper(3421), time = 32
trigger1 = power < 2
value = 5300
anim = 3401

[State 1220, 3]
type = ChangeState
triggerall = animelem = 2, > 0
;trigger1 = numhelper(3420) = 0
trigger1 = numhelper(3421)
trigger1 = helper(3421), stateno = 3422
trigger1 = helper(3421), time = 32
value = 3402

;-------------------------------------------------------------------------------
; Super Kamehame-ha - Finalizacion
[Statedef 3402]
type        = S
movetype    = A
physics     = N
velset      = 0,0
anim        = 3402
ctrl        = 0
sprpriority = 2
poweradd = 0

[State 0, desenfoque]
type = ScreenBound
trigger1 = backedgebodydist < 0
value = 0

[State 1220, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Whirlwind Attack - Comienzo
[Statedef 3500]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = -1000
velset = 0,0
anim = 3500
ctrl = 0
sprpriority = 2

[State 3000, super pause]
type = SuperPause
trigger1 = Animelem = 1
time = 40
movetime = 40
anim = -1
sound = -1,-1
darken = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 1
helpertype = normal ;player
name = "Super-Charge"
ID = 6800
stateno = 6800
pos =  -4,-22
size.yscale = 1
size.xscale = 1
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999

[State 0, Explod]
type = Explod
trigger1 = time > 50 && timemod = 10,0
anim = 3520
ID = 3520
pos = 0,-30
vfacing = ifelse(random<500,1,-1)
vel = 0,-0.050
;accel = 0,-0.05*(random%4)
random = 0,40
removetime = -2
scale = 0.5,0.5
sprpriority = 3
shadow = -1
ownpal = 0
removeongethit = 1
ignorehitpause = 1

[State 1220, 3]
type = ChangeState
trigger1 = time = 400
value = 3501

;---------------------------------------------------------------------------
; Whirlwind Attack - Estatico
[Statedef 3501]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
;anim = 3500
ctrl = 0
sprpriority = 2

[State 0, Explod]
type = Explod
trigger1 = timemod = 10,0
anim = 3520
ID = 3520
pos = 0,-30
vfacing = ifelse(random<500,1,-1)
vel = 0,-0.50
;accel = 0,-0.05*(random%4)
random = 0,40
removetime = -2
scale = 0.5,0.5
sprpriority = 3
shadow = -1
ownpal = 0
removeongethit = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
; Dragon Fist - Comienzo
[Statedef 3600]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = -1000
velset = 0,0
anim = 3600
ctrl = 0
sprpriority = 2

[State 3000, super pause]
type = SuperPause
trigger1 = Animelem = 3
time = 40
movetime = 0
anim = -1
sound = -1,-1
darken = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal ;player
name = "Super-Charge"
ID = 6800
stateno = 6800
pos =  -4,-22
size.yscale = 1
size.xscale = 1
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5, > 0 && animelem = 8, < 0
x = 20

[State 200, rafaga]
type = PlaySnd
trigger1 = animelem = 5
value = 100,0

[State 0, effect shot]
type = Explod
trigger1 = animelem = 7
anim = 7111;7121
ID = 7111;7121
pos = 26,-26
facing = -1
removetime = -2
bindtime = -1
scale = 0.5,0.9
sprpriority = 4
ownpal = 1
removeongethit = 1
trans = addalpha
alpha = 167,256

[State 100, dash]
type = Explod
triggerall = vel x != 0
trigger1 = time%2 = 0
anim = 7525
ID = 7525
pos  = -20,-35
random = 0,50
sprpriority = 0+random%4
vel  = 1+random%2,0
scale = 0.5,0.5
ownpal = 1

[State 800, 1]
type = HitDef
trigger1 = time = 0
attr = S, HA
hitflag = MAF
sparkno = -1
damage = 50
ground.hittime = 200
   air.hittime = 200
hitsound = S1,4
p2facing = 1
;p1stateno = 3601
p2stateno = 3620
ID = 3620
kill = 0

[State 0, Spark]
type = Helper
trigger1 = movehit
helpertype = Normal
name = "Spark"
ID = 7002
stateno = 7002
pos = 26,-26
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = numtarget(3620)
time = 1
id = 3620
pos = 20,0
ignorehitpause = 1
persistent = 0

[State 0, flash]
type = EnvColor
trigger1 = movehit = 1
under = 1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = movehit = 1
x = 0
y = 0

[State 0, adelantar anim]
type = ChangeAnim
trigger1 = movehit = 1
value = anim
elem = 9
ignorehitpause = 1

[State 0, fin]
type = ChangeState
trigger1 = animtime = 0 
value = ifelse(movehit&&numtarget(3620),3601,0)
ctrl = 1

;---------------------------------------------------------------------------
; Dragon Fist - 1° ataque
[Statedef 3601]
type     = S
movetype = A
physics  = S
juggle   = 4
poweradd = 0
velset = 0,0
anim = 3601
ctrl = 0
sprpriority = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1

[State 3600, golpe]
type = HitDef
trigger1 = time = 0
attr = S, HA
animtype  = Heavy
damage    = 10
guardflag = MA
pausetime = 2,2
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-32
hitsound   = S1,1
guardsound = S2,0
ground.type = Low
ground.slidetime = 100
ground.hittime  = 100
   air.hittime  = 100
ground.velocity = -20
   air.velocity = -1,-2
forcestand = 1
p1stateno = 3602
ID = 3601
chainID = 3620
kill = 0

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7002
stateno = 7002
ownpal = 1
pos = 34,-20
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 0, Zanzoken]
type = Helper
trigger1 = movehit = 1
helpertype = player
name = "Zanzoken"
ID = 925
stateno = 925
facing = 1
ownpal = 1
ignorehitpause = 1

[State 3600, Effect Wild]
type = Helper
trigger1 = numtarget(3620) && numhelper(8600) < 1
name = "Effect Wild"
ID = 8600
stateno = 8600
facing = 1
keyctrl = 0
ownpal = 1
postype = left
pos = 160,-125
supermovetime = 65535
pausemovetime = 65535

[State 0, fin]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dragon Fist - 2° ataque
[Statedef 3602]
type     = S
movetype = A
physics  = S
juggle   = 4
poweradd = 0
velset = 0,0
anim = 3602
ctrl = 0
sprpriority = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = time <= 2
value = 0

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
scale = 1,0.5
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 0
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, efect]
type = Explod
trigger1 = time = 1
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
scale = 1,0.5
bindtime = -1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 0
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, tele]
type = PlaySnd
trigger1 = time = 0
value = S920,1
;channel = 5

[State 0, trans]
type = VarSet
trigger1 = time = 0
v = 11
value = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 1 
x = p2bodydist x + 120
y = 0

[State 0, Turn]
type = Turn
trigger1 = time = 1 
trigger1 = p2bodydist x < 0

[State 440, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2

[State 0, Zanzoken]
type = Helper
trigger1 = movehit = 1
helpertype = player
name = "Zanzoken"
ID = 925
stateno = 925
facing = 1
ownpal = 1
ignorehitpause = 1

[State 3600, golpe]
type = HitDef
trigger1 = time = 0
attr = S, HA
animtype  = Heavy
damage    = 10
guardflag = MA
pausetime = 2,2
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-32
hitsound   = S1,3
guardsound = S2,0
ground.type = Low
ground.slidetime = 100
ground.hittime  = 100
   air.hittime  = 100
ground.velocity = -20
   air.velocity = -1,-2
forcestand = 1
p1stateno = 3603
ID = 3602
chainID = 3601
kill = 0

[State 3600, Effect Wild]
type = Helper
trigger1 = numtarget(3601) && numhelper(8600) < 1
name = "Effect Wild"
ID = 8600
stateno = 8600
facing = 1
keyctrl = 0
ownpal = 1
postype = left
pos = 160,-125
supermovetime = 65535
pausemovetime = 65535

[State 0, fin]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dragon Fist - 3° ataque
[Statedef 3603]
type     = S
movetype = A
physics  = S
juggle   = 4
poweradd = 0
velset = 0,0
anim = 3603
ctrl = 0
sprpriority = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = time <= 2
value = 0

[State 0, efect]
type = Explod
trigger1 = time = 0
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
scale = 1,0.5
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 0
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, efect]
type = Explod
trigger1 = time = 1
anim = 925
ID = 925 
facing = ifelse(random<499,1,-1)
scale = 1,0.5
bindtime = -1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 0
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, tele]
type = PlaySnd
trigger1 = time = 0
value = S920,1
;channel = 5

[State 0, trans]
type = VarSet
trigger1 = time = 0
v = 11
value = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 1 
x = p2bodydist x + 120
y = 0

[State 0, Turn]
type = Turn
trigger1 = time = 1 
trigger1 = p2bodydist x < 0

[State 440, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2

[State 3600, golpe]
type = HitDef
trigger1 = time = 0
attr = C, HA
animtype  = Heavy
damage    = 10
guardflag = MA
pausetime = 2,2
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-32
hitsound   = S1,3
guardsound = S2,0
ground.type = Low
ground.slidetime = 100
ground.hittime  = 100
   air.hittime  = 100
ground.velocity = -10,-10
   air.velocity = -10,-10
fall = 1
p2stateno = 3621
ID = 3603
chainID = 3602
kill = 0

[State 0, Spark]
type = Helper
trigger1 = movecontact
helpertype = Normal
name = "Spark"
ID = 7001
stateno = 7001
ownpal = 1
pos = 30,-36
supermovetime = 20
pausemovetime = 20
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
persistent = 0

[State 3600, Effect Wild]
type = Helper
trigger1 = numtarget(3602) && numhelper(8600) < 1
name = "Effect Wild"
ID = 8600
stateno = 8600
facing = 1
keyctrl = 0
ownpal = 1
postype = left
pos = 160,-125
supermovetime = 65535
pausemovetime = 65535

[State 0, fin]
type = ChangeState
trigger1 = animtime = 0 
value = ifelse(movehit&&numtarget(3603),3604,0)
ctrl = 1

;---------------------------------------------------------------------------
; Dragon Fist - Carga de Ki
[Statedef 3604]
type     = S
movetype = A
physics  = S
juggle   = 4
poweradd = 0
velset = 0,0
anim = 3604
ctrl = 0
sprpriority = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1

[State 0, ahhhh]
type = PlaySnd
trigger1 = animelem = 2
value = S3600,0

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 7540
ID = 7540
pos = 0,0
bindtime = -1
removetime = 200
supermovetime = -1
pausemovetime = -1
scale = 1,1
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
;ignorehitpause = 
;persistent = 

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 200
value = 3605

;---------------------------------------------------------------------------
; Dragon Fist - Salto
[Statedef 3605]
type     = S
movetype = A
physics  = N
juggle   = 4
poweradd = 0
velset = 0,0
anim = 3605
ctrl = 0
sprpriority = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x =  1
y = -1

[State 0, VelSet]
type = VelSet
trigger1 = time = 40;screenpos y > 
x =  0
y =  0

[State 0, dash]
type = Explod
trigger1 = animelem = 3, > 0
trigger1 = time%2 = 0
anim = 7527
id = 7527
pos  = 0,-35
postype	= p1
facing  = 1
vfacing	= 1
random = 10,10
bindtime = 1
sprpriority = -5+random%10
vel = -10-random%2,10+random%2
removetime = -2
accel = 0,0
scale = 0.5,0.5
ontop = 0
ownpal = 1

[State 0, PalFX]
type = PalFX
trigger1 = animelem = 3
time = 77777777
add = 0,30,30
mul = 256,256,256
;sinadd = 0,0,0,10
invertall = 0
color = 128 

[State 0, afterimage]
type = Explod
trigger1 = animelem = 3, > 0
trigger1 = timemod = 5,2
anim = 3615
id = 3615
pos  = 0,0
;random = 10,20
bindtime = 1
sprpriority = -5
vel = -10-random%2,10+random%2
removetime = -2
ontop = 0
trans = addalpha
alpha = 256-time,256

[State 0, ahhhh]
type = PlaySnd
trigger1 = animelem = 4
value = S3600,1

[State 3000, super pause]
type = null;SuperPause
trigger1 = time = 200
time = 40
movetime = 0
anim = -1
sound = -1,-1
darken = 0

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 200
value = -1000

[State 0, Helper]
type = Helper
trigger1 = time = 200
helpertype = normal ;player
name = "Super-Charge"
ID = 6810
stateno = 6810
pos =  10,-22
size.yscale = 1
size.xscale = 1
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999

[State 0, PalFX]
type = PalFX
trigger1 = time = 200
time = 77777777
add = 30,30,0
mul = 256,256,256
;sinadd = 0,0,0,10
invertall = 0
color = 128 

[State 0, poder del dragon destructor!]
type = PlaySnd
trigger1 = time = 240
value = S3600,2
channel = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time > 350
value = 3606
ctrl = 0
;anim =
;ignorehitpause = 
;persistent = 

;---------------------------------------------------------------------------
; Dragon Fist - Puño
[Statedef 3606]
type     = S
movetype = A
physics  = N
juggle   = 4
poweradd = 0
velset = 0,0
anim = 3606
ctrl = 0
sprpriority = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1
persistent = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0 
x = p2bodydist x - 640
y = p2bodydist y + 640

[State 0, desenfoque]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, TargetState]
type = TargetState
trigger1 = time = 0
value = 3622
ID = 3603

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 7
y = -7

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit = 1
value = S1,7

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
name = "Dragon Head"
ID = 7800
stateno = 7800
pos = 34,-42
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 7777777
;pausemovetime = 7777777
size.xscale = 0.7
size.yscale = 0.7
ignorehitpause = 1

[State 3600, golpe]
type = HitDef
trigger1 = time = 0
attr = A, HA
animtype  = Heavy
damage    = 350
guardflag = MA
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = -10,-32
hitsound   = S1,17
guardsound = S2,0
ground.type = Low
ground.slidetime = 100
ground.hittime  = 100
   air.hittime  = 100
ground.velocity = -10,-10
   air.velocity = -10,-10
fall = 1
p1stateno = 3607
p2stateno = 3623
ID = 3606
chainID = 3603

;---------------------------------------------------------------------------
; Dragon Fist - Traspasando
[Statedef 3607]
type     = S
movetype = A
physics  = N
juggle   = 4
poweradd = 0
velset = 0,0
anim = 3607
ctrl = 0
sprpriority = -4

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 7030+time
ID = 7030
pos = 0,0
postype = p2
bindtime = -1
random = 10,10
;supermovetime
;pausemovetime
scale = 0.25+random%3,0.25+random%3
sprpriority = 5
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 7031
ID = 7030
pos = 0,0
postype = p2
bindtime = -1
random = 10,10
;supermovetime
;pausemovetime
scale = 0.25+random%3,0.25+random%3
sprpriority = 5
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 7032
ID = 7030
pos = 0,0
postype = p2
bindtime = -1
random = 10,10
;supermovetime
;pausemovetime
scale = 0.25+random%3,0.25+random%3
sprpriority = 5
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, no kame]
type = VarSet
trigger1 = !time
v = 23   
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,18

[State 0, flash]
type = EnvColor
trigger1 = time = 0
time = 5
under = 1
value = 256,0,0
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time >= 0
flag = nobardisplay
ignorehitpause = 1
persistent = 1

[State 0, camara lenta]
type = Pause
trigger1 = animelem = 3, < 0
time = 4
endcmdbuftime = 4
movetime = 0
pausebg = 0
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 0, desenfoque]
type = ScreenBound
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 0, Turn]
type = Turn
trigger1 = animelem = 7
;ignorehitpause = 
;persistent = 

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = animtime = 0
flag = invisible
persistent = 1

[State 0, TargetState]
type = TargetState
;trigger1 = !target(3606), stateno != 3624
trigger1 = animtime = 0
value = 3624
ID = 3606
persistent = 0

[State 0, TargetState]
type = TargetState
;trigger1 = !target(3606), stateno != 3624
trigger1 = animtime = 0
value = 3624
ID = 3606
persistent = 0

[State 3607, kamehameha]
type = ChangeState
trigger1 = animelem = 9, >= 3
trigger1 = var(23) = 1
trigger1 = target, alive
value = 3650
ctrl = 1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = !numtarget(3606)
value = 3608

;---------------------------------------------------------------------------
; Dragon Fist - Cayendo
[Statedef 3608]
type     = A
movetype = I
physics  = A
juggle   = 4
poweradd = 0
velset = 0,0
anim = 44
ctrl = 0
sprpriority = -4

[State 0, PalFX]
type = PalFX
trigger1 = time = 0
time = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
y = -420

[State 0, ScreenBound]
type = ScreenBound
trigger1 = screenpos y < 30
value = 0

;----------------------------------------------------------------------
;Dragon Fist - P2 state (tired)
[Statedef 3620]
type = S
movetype = H
physics = N
velset = 0,0

;mi metodo para esos char q no tienen colicion en la anim 5300 :D
[State 6820, 1]
type = ChangeAnim2
trigger1 = !time
value = 3620

[State 6820, gethit]
type = Explod
triggerall = !numexplod(3620)
triggerall = animexist(5007)
trigger1 = !animexist(5300)
trigger2 = time = 0
anim = 5007
ID = 3620
pos = 0,0
postype = p1  
ownpal = 0
bindtime = -1
removetime = 10
scale = 1,1
sprpriority = 0
ontop = 0
shadow = -1
ownpal = 0
removeongethit = 1

[State 6820, tired]
type = Explod
triggerall = !numexplod(3621)
triggerall = animexist(5300)
trigger1 = !animexist(5007)
trigger1 = time = 0
trigger2 = numexplod(3620) = 0
anim = 5300
ID = 3621
pos = 0,0
postype = p1  
bindtime = -1
removetime = -1
scale = 1,1
sprpriority = 0
ontop = 0
shadow = -1
removeongethit = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time > 50
trigger1 = hitover
id = 3620

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time > 50
trigger1 = hitover
id = 3621

[State 0, fin]
type = SelfState
trigger1 = pos y >= 0
trigger1 = time > 50
trigger1 = hitover
value = 0
ctrl = 1

[State 0, fin]
type = SelfState
trigger1 = pos y < 0
trigger1 = time > 50
trigger1 = hitover
value = 5030

;----------------------------------------------------------------------
;Dragon Fist - P2 state (tripped)
[Statedef 3621]
type = A
movetype = H
physics = N
;velset = 0,0

[State 3620, 1]
type = ChangeAnim
trigger1 = !time
value = 5050

[State 0, HitVelSet]
type = HitVelSet
trigger1 = !time
x = 1
y = 1

[State 0, desenfoque]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = screenpos y < -60; se paso 60 del techo
x = 0
y = 0 

[State 0, invisible]
type = AssertSpecial
trigger1 = screenpos y < -60; se paso 60 del techo
flag = invisible
persistent = 1

;----------------------------------------------------------------------
;Dragon Fist - P2 state (air static)
[Statedef 3622]
type = A
movetype = H
physics = N
;velset = 0,0

[State 3620, 2]
type = ChangeAnim2
trigger1 = !time
value = 3622

[State 0, Agulo]
type = AngleDraw
trigger1 = 1
value = -33
;scale = 1,1

[State 0, pos]
type = Posadd
trigger1 = time = 0
x = gamewidth/2
y = gameheight/2

;----------------------------------------------------------------------
;Dragon Fist - P2 state (air gethit)
[Statedef 3623]
type = A
movetype = H
physics = N
;velset = 0,0

[State 3620, 2]
type = ChangeAnim2
trigger1 = !time
value = 3623

[State 0, Agulo]
type = AngleDraw
trigger1 = 1
value = -33
;scale = 1,1

[State 0, desenfoque]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = screenpos y < 300
x = 7
y =  7

;----------------------------------------------------------------------
;Dragon Fist - P2 state (air down)
[Statedef 3624]
type = A
movetype = H
physics = N
velset = 0,0

[State 3620, 1]
type = ChangeAnim
trigger1 = !time
value = 5050

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .4

[State 0, PosAdd]
type = Posset
trigger1 = time = 0
y = -420

[State 0, ScreenBound]
type = null;ScreenBound
trigger1 = screenpos y < 30
value = 0

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = time > 1
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

;---------------------------------------------------------------------------
; DF KMHMH - Ataque
[Statedef 3650]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = 0;-1000
velset = 0,0
anim = 3650
ctrl = 0
sprpriority = 2

[State 0, PalFX]
type = PalFX
trigger1 = time = 0
time = 1

[State 2100, acumular casnsansio]
type = VarAdd
;trigger1 = power < 250
trigger1 = animelem = 3
v = 5
value = (1000-power)

[State 0, PowerAdd]
type = PowerAdd
trigger1 = animelem = 3
value = -1000 

[State 3000, super pause]
type = SuperPause
trigger1 = Animelem = 3
time = 40
movetime = 40
anim = -1
sound = -1,-1
darken = 0

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal ;player
name = "Super-Charge"
ID = 6800
stateno = 6800
pos = 2,-46
size.yscale = 1
size.xscale = 1
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999

[State 3400, effect]
type = PlaySnd
trigger1 = animelem = 3
value = 4,0
channel = 3

[State 3400, esfera efecto]
type = Explod
trigger1 = animelem = 3
anim = 7000
ID = 7000
pos = 2,-46
bindtime = -1
removetime = -1
scale = 0.4,0.4
sprpriority = 0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 3400, esfera]
type = Explod
trigger1 = animelem = 3
anim = 3410
ID = 3410
pos = 2,-46
bindtime = -1
removetime = -1
scale = 0.5,0.5
sprpriority = 0
ownpal = 1
supermovetime = 777
pausemovetime = 777
removeongethit = 1

[State 0, rayo de luz 1]
type = Helper
trigger1 =  animelem = 3
trigger1 = numhelper(3410) < 1
name = "rayo"
ID = 3410
stateno = 3410
pos = 0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
size.xscale = 0.5
size.yscale = 0.5

[State 0, rayo de luz 2]
type = Helper
trigger1 =  animelem = 3
trigger1 = numhelper(3411) < 1
name = "rayo"
ID = 3411
stateno = 3410
pos = 0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
size.xscale = 0.5
size.yscale = 0.5

[State 0, rayo de luz 3]
type = Helper
trigger1 =  animelem = 3
trigger1 = numhelper(3412) < 1
name = "rayo"
ID = 3412
stateno = 3410
pos = 0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
size.xscale = 0.5
size.yscale = 0.5

[State 0, rayo de luz 4]
type = Helper
trigger1 =  animelem = 3
trigger1 = numhelper(3413) < 1
name = "rayo"
ID = 3413
stateno = 3410
pos = 0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
size.xscale = 0.5
size.yscale = 0.5

[State 0, rayo de luz 5]
type = Helper
trigger1 =  animelem = 3
trigger1 = numhelper(3414) < 1
name = "rayo"
ID = 3414
stateno = 3410
pos = 0,0
ownpal = 1
supermovetime = 777
pausemovetime = 777
size.xscale = 0.5
size.yscale = 0.5

[State 3400, StopSnd]
type = StopSnd
trigger1 = animelem = 4
channel = 3

[State 0, quitar esfera]
type = RemoveExplod
trigger1 = animelem = 4
id = 7000

[State 0, quitar esfera]
type = RemoveExplod
trigger1 = animelem = 4
id = 3410

[State 0, desefoque]
type = ScreenBound
trigger1 = animelem = 4, >= 50
value = 0

[State 3400, traspasable]
type = PlayerPush
trigger1 = animelem = 4
value = 0

[State 3400, haaa!]
type = PlaySnd
trigger1 =  animelem = 4
value = 2000,4
channel = 0

[State 0, flash]
type = EnvColor
trigger1 = animelem = 4
time = 2
under = 1
persistent = 0

[State 0, projectil]
type = Helper
trigger1 = animelem = 4
name = "Kamehameha Down"
ID = 3660
stateno = 3660
pos = 32,-42
facing = 1
keyctrl = 0
ownpal = 1
;supermovetime = 
;pausemovetime = 
;ignorehitpause = 
;persistent = 

[State 0, ScreenBound]
type = ScreenBound
trigger1 = animelem = 5, >= 0
value = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = animelem = 5, >= 0
flag = invisible

[State 0, TargetState]
type = TargetState
trigger1 = animelem = 5
value = 3670
;ID = 3120
;ignorehitpause = 
;persistent = 

[State 0, silvido]
type = PlaySnd
trigger1 = animelem = 5
value = S3,10

[State 0, ChangeState]
type = ChangeState
triggerall = animelem = 6, > 0
trigger1 = !numhelper(3661)
value = 3651

;---------------------------------------------------------------------------
; DF KMHMH - Finalizacion
[Statedef 3651]
type    = S
movetype= A
physics = A
juggle  = 4
;poweradd = -1000
velset = 0,0
anim = 3651
ctrl = 0
sprpriority = 2

[State 0, ScreenBound]
type = ScreenBound
trigger1 = time < 1
value = 0

[State 0, TargetState]
type = TargetState
trigger1 = !time
trigger1 = enemy, stateno != 3671
trigger1 = enemy, stateno != 5150
value = 3624
ID = 3400
;ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = 0
y = -420

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 0

;---------------------------------------------------------------------------------
;DF KMHMH - Projectil
[Statedef 3660]
type = A
movetype = A
anim = 7614
sprpriority = 3
ctrl = 0

[State 0, sin sombra]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 0, sin sombra]
type = AssertSpecial
trigger1 = root, animelem = 5, >= 0
flag = invisible
ignorehitpause = 1
persistent = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add
persistent = 1
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -35
scale = 0.5,0.5
ignorehitpause = 1
persistent = 1

[State 0, BindToParent]
type = BindToRoot
trigger1 = 1
time = 1
pos = 20,-28

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S3,5

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 6999
triggerall = numhelper(3421)
triggerall = helper(3421),stateno = 3422
trigger1 = time >= 15
value = 6999
ignorehitpause = 1

[State 0, kame lazer]
type = Helper
trigger1 = time = 2
;helpertype = normal ;player
name = "kame lazer"
ID = 3661
stateno = 3661
pos = 10,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 1
ownpal = 0
size.xscale = 0.5
size.yscale = 0.5

[State 0, DestroySelf]
type = DestroySelf
triggerall = time > 2
trigger1 = numhelper(3661)
trigger1 = helper(3661), stateno = 3162
trigger2 = root, stateno != [3650,3651]

;------------------------------------------------------------
;DF KMHMH - Projectil (punta cabeza)
[Statedef 3661]
type = A
movetype = A
anim = 3417
sprpriority = 3
ctrl = 0

[State 0, sin sombra]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add
persistent = 1
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -35
;scale = 1 
ignorehitpause = 1
persistent = 1

[State 0, lazer]
type = Explod
triggerall = timemod = 2,0
trigger1 = root, animelem = 5, < 0
trigger2 = root, animelem = 6, >= 0
anim = 3416
ID = 3416
pos = 0,0
removetime = 300;-1
scale = 1,1
sprpriority = ifelse((root, animelem = 5, < 0),2,3)

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = root, animelem = 5
id = 3416

[State 0, efecto]
type = PlaySnd
trigger1 = time = 0
trigger2 = timemod = 75,0
value = S7,10
channel = 3

[State 0, impulcion frente]
type = VelSet
trigger1 = root, animelem = 5, < 0
trigger2 = root, animelem = 6
x = 5
y = 4

[State 0, VelSet]
type = VelSet
trigger1 = root, animelem = 5
x = 0
y = 0

[State 0, impulcion frente]
type = VelSet
trigger1 = root, animelem = 6
x = 5
y = 5

[State 0, daño]
type = HitDef
trigger1 = root, animelem = 6
attr = A,SP
hitflag = MAF
guardflag = MA
givepower = 0
getpower = 0
animtype = medium
air.animtype = medium
priority = 4,Hit
damage = 240,60
;guard.pause,0
sparkno = -1
pausetime = 2,2
guard.sparkno = -1
hitsound = -1,-1
guardsound = -1,-1
ground.type = low
air.type = low
ground.slidetime = 20
guard.slidetime = 0
ground.hittime = 30
air.hittime = 20
ground.velocity = 0,0
;guard.velocity = 0
air.velocity = 0,0
;airguard.velocity = 0,0
p2facing = 1
fall = 0
p2sprpriority = 1
envshake.time = 20
envshake.freq = 30
envshake.ampl = -2
envshake.phase = 60
;p1stateno = 3162
;p2stateno = 3671
ID = 3400

[State 0, PosAdd]
type = PosAdd
trigger1 = (root, animelem = 5, = 5)
x = p2bodydist x - 660
y = p2bodydist y - 660

[State 0, flash]
type = EnvColor
triggerall = numtarget(3400)
triggerall = target(3400), alive = 0
trigger1 = movecontact
time = 2
under = 1
ignorehitpause = 1

[State 0, Helper]
type = Helper
triggerall = numtarget(3400)
triggerall = target(3400), alive = 0
trigger1 = movecontact = 1
trigger1 = numhelper(7910) < 1
name = "desintegrado"
ID = 7910
stateno = 7910
pos = 0,0
postype = p2    
facing = 1
keyctrl = 0
ownpal = 1
;supermovetime =
;pausemovetime =
;size.xscale = 1
;size.yscale = 1
ignorehitpause = 1

[State 0, corte]
type = PlaySnd
triggerall = numtarget(3400)
triggerall = target(3400), alive = 0
trigger1 = movecontact = 1
value = S1,19
ignorehitpause = 1

[State 0, explocion]
type = PlaySnd
triggerall = numtarget(3400)
triggerall = target(3400), alive = 0
trigger1 = movecontact = 1
value = S6,6
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = numtarget(3400)
triggerall = target(3400), alive = 0
trigger1 = movecontact = 1
value = 3671
ID = 3400
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall = numtarget(3400)
triggerall = target(3400), alive = 1
trigger1 = movecontact
value = 3162

[State 0, ChangeState]
type = ChangeState
triggerall = numhelper(7910)
trigger1 = helper(7910), animtime = 0
value = 3662

;-------------------------------------------------------
;RT KMHMH - Projectil (finalizacion)
[Statedef 3662]
type = A
movetype = A
anim = 3422
sprpriority = 0
velset = 0,0
hitdefpersist = 1
movehitpersist = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 3416

[State 0, StopSnd]
type = StopSnd
trigger1 = time = 0
channel = 3

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time > 0

;----------------------------------------------------------------------
;DF KMHMH - P2 Helper Desintegrado
[Statedef 7910]
type = A
movetype = I
physics = N
anim = 7910
velset = 0,0
sprpriority = 3

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1
persistent = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 60
scale = 1,1
ignorehitpause = 1
persistent = 1

[State 0, PalFX]
type = PalFX
trigger1 = 1
time = 2
mul = 256,256,256
invertall = 1
persistent = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;----------------------------------------------------------------------
;DF KMHMH - P2 state (air static)
[Statedef 3670]
type = A
movetype = H
physics = N
velset = 0,0

[State 0, Turn]
type = Turn
trigger1 = !time

[State 3620, 2]
type = ChangeAnim2
trigger1 = !time
value = 3622

[State 0, Agulo]
type = AngleDraw
trigger1 = 1
value = 33
;scale = 1,1

[State 0, pos]
type = PosSet;Add
trigger1 = time = 0
x = 0
y = -120

;----------------------------------------------------------------------
;DF KMHMH - P2 state (air gethit)
[Statedef 3671]
type = A
movetype = H
physics = N
velset = 0,0

[State 0, Trans]
type = Trans
trigger1 = time = [0,3]
trans = addalpha
alpha = 192, 256

[State 0, Trans]
type = Trans
trigger1 = time = [4,7]
trans = addalpha
alpha = 128, 256

[State 0, Trans]
type = Trans
trigger1 = time = [8,11]
trans = addalpha
alpha = 64, 256

[State 0, invisible]
type = AssertSpecial
trigger1 = time >= 12
flag = invisible

[State 0, PalFX]
type = PalFX
trigger1 = time < 12
time = 2
add = 256,256,256
mul = 256,256,256
invertall = 1
ignorehitpause = 1

[State 3620, 2]
type = ChangeAnim2
trigger1 = !time
value = 3623

[State 0, Agulo]
type = AngleDraw
trigger1 = 1
value = 33
;scale = 1,1

[State 0, desenfoque]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = screenpos y < 300
x = 0
y = 0

[State 0, Pos]
type = PosSet
trigger1 = animtime = 0
y = 200

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 5150
ctrl = 0

;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

;-------------- Generated by Fighter Factory -------------

;--------------------- Variable List ----------------------

; Var(0) - StateDef 180, 182, 190
; Var(1) - StateDef 915, 970, 7000, 7010, 2010, 945, 1510, 1511
; Var(2) - StateDef 915, 970, 810, 990
; Var(3) - StateDef 915, 1000, 1001, 1100, 1101, 1102, 1103, 1201, 1202, 1300, 1301
; Var(4) - StateDef 917
; Var(5) - StateDef -3, 5300, 940, 941, 950, 951, 960, 2000
; Var(6) - StateDef 5300
; Var(9) - StateDef 921
; Var(10) - StateDef 925
; Var(11) - StateDef 241, 441, 620, 920
; Var(12) - StateDef -3, 620, 920

;--------------------- Float Variable List ----------------------

